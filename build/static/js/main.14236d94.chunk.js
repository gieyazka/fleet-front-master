(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{517:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAACXBIWXMAAC4jAAAuIwF4pT92AAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABARJREFUeNrs109Mm3Ucx/GevHifJ096kSwxshYKLRswYFJKn9J/lNkwKNCupV1BKlCardgCT+kfULCLARyghrGL0x6UmMXEZDPbAwxk2dqnTZ/nqUDAzT8zDjo3k4+HTRKTxcASHy/P4Z3P8fe6/fIVARAdNIVCIVIqlSKNRvOyTqc7YTQa1SaT6WSdmrAoa6q9qtqa91W1yo9USuW4wWAINTQ09BqNxiq9Xv8SQRAigiAO/KboeaAqlUqk1Wp7LBbLj93d3fD5fPD7/Wi3WWGztsHldKCr0wV3VycCgQBIkoTX64Xdbt+sr6+fJgjiRV6gZrNZdOaMa2V8fBxzc3O4eHEOU5OTCA0H4Tt3Fu63O9Db7UbA349oJIypqUl8PDuLWCwGj8cDs9n8Gi9Qt9stCgaD305NTUJDKFFdWY7yozLIpWLICsWQFR7ZSy4Vo6ykGBXH5HDaT2NiYiLX09PzCi/Qvj6PaHR09HI8HkfNiQrIpRKUyotQVlL8zErlRSiSvIFoeBjz8/MPPB7PIV6gx0tLDr3j7ro1OzOD5kYTxK8fRnFBPool+U+2IB+ygiOQFYohl0ogKxSjqvwYPpmdQZAk/1DXKmy8QOVS8WGb1QKH7TRi42Nw2KxwOezocLbD5bDD5bDD2mqG+ZQJb9XroSVq4XLYEY2E4HI6oKiqWOAFWiKV5FlaWx63mpuwsnITW1tb4DgOGxvrYFkWG+vryGQyyGY5JBNJpFMppNNpRELBv6GXeYO2NJ963NbSjEWKQpbjkE6lwDAZ0DQNJpNBKpUCyzJIJpPIchyy2SxCQRJORzuqK4/zBC2S5DU1mv5sa2kGRd14JpSmaTBMBolEAizDgGVZBIcG4LDb8GZl+ee8QKUF4jzTSeOjVnMTqBv7h5KDA2i3WVFZdvQzXqD11aUvODs6+6YvXMCttTVwLIt0OgWWYUDTNNinYJZhnkBZBkmaxsLCAiKRyLpWq3mVF+hSHyEK+3o1k59ewlVqGat3kqBW17B6O4Hry6v/2GvUMr6/ncBVagnxr77GUOS9xHRvCz9/fdJbHb/u1WS+JJ34LubF4odnsXTeg6XzHizGevd2OdaN5bEu3PzAjaWxLlwLO3HF15i741V8wwuUPqfc/olU41GkDrkQgd3hfymk3tuHYTV2whow/bU7vEDZd1XcL8NaPBw1YHdk/+VGDHgQ1WM9QPzMC/SHAMHdD+mQOyB09yl0a7COH+jGgJq7H9YhN3Jw6E7UgO0hHqG/CVABKkAFqAAVoAJUgApQASpABagA/Q+OOz1/0Kyf2P41pMPuc5zLv0f12BxQ7/ICZfpVX2wOqKm7pIa6F9RQ94LafXWX1FBbg3VU1k9c4QX6f/TXAKWIxD8C+e4xAAAAAElFTkSuQmCC"},596:function(e,t){},5994:function(e,t,a){e.exports=a(6822)},5999:function(e,t,a){},6258:function(e,t,a){},6294:function(e,t){},6296:function(e,t){},6328:function(e,t){},6329:function(e,t){},6374:function(e,t){},6375:function(e,t){},6600:function(e,t,a){},6807:function(e,t,a){e.exports=a.p+"static/media/logo.dcef276d.png"},6822:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(32),o=a.n(i),l=(a(5999),a(20)),s=a(21),c=a(42),u=a(23),p=a(43),d=a(46),m=a(37),h=a(7),g=a.n(h),f=a(22),b=a(40),_=a(30),v=a(4),y=a.n(v),E=a(314),x=a.n(E),k=a(27),C=a.n(k),O=a(310),S=a.n(O),w=a(313),j=a.n(w),N=a(312),D=a.n(N),P=a(311),I=a.n(P),A=a(200),T=a.n(A),R=a(10),L=a.n(R),z=a(201),B=a.n(z),F=a(85),W=a.n(F),V=a(25),U=a.n(V),M=a(15),q=a(11),G=a.n(q),H={url:"https://delivery-backend-1.powermap.live",dlt:"https://dlt.powermap.live"},J=a(761),Y=a.n(J),Q=a(762),K=a.n(Q),X=a(763),Z=a.n(X),$=a(764),ee=a.n($),te=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getThumbnail=function(e){switch(e){case"Total Login/Drivings":return Z.a;case"Total POIs":return ee.a;case"Total Vehicles":return Y.a;case"Total Drivers":return K.a;default:return null}},a.createCard=function(e,t){var n=[];for(var i in e)"supplier"!==i&&n.push(r.a.createElement(L.a,{item:!0,key:i,sm:6,md:3,lg:3},r.a.createElement(S.a,{className:t.card},r.a.createElement(I.a,{className:t.cardMedia,image:a.getThumbnail(i),title:"Image title"}),r.a.createElement(D.a,{className:t.cardContent},r.a.createElement(U.a,{gutterBottom:!0,variant:"h1",component:"h2",align:"center"},e[i]),r.a.createElement(U.a,{align:"center"},i)),r.a.createElement(j.a,null,"Total Vehicles"===i?r.a.createElement(C.a,{size:"small",color:"primary",onClick:function(){return a.props.history.push("map")}},"View"):null,"Total Login/Drivings"===i?r.a.createElement(C.a,{size:"small",color:"primary",onClick:function(){window.open("https://dlt.powermap.live/login/".concat(e.supplier),"_blank")}},"View"):null))));return n},a.state={suppliers:[],loading:!1},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({loading:!0}),"undefined"!==localStorage.getItem("supplierID")&&"null"!==localStorage.getItem("supplierID")?G.a.get("".concat(H.url,"/suppliers?").concat("undefined"!==localStorage.getItem("supplierID")?"id="+localStorage.getItem("supplierID"):"")).then(function(e){return e.data.map(function(e){return Promise.all([e,G.a.get("".concat(H.url,"/vehicles/count?appid=").concat(e.appid)),G.a.get("".concat(H.url,"/pois/count?appid=").concat(e.appid)),G.a.get("".concat(H.url,"/drivers/count?appid=").concat(e.appid)),G.a.get("".concat(H.dlt,"/driverids/count?application_name=").concat(e.gpsgate_name,"&driving=true")),G.a.get("".concat(H.dlt,"/driverids/count?application_name=").concat(e.gpsgate_name,"&login_status=true"))]).then(function(e){return{"Total Vehicles":e[1].data,"Total POIs":e[2].data,"Total Drivers":e[3].data,"Total Login/Drivings":"".concat(e[5].data,"/").concat(e[4].data),supplier:e[0].abbr}})})}).then(function(t){t.map(function(t){return t.then(function(t){e.setState({suppliers:[].concat(Object(b.a)(e.state.suppliers),[t]),loading:!1})})})}):"undefined"!==localStorage.getItem("companyID")&&"null"!==localStorage.getItem("companyID")?G.a.get("".concat(H.url,"/companies?id=").concat(localStorage.getItem("companyID"))).then(function(e){return e.data[0].supplier.map(function(){var t=Object(f.a)(g.a.mark(function t(a){var n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.next=3,G.a.get("".concat(H.url,"/vehicles?company_name_contains=").concat(e.data[0].abbr)).then(function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.data.map(function(e){n.push(e.plate_no)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return t.abrupt("return",Promise.all([a,G.a.get("".concat(H.url,"/vehicles/count?appid=").concat(a.appid,"&company_name_contains=").concat(e.data[0].abbr)),G.a.get("".concat(H.url,"/pois/count?appid=").concat(a.appid,"&company_name_contains=").concat(e.data[0].abbr)),G.a.get("".concat(H.url,"/drivers/count?appid=").concat(a.appid)),G.a.get("".concat(H.dlt,"/driverids/count?application_name=").concat(a.gpsgate_name,"&driving=true")),G.a.get("".concat(H.dlt,"/driverids/count?application_name=").concat(a.gpsgate_name,"&login_status=true"))]).then(function(t){return"SNC"===e.data[0].abbr?{"Total Vehicles":t[1].data,"Total POIs":t[2].data}:{"Total Vehicles":t[1].data,"Total POIs":t[2].data,"Total Drivers":t[3].data,"Total Login/Drivings":"".concat(t[5].data,"/").concat(t[4].data),supplier:t[0].abbr}}));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}).then(function(t){t.map(function(t){return t.then(function(t){e.setState({suppliers:[].concat(Object(b.a)(e.state.suppliers),[t]),loading:!1})})})}):G.a.get("".concat(H.url,"/suppliers")).then(function(e){return e.data.map(function(e){return Promise.all([e,G.a.get("".concat(H.url,"/vehicles/count?appid=").concat(e.appid)),G.a.get("".concat(H.url,"/pois/count?appid=").concat(e.appid)),G.a.get("".concat(H.url,"/drivers/count?appid=").concat(e.appid)),G.a.get("".concat(H.dlt,"/driverids/count?application_name=").concat(e.gpsgate_name,"&driving=true")),G.a.get("".concat(H.dlt,"/driverids/count?application_name=").concat(e.gpsgate_name,"&login_status=true"))]).then(function(e){return{"Total Vehicles":e[1].data,"Total POIs":e[2].data,"Total Drivers":e[3].data,"Total Login/Drivings":"".concat(e[5].data,"/").concat(e[4].data),supplier:e[0].abbr}})})}).then(function(t){t.map(function(t){return t.then(function(t){e.setState({suppliers:[].concat(Object(b.a)(e.state.suppliers),[t]),loading:!1})})})})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.suppliers;return this.state.loading?r.a.createElement("div",null,r.a.createElement(W.a,null),r.a.createElement("br",null),r.a.createElement(W.a,{color:"secondary"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null),r.a.createElement("main",null,r.a.createElement("div",{className:t.heroUnit},r.a.createElement("div",{className:t.heroContent},r.a.createElement("div",{className:t.heroButtons},r.a.createElement(L.a,{container:!0,spacing:16,justify:"center"},r.a.createElement(L.a,{item:!0},"Administrator"!==localStorage.getItem("role")&&"supplier"!==localStorage.getItem("role")&&"purchaser"!==localStorage.getItem("role")?r.a.createElement(C.a,{variant:"contained",color:"primary",onClick:function(){return e.props.history.push("addinvoice")}},"Create order"):null),r.a.createElement(L.a,{item:!0},r.a.createElement(C.a,{variant:"outlined",color:"primary",onClick:function(){"Administrator"===localStorage.getItem("role")?e.props.history.push("invoicelistadmin"):e.props.history.push("invoicelist")}},"View Order List")))))),a.map(function(a){return r.a.createElement(r.a.Fragment,{key:a.supplier},r.a.createElement(x.a,{position:"static",color:"default"},r.a.createElement(B.a,null,r.a.createElement(U.a,{variant:"h6",color:"inherit",style:{margin:"auto"}},a.supplier))),r.a.createElement("div",{className:y()(t.layout,t.cardGrid)},r.a.createElement(L.a,{container:!0,spacing:40,style:{justifyContent:"center"}},e.createCard(a,t))))})))}}]),t}(n.Component),ae=Object(M.withStyles)(function(e){return{appBar:{position:"relative"},icon:{marginRight:2*e.spacing.unit},heroUnit:{backgroundColor:e.palette.background.paper},heroContent:{maxWidth:600,margin:"0 auto",padding:"".concat(3*e.spacing.unit,"px 0 ").concat(3*e.spacing.unit,"px")},heroButtons:{marginTop:4*e.spacing.unit},layout:Object(_.a)({width:"auto",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(1100+3*e.spacing.unit*2),{width:1100,marginLeft:"auto",marginRight:"auto"}),cardGrid:{padding:"".concat(8*e.spacing.unit,"px 0")},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%",backgroundSize:"70%",backgroundColor:"grey",margin:"auto",width:"100%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:6*e.spacing.unit}}})(te),ne=a(35),re=a(56),ie=a(33),oe=a.n(ie),le=a(315),se=a.n(le),ce=a(318),ue=a.n(ce),pe=a(316),de=a.n(pe),me=a(317),he=a.n(me),ge=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={expanded:null},a.handleChange=function(e){return function(t,n){a.setState({expanded:!!n&&e})}},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.title,n=e.heading,i=e.detail,o=e.onClick,l=this.state.expanded;return r.a.createElement(se.a,{expanded:"panel1"===l,onChange:this.handleChange("panel1"),onClick:o},r.a.createElement(de.a,{expandIcon:r.a.createElement(he.a,null)},r.a.createElement(U.a,{className:t.heading},a),r.a.createElement(U.a,{className:t.secondaryHeading},n)),r.a.createElement(ue.a,null,r.a.createElement(U.a,null,i)))}}]),t}(r.a.Component),fe=Object(M.withStyles)(function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary}}})(ge),be=a(121),_e=a(87),ve=a.n(_e),ye=a(36),Ee=a.n(ye),xe=a(24),ke=a.n(xe),Ce=a(88),Oe=a.n(Ce),Se=a(92),we=a.n(Se),je=a(68);function Ne(e){var t=e.inputRef,a=Object(d.a)(e,["inputRef"]);return r.a.createElement("div",Object.assign({ref:t},a))}var De={Control:function(e){return r.a.createElement(Ee.a,Object.assign({fullWidth:!0,variant:"outlined",InputProps:{inputComponent:Ne,inputProps:Object(ne.a)({className:e.selectProps.classes.input,inputRef:e.innerRef,children:e.children},e.innerProps)}},e.selectProps.textFieldProps))},Menu:function(e){return r.a.createElement(oe.a,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)},MultiValue:function(e){return r.a.createElement(ke.a,{tabIndex:-1,label:e.children,className:y()(e.selectProps.classes.chip,Object(_.a)({},e.selectProps.classes.chipFocused,e.isFocused)),onDelete:e.removeProps.onClick,deleteIcon:r.a.createElement(we.a,e.removeProps)})},NoOptionsMessage:function(e){return r.a.createElement(U.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return r.a.createElement(Oe.a,Object.assign({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps),e.children)},Placeholder:function(e){return r.a.createElement(U.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return r.a.createElement(U.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return r.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}},Pe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={single:null,multi:null},a.handleChange=function(e){return function(t){a.props.onUpdate(t),a.setState(Object(_.a)({},e,t))}},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.theme,n={input:function(e){return Object(ne.a)({},e,{color:a.palette.text.primary,"& input":{font:"inherit"},"& placeholder":{textOverflow:"ellipsis !important",color:"blue"}})}};return r.a.createElement("div",{className:t.root},r.a.createElement(ve.a,null,r.a.createElement(be.a,{classes:t,styles:n,textFieldProps:{InputLabelProps:{shrink:!0}},options:this.props.suggestions,components:De,value:this.state.multi,onChange:this.handleChange("multi"),placeholder:"Search Vehicles ...",isMulti:!0,clearable:!1})))}}]),t}(r.a.Component),Ie=Object(M.withStyles)(function(e){return{root:{flexGrow:1,height:"auto",backgroundColor:"grey"},input:{display:"flex",padding:2,backgroundColor:"white",margin:5,borderRadius:5},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:"".concat(e.spacing.unit/2,"px ").concat(e.spacing.unit/4,"px")},chipFocused:{backgroundColor:Object(je.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},singleValue:{fontSize:16},placeholder:{position:"relative",left:2,fontSize:14},paper:{position:"absolute",zIndex:1,marginTop:e.spacing.unit,left:0,right:0},divider:{height:2*e.spacing.unit}}},{withTheme:!0})(Pe),Ae=a(31),Te=new(a.n(Ae).a.Icon)({iconUrl:a(517),iconRetinaUrl:a(517),iconAnchor:[16,32],popupAnchor:[0,-32],shadowUrl:null,shadowSize:null,shadowAnchor:null,iconSize:[32,32],html:'<img \n    style="transform: rotate(80deg);"'}),Re=a(475),Le=a.n(Re),ze=a(758),Be=ze.Map,Fe=ze.TileLayer,We=(ze.Marker,ze.Popup),Ve=ze.LayerGroup,Ue=ze.LayersControl,Me={center:[13.820744,100.630938],zoom:10},qe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getData=function(){var e=Object(re.a)(Object(re.a)(a));if(a.state.sessionId){var t=[];G.a.post("".concat(H.url,"/vehicles/proxy"),{token:a.state.sessionId,companyId:localStorage.getItem("companyID"),supplierId:localStorage.getItem("supplierID")}).then(function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).then(function(){var e=Object(f.a)(g.a.mark(function e(n){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.data.map(function(){var e=Object(f.a)(g.a.mark(function e(n){var r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.company_name){e.next=6;break}return r=n.filter(function(e){return a.state.vehicle_list.includes(e.name)}),e.next=4,t.push.apply(t,Object(b.a)(r));case 4:e.next=8;break;case 6:return e.next=8,t.push.apply(t,Object(b.a)(n));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).then(function(t){return e.setState({data:t})})}else G.a.get("".concat(H.url,"/vehicles/proxylogin")).then(function(t){e.setState({sessionId:t.data.token})}).then(function(){var t=[];G.a.post("".concat(H.url,"/vehicles/proxy"),{token:e.state.sessionId,companyId:localStorage.getItem("companyID"),supplierId:localStorage.getItem("supplierID")}).then(function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).then(function(){var e=Object(f.a)(g.a.mark(function e(n){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.data.map(function(){var e=Object(f.a)(g.a.mark(function e(n){var r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.company_name){e.next=6;break}return r=n.filter(function(e){return a.state.vehicle_list.includes(e.name)}),e.next=4,t.push.apply(t,Object(b.a)(r));case 4:e.next=8;break;case 6:return e.next=8,t.push.apply(t,Object(b.a)(n));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).then(function(t){return e.setState({data:t})})});a.onUpdateFilter()},a.onUpdate=function(e){console.log(e);var t=e.map(function(e){return e.value}),n=a.state.data.filter(function(e){return t.includes(e.name)});a.setState({filterData:n,val:e})},a.onUpdateFilter=function(){var e=a.state.val.map(function(e){return e.value}),t=a.state.data.filter(function(t){return e.includes(t.name)});console.log(t),a.setState({filterData:t})},a.onViewportChanged=function(e){a.setState({viewport:e})},a.detail=function(e){return console.log(e),r.a.createElement("div",null,r.a.createElement(ke.a,{label:"Speed: "+e.velocity.groundSpeed.toFixed(2)+"KM/H",style:{backgroundColor:"#F0AD4E",color:"white"}}),r.a.createElement(ke.a,{label:"Connected: "+(e.valid?"\u2714\ufe0f":"\u274c"),style:{backgroundColor:"#5BC0DE",color:"white"}}),e.velocity.groundSpeed.toFixed(2)<5?r.a.createElement(ke.a,{label:"Parking",style:{backgroundColor:"#C90D0D",color:"white"}}):null)},a.state={lat:13.820744,lng:100.630938,zoom:10,sessionId:"",data:[],filterData:[],height:window.innerHeight-64-50,viewport:Me,val:[],company_name:null,vehicle_list:[]},a.updateWindowHeight=a.updateWindowHeight.bind(Object(re.a)(Object(re.a)(a))),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.updateWindowHeight(),this.getData(),window.addEventListener("resize",this.updateWindowHeight),this.interval=setInterval(function(){return e.getData()},15e3),localStorage.getItem("companyID")&&G.a.get("".concat(H.url,"/companies/").concat(localStorage.getItem("companyID"))).then(function(t){return e.setState({company_name:t.data.abbr})}).catch(function(e){return console.log(e)}).finally(function(){G.a.get("".concat(H.url,"/vehicles?company_name_contains=").concat(e.state.company_name)).then(function(){var t=Object(f.a)(g.a.mark(function t(a){var n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.next=3,a.data.map(function(e){n.push(e.plate_no)});case 3:e.setState({vehicle_list:n});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowHeight),clearInterval(this.interval)}},{key:"updateWindowHeight",value:function(){this.setState({height:window.innerHeight-64-50})}},{key:"renderMarker",value:function(){var e=[];return 0!==this.state.filterData.length?this.state.filterData.map(function(t,a){return e.push(r.a.createElement(Le.a,{key:a,position:[t.trackPoint.position.latitude,t.trackPoint.position.longitude],icon:Te,rotationAngle:t.trackPoint.velocity.heading,rotationOrigin:"center"},r.a.createElement(We,null,r.a.createElement("div",null,t.name," ","("+t.trackPoint.velocity.groundSpeed.toFixed(2)+" Km/h)"," ",r.a.createElement("br",null)," ",new Date(t.deviceActivity).toLocaleString("en-US"),"."))))}):this.state.data.map(function(t,a){return e.push(r.a.createElement(Le.a,{key:a,position:[t.trackPoint.position.latitude,t.trackPoint.position.longitude],icon:Te,rotationAngle:t.trackPoint.velocity.heading,rotationOrigin:"center"},r.a.createElement(We,null,r.a.createElement("div",null,t.name," ","("+t.trackPoint.velocity.groundSpeed.toFixed(2)+" Km/h)","  ",r.a.createElement("br",null)," ",new Date(t.deviceActivity).toLocaleString("en-US"),"."))))}),e}},{key:"render",value:function(){var e=this;console.log(this.state);var t=this.props.classes,a=this.state,n=a.data,i=a.filterData,o=this.state.data.map(function(e){return{value:e.name,label:e.name}}),l=[this.state.lat,this.state.lng];return r.a.createElement(L.a,{style:{height:"100%"},container:!0},r.a.createElement(L.a,{item:!0,xs:8,style:{height:"100%"}},r.a.createElement(Be,{center:l,zoom:this.state.zoom,onViewportChanged:this.onViewportChanged,viewport:this.state.viewport},r.a.createElement(Ue,{position:"topright"},r.a.createElement(Ue.BaseLayer,{name:"Powermap"},r.a.createElement(Fe,{attribution:'\xa9 <a href="https://powermap.in.th">Powermap</a>',url:"http://search.map.powermap.in.th/api/v2/map/vtile/thailand_th/{z}/{x}/{y}.png?access_token=b378c575291af30a29f59919fd7e7e4c012d45c4"})),r.a.createElement(Ue.BaseLayer,{checked:!0,name:"Satellite"},r.a.createElement(Fe,{url:"http://mt0.google.com/vt/lyrs=y&hl=th&x={x}&y={y}&z={z}"}))),r.a.createElement(Ve,null,this.renderMarker()))),r.a.createElement(L.a,{item:!0,xs:4,style:{height:"100%"}},r.a.createElement(Ie,{suggestions:o,onUpdate:this.onUpdate}),r.a.createElement(oe.a,{className:t.paper,style:{height:this.state.height}},0!==n.length?0!==i.length?i.map(function(t,a){return r.a.createElement(fe,{key:a,title:"".concat(t.name),heading:new Date(t.deviceActivity).toLocaleString("en-US"),detail:e.detail(t.trackPoint),onClick:function(){return e.setState({viewport:Object(ne.a)({},e.state.viewport,{center:[t.trackPoint.position.latitude,t.trackPoint.position.longitude],zoom:17})})}})}):n.map(function(t,a){return r.a.createElement(fe,{key:a,title:"".concat(t.name),heading:new Date(t.deviceActivity).toLocaleString("en-US"),detail:e.detail(t.trackPoint),onClick:function(){return e.setState({viewport:Object(ne.a)({},e.state.viewport,{center:[t.trackPoint.position.latitude,t.trackPoint.position.longitude],zoom:17})})}})}):r.a.createElement(W.a,null))))}}]),t}(r.a.Component),Ge=Object(M.withStyles)(function(e){return{root:{flexGrow:1},paper:{width:"100%",overflowY:"scroll",backgroundColor:"grey"}}})(qe),He=a(2),Je=a(53),Ye=a.n(Je),Qe=a(65),Ke=a.n(Qe),Xe=a(58),Ze=a.n(Xe),$e=a(60),et=a.n($e),tt=a(62),at=a.n(tt),nt=a(63),rt=a.n(nt),it=a(64),ot=a.n(it),lt=a(61),st=a.n(lt),ct=a(70),ut=a.n(ct),pt=a(71),dt=a.n(pt),mt={success:et.a,warning:st.a,error:at.a,info:rt.a};var ht=Object(M.withStyles)(function(e){return{success:{backgroundColor:ut.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:dt.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,i=e.onClose,o=e.variant,l=Object(d.a)(e,["classes","className","message","onClose","variant"]),s=mt[o];return r.a.createElement(Ze.a,Object.assign({className:y()(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(s,{className:y()(t.icon,t.iconVariant)}),n),action:[r.a.createElement(Ye.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},r.a.createElement(ot.a,{className:t.icon}))]},l))});function gt(e){var t=e.inputRef,a=Object(d.a)(e,["inputRef"]);return r.a.createElement("div",Object.assign({ref:t},a))}var ft={Control:function(e){return r.a.createElement(Ee.a,Object.assign({fullWidth:!0,InputProps:{inputComponent:gt,inputProps:Object(ne.a)({className:e.selectProps.classes.input,inputRef:e.innerRef,children:e.children},e.innerProps)}},e.selectProps.textFieldProps))},Menu:function(e){return r.a.createElement(oe.a,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)},MultiValue:function(e){return r.a.createElement(ke.a,{tabIndex:-1,label:e.children,className:y()(e.selectProps.classes.chip,Object(_.a)({},e.selectProps.classes.chipFocused,e.isFocused)),onDelete:e.removeProps.onClick,deleteIcon:r.a.createElement(we.a,e.removeProps)})},NoOptionsMessage:function(e){return r.a.createElement(U.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return r.a.createElement(Oe.a,Object.assign({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps),e.children)},Placeholder:function(e){return r.a.createElement(U.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return r.a.createElement(U.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return r.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}},bt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={single:null,multi:null},a.handleChange=function(e){return function(t){return a.props.vehicle&&(a.props.onUpdate([t,a.state.single]),a.setState(Object(_.a)({},e,t))),t.value===a.props.origin?(a.setState({alert:"Origin & destination \u0e15\u0e49\u0e2d\u0e07\u0e44\u0e21\u0e48\u0e40\u0e2b\u0e21\u0e37\u0e2d\u0e19\u0e01\u0e31\u0e19",snackbar_open:!0}),null):a.props.destination.includes(t.value)?(a.setState({alert:"Destination \u0e15\u0e49\u0e2d\u0e07\u0e44\u0e21\u0e48\u0e40\u0e2b\u0e21\u0e37\u0e2d\u0e19\u0e01\u0e31\u0e19",snackbar_open:!0}),null):a.props.vehicle||a.props.plate_no?(a.props.onUpdate([t,a.state.single,a.props.index]),void a.setState(Object(_.a)({},e,t))):(a.setState({alert:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e22\u0e32\u0e19\u0e1e\u0e32\u0e2b\u0e19\u0e30\u0e01\u0e48\u0e2d\u0e19",snackbar_open:!0}),null)}},a.handleSnackbarClose=function(e,t){"clickaway"!==t&&a.setState({snackbar_open:!1})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.theme,n={input:function(e){return Object(ne.a)({},e,{color:a.palette.text.primary,"& input":{font:"inherit"}})}};return r.a.createElement("div",{className:t.root},r.a.createElement(Ke.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.snackbar_open,autoHideDuration:6e3,onClose:this.handleSnackbarClose},r.a.createElement(ht,{onClose:this.handleSnackbarClose,variant:"error",message:this.state.alert})),r.a.createElement(ve.a,null,r.a.createElement(be.a,{classes:t,styles:n,options:this.props.suggestions,components:ft,value:this.state.single,onChange:this.handleChange("single"),placeholder:"Search...",clearable:!1})))}}]),t}(r.a.Component),_t=Object(M.withStyles)(function(e){return{root:{flexGrow:1,height:"auto"},input:{display:"flex",padding:0},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:"".concat(e.spacing.unit/2,"px ").concat(e.spacing.unit/4,"px")},chipFocused:{backgroundColor:Object(je.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,fontSize:14,paddingLeft:5},paper:{position:"absolute",zIndex:10,marginTop:e.spacing.unit,left:0,right:0},divider:{height:2*e.spacing.unit}}},{withTheme:!0})(bt),vt=a(108),yt=a.n(vt),Et=a(77),xt=a.n(Et),kt=a(109),Ct=a.n(kt),Ot=a(171),St=a.n(Ot),wt=a(155),jt=a.n(wt),Nt=a(120),Dt=a.n(Nt),Pt=a(69),It=a.n(Pt),At=a(83),Tt=a.n(At),Rt=a(82),Lt=a.n(Rt),zt=a(76),Bt=a.n(zt),Ft=a(129),Wt=a.n(Ft),Vt=a(136),Ut=a.n(Vt),Mt=a(137),qt=a.n(Mt),Gt=a(28),Ht=a.n(Gt),Jt=a(48),Yt=a.n(Jt),Qt=a(98),Kt=a.n(Qt),Xt=a(99),Zt=a.n(Xt),$t=a(100),ea=a.n($t),ta=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){console.log(this.props);var e=this.props.classes,t=this.props.origin?[this.props.origin].concat(Object(b.a)(this.props.destination)):[];return r.a.createElement("div",{className:e.root},r.a.createElement(Kt.a,{alternativeLabel:!0},t.map(function(e){return r.a.createElement(Zt.a,{key:e},r.a.createElement(ea.a,null,e))})))}}]),t}(r.a.Component),aa=Object(M.withStyles)(function(e){return{root:{width:"90%"},backButton:{marginRight:e.spacing.unit},instructions:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit}}})(ta),na=a(9),ra=a.n(na),ia={success:et.a,warning:st.a,error:at.a,info:rt.a};var oa=Object(M.withStyles)(function(e){return{success:{backgroundColor:ut.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:dt.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,i=e.onClose,o=e.variant,l=Object(d.a)(e,["classes","className","message","onClose","variant"]),s=ia[o];return r.a.createElement(Ze.a,Object.assign({className:y()(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(s,{className:y()(t.icon,t.iconVariant)}),n),action:[r.a.createElement(Ye.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},r.a.createElement(ot.a,{className:t.icon}))]},l))});function la(e){return r.a.createElement(Wt.a,Object.assign({direction:"up"},e))}var sa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1}),a.props.onUpdateState(!1)},a.handleSubmit=function(e){a.setState({open:!1}),a.props.onUpdateState(!1),G.a.post("".concat(H.url,"/orders"),e).then(function(e){console.log(e),a.setState({snackbar_open:!0}),a.props.history.push("invoicelist")})},a.handleSnackbarClose=function(e,t){"clickaway"!==t&&a.setState({snackbar_open:!1})},a.state={snackbar_open:!1},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;console.log(this.props);var t=this.props.classes;return r.a.createElement("div",null,r.a.createElement(Ke.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.snackbar_open,autoHideDuration:6e3,onClose:this.handleSnackbarClose},r.a.createElement(oa,{onClose:this.handleSnackbarClose,variant:"success",message:"Operation successful!"})),r.a.createElement(It.a,{fullWidth:!0,maxWidth:"md",open:this.props.open,TransitionComponent:la,keepMounted:!0,onClose:this.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(Bt.a,{id:"alert-dialog-slide-title",style:{margin:"auto"}},"Please verified before confirm order?"),r.a.createElement(He.e,null),r.a.createElement(Lt.a,null,r.a.createElement(Ut.a,{className:t.table},r.a.createElement(qt.a,null,r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Date")),r.a.createElement(Ht.a,null,this.props.data.created_date?new ra.a(this.props.data.created_date).add(0,"hours").toDate().toLocaleString():"")),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Invoice")),r.a.createElement(Ht.a,null,this.props.data.invoice_no)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Transporter")),r.a.createElement(Ht.a,null,this.props.data.supplier)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Vehicle")),r.a.createElement(Ht.a,null,this.props.data.plate_no)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Product")),r.a.createElement(Ht.a,null,0!==Object.keys(this.props.data).length?this.props.data.products.split("|").map(function(t){return"Pallet"===t?r.a.createElement(ke.a,{label:"Pallet [".concat(e.props.data.num_pallet,"]"),key:t,color:"primary"}):"Rack"===t?r.a.createElement(ke.a,{label:"Rack [".concat(e.props.data.num_rack,"]"),key:t,color:"primary"}):"Dies"===t?r.a.createElement(ke.a,{label:"Dies [".concat(e.props.data.num_die,"]"),key:t,color:"primary"}):"Box"===t?r.a.createElement(ke.a,{label:"Box [".concat(e.props.data.num_box,"]"),key:t,color:"primary"}):r.a.createElement(ke.a,{label:t,key:t,color:"primary"})}):null)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Note")),r.a.createElement(Ht.a,null,this.props.data.note)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Return")),r.a.createElement(Ht.a,null,this.props.data.will_return?r.a.createElement(ke.a,{label:"True",color:"primary"}):r.a.createElement(ke.a,{label:"False"}))),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"\u0e04\u0e49\u0e32\u0e07\u0e04\u0e37\u0e19*")),r.a.createElement(Ht.a,null,this.props.data.over_night?r.a.createElement(ke.a,{label:"True",color:"primary"}):r.a.createElement(ke.a,{label:"False"}))))),r.a.createElement(aa,{origin:0!==Object.keys(this.props.data).length?this.props.data.origin:"",destination:0!==Object.keys(this.props.data).length?this.props.data.destination.split("|"):[]})),r.a.createElement(He.e,null),r.a.createElement(Tt.a,null,r.a.createElement(C.a,{onClick:this.handleClose,variant:"contained",color:"secondary"},"Cancel"),r.a.createElement(C.a,{onClick:function(){return e.handleSubmit(e.props.data)},variant:"contained",color:"primary"},"Confirm"))))}}]),t}(r.a.Component),ca=Object(M.withStyles)(function(e){return{root:{minWidth:"700px",maxWidth:"100%",marginTop:3*e.spacing.unit,overflowX:"auto",borderBottom:"1px solid ".concat(e.palette.divider)},tableHead:{backgroundColor:"green"}}})(sa),ua={success:et.a,warning:st.a,error:at.a,info:rt.a};var pa=Object(M.withStyles)(function(e){return{success:{backgroundColor:ut.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:dt.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,i=e.onClose,o=e.variant,l=Object(d.a)(e,["classes","className","message","onClose","variant"]),s=ua[o];return r.a.createElement(Ze.a,Object.assign({className:y()(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(s,{className:y()(t.icon,t.iconVariant)}),n),action:[r.a.createElement(He.i,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},r.a.createElement(ot.a,{className:t.icon}))]},l))}),da=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){return function(t){"onOverNight"===e&&a.setState({delivered_date:(new ra.a).add(1,"days").toDate().toISOString().slice(0,10)}),a.setState(Object(_.a)({},e,t.target.checked),a.getDeliverCost)}},a.handleChangeName=function(e){"delivered_date"===e.target.name?new ra.a(e.target.value)<new ra.a?a.setState({alert:"\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e15\u0e31\u0e49\u0e07\u0e04\u0e48\u0e32\u0e01\u0e48\u0e2d\u0e19\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e23\u0e49\u0e32\u0e07\u0e43\u0e1a\u0e2a\u0e48\u0e07\u0e02\u0e2d\u0e07",snackbar_open:!0,delivered_date:(new ra.a).add(1,"days").toDate().toISOString().slice(0,10)}):ra()(e.target.value).isValid()?a.setState({delivered_date:e.target.value}):a.setState({alert:"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e07\u0e1c\u0e25\u0e34\u0e15\u0e20\u0e31\u0e13\u0e11\u0e4c\u0e44\u0e21\u0e48\u0e16\u0e39\u0e01\u0e15\u0e49\u0e2d\u0e07",snackbar_open:!0,delivered_date:a.state.delivered_date}):a.setState(Object(_.a)({},e.target.name,e.target.value))},a.onUpdateProps=function(e){a.setState({showDialog:e})},a.pad_array=function(e,t,a){return e.concat(Array(t).fill(a)).slice(0,t)},a.onUpdate=function(e,t){var n=Object(re.a)(Object(re.a)(a));if(e[0].origin&&a.setState({origin:e[0].value},a.getDeliverCost),e[0].destination&&(console.log(a.state),a.setState(function(t){return{destination:t.destination.map(function(t,a){return a===e[2]&&(t=e[0].value),t})}},a.getDeliverCost)),e[0].vehicle){var r=a.state.pois.filter(function(t){return t.appid===e[0].appid});a.setState({vehicle:e[0].value,car_type:e[0].type,pois:r},a.getDeliverCost),G.a.get("".concat(H.url,"/suppliers?appid=").concat(e[0].appid)).then(function(e){n.setState({supplier:e.data[0].name})}),G.a.get("".concat(H.url,"/orders/count?plate_no=").concat(e[0].value,"&created_date_gt=").concat((new Date).toISOString().slice(0,10),"&company_id=").concat(localStorage.getItem("companyID"))).then(function(e){a.setState({trip_no:e.data+1})})}},a.getDeliverCost=function(){var e=Object(re.a)(Object(re.a)(a)),t=a.state,n=t.destination,r=t.origin,i=t.supplier,o=t.company_name,l=t.onOvertime,s=t.onReturn,c=t.car_type;console.log(o,r,n,i);var u="".concat(o,"-").concat(i,"-").concat(c.toUpperCase().replace("-"," "),"-").concat(r,"-").concat(a.pad_array(n.filter(function(e){return e}),7,"").join("-"),"-").concat(s?"Return-":"-").concat(l?"Overtime":"");console.log(u),G.a.get("".concat(H.url,"/deliveryfees?Transportation Description=").concat(u)).then(function(t){console.log(t),0!==t.data.length?e.setState({price:t.data[0].Price}):e.setState({price:""})}).catch(function(e){console.log(e)})},a.handleSnackbarClose=function(e,t){"clickaway"!==t&&a.setState({snackbar_open:!1})},a.state={alert:"",onReturn:!1,onOvertime:!1,onOverNight:!1,pallet:!0,rack:!1,dies:!1,box:!1,product_note:"",seal_no:"",vehicle:"",origin:"",destination:[null],issuer_name:"",origin_geo_in:"0",origin_geo_out:"0",dest_geo_in:"",dest_geo_out:"",car_type:"",price:"",note:"",job_no:"",invoice_no:"",supplier:"",delivered_date:"",submitData:{},num_pallet:"",num_die:"",num_rack:"",num_box:"",department:"PC",delivery_type:"normal",department_note:"",loading:!0,multiline:"",company_logo:"",company_name:"",suppliers:"",pois:[],vehicles:[],inputLinkClicked:[1],showDialog:!1,trip_no:"",process:"later",order_type:"local"},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(){var e=[];if(this.state.pallet&&e.push("Pallet"),this.state.rack&&e.push("Rack"),this.state.dies&&e.push("Dies"),this.state.box&&e.push("Box"),this.state.product_note&&e.push.apply(e,Object(b.a)(this.state.product_note.split(","))),this.state.vehicle)if(0===e.length)this.setState({alert:"\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e01\u0e23\u0e2d\u0e01\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32",snackbar_open:!0});else if(""===this.state.invoice_no)this.setState({alert:"\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e01\u0e23\u0e2d\u0e01 Invoice Number",snackbar_open:!0});else if(this.state.origin)if(0===this.state.destination.length||this.state.destination.includes(null))this.setState({alert:"\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e01\u0e23\u0e2d\u0e01 destination of delivery",snackbar_open:!0});else if(this.state.destination.includes(this.state.origin))this.setState({alert:"Origin and destination \u0e15\u0e49\u0e2d\u0e07\u0e44\u0e21\u0e48\u0e40\u0e2b\u0e21\u0e37\u0e2d\u0e19\u0e01\u0e31\u0e19",snackbar_open:!0});else{var t=this.state,a=t.job_no,n=t.invoice_no,r=t.supplier,i=t.vehicle,o=t.origin,l=t.destination,s=t.onReturn,c=t.onOverNight,u=t.onOvertime,p=t.seal_no,d=t.car_type,m=t.note,h=t.price,g=t.issuer_name,f=t.delivered_date,_=t.company_logo,v=t.company_name,y=t.department,E=t.department_note,x=t.delivery_type,k=t.num_box,C=t.num_die,O=t.num_pallet,S=t.num_rack,w=t.trip_no,j=t.process,N=t.order_type,D=Array(l.length).fill(0).join("|"),P=D,I={job_no:a,invoice_no:n,supplier:r,plate_no:i,origin:o,destination:l.join("|"),will_return:s,over_night:c,over_time:u,seal_no:p,car_type:d,note:m,price:h,issuer:g,created_date:(new ra.a).add(0,"hours").toDate(),updated_date:(new ra.a).add(0,"hours").toDate(),products:e.join("|"),delivered_date:f,status:"new",company_id:localStorage.getItem("companyID"),company_logo:_,company_name:v,department:"".concat(y).concat(""!==E?":"+E:""),delivery_type:x,num_box:k,num_die:C,num_pallet:O,num_rack:S,dest_geo_in:D,dest_geo_out:P,trip_no:w,process:j,order_type:N};this.setState({showDialog:!0,submitData:I})}else this.setState({alert:"\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e01\u0e23\u0e2d\u0e01 origin of delivery",snackbar_open:!0});else this.setState({alert:"\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e01\u0e23\u0e2d\u0e01 Plate Number",snackbar_open:!0})}},{key:"componentWillMount",value:function(){var e=this,t=this,a=G.a.get("".concat(H.url,"/companies/").concat(localStorage.getItem("companyID")));this.setState({issuer_name:localStorage.getItem("username")}),Promise.all([a]).then(function(e){t.setState({loading:!1,company_logo:e[0].data.logo,company_name:e[0].data.name,company_abbr:e[0].data.abbr,suppliers:e[0].data.supplier})}).catch(function(e){console.log(e.message),t.setState({loading:!1})}).then(Object(f.a)(g.a.mark(function t(){var a,n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.suppliers.map(function(t,a){return G.a.get("".concat(H.url,"/vehicles?appid=").concat(t.appid,"&company_name_contains=").concat(e.state.company_abbr,"&_sort=plate_no:ASC&_limit=1000"),{})}),n=e.state.suppliers.map(function(t,a){return G.a.get("".concat(H.url,"/pois?appid=").concat(t.appid,"&_sort=name:ASC&_limit=1000&company_name=").concat(e.state.company_abbr),{})}),t.next=4,Promise.all([Promise.all([a,n]).then(function(e){return e})]).then(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a[0][0].map(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a.then(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({vehicles:[].concat(Object(b.a)(e.state.vehicles),Object(b.a)(a.data))});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 2:return t.next=4,a[0][1].map(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a.then(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({pois:[].concat(Object(b.a)(e.state.pois),Object(b.a)(a.data))});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}},t)}))).then(function(){G.a.get("".concat(H.url,"/orders?_sort=job_no:DESC&_limit=1&company_id=").concat(localStorage.getItem("companyID"))).then(function(a){0!==a.data.length?t.setState({job_no:e.pad(parseInt(a.data[0].job_no)+1,5)}):t.setState({job_no:"00001"})})})}},{key:"pad",value:function(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}},{key:"handleAddInput",value:function(){this.setState({inputLinkClicked:[].concat(Object(b.a)(this.state.inputLinkClicked),[1]),destination:[].concat(Object(b.a)(this.state.destination),[null])}),console.log(this.state)}},{key:"handleDeleteInput",value:function(e){this.setState({inputLinkClicked:this.state.inputLinkClicked.filter(function(t,a){return a!==e}),destination:this.state.destination.filter(function(t,a){return a!==e})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.company_logo,n=t.company_name,i=t.issuer_name;console.log(this.state);var o=this.props.classes;if(this.state.loading)return r.a.createElement("div",null,r.a.createElement(He.j,null),r.a.createElement("br",null),r.a.createElement(He.j,{color:"secondary"}));if("APB"===this.state.company_abbr)return r.a.createElement(Ia,{history:this.props.history});var l=this.state.vehicles.map(function(e){return{value:e.plate_no,label:e.plate_no,type:e.vehicle_type,appid:e.appid,vehicle:!0}}),s=this.state.pois.map(function(e){return{value:e.name,label:e.name,origin:!0}}),c=this.state.pois.map(function(e){return{value:e.name,label:e.name,destination:!0}}),u=function(e){return Object(b.a)(new Set(e.map(function(e){return JSON.stringify(e)}))).map(function(e){return JSON.parse(e)})},p=u(s),d=u(c);return r.a.createElement("div",{style:{paddingTop:"20px"}},r.a.createElement(Ke.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.snackbar_open,autoHideDuration:6e3,onClose:this.handleSnackbarClose},r.a.createElement(pa,{onClose:this.handleSnackbarClose,variant:"error",message:this.state.alert})),r.a.createElement(ca,{open:this.state.showDialog,onUpdateState:this.onUpdateProps,data:this.state.submitData,history:this.props.history}),r.a.createElement(He.k,{className:o.container},r.a.createElement(He.h,{container:!0},r.a.createElement(He.h,{item:!0,xs:8,className:o.box,style:{textAlign:"center"}},r.a.createElement("img",{src:a,alt:"no logo found",width:"75px",style:{float:"left"}}),r.a.createElement("b",null,n)),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},"Job no. | \u0e43\u0e1a\u0e07\u0e32\u0e19\u0e17\u0e35\u0e48: ",this.state.job_no),r.a.createElement(He.h,{item:!0,xs:8,className:o.box},"Transporter | \u0e02\u0e19\u0e2a\u0e48\u0e07: ",this.state.supplier),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},"Date | \u0e27\u0e31\u0e19\u0e17\u0e35\u0e48: ",(new Date).toLocaleString()),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},r.a.createElement(He.o,{id:"outlined-email-input",label:"Invoice No. | \u0e43\u0e1a\u0e2a\u0e48\u0e07\u0e02\u0e2d\u0e07 \u0e40\u0e25\u0e02\u0e17\u0e35\u0e48.",onChange:this.handleChangeName,className:o.textField,InputLabelProps:{shrink:!0,name:"invoice_no"},type:"text",name:"invoice_no",margin:"normal",variant:"outlined",fullWidth:!0})),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},r.a.createElement(He.h,{container:!0},r.a.createElement(He.h,{item:!0,xs:4},"Car Plate* | \u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e23\u0e16:"),r.a.createElement(He.h,{item:!0,xs:8},r.a.createElement(_t,{suggestions:l,vehicle:!0,onUpdate:this.onUpdate,origin:this.state.origin?this.state.origin:"",destination:this.state.destination?this.state.destination:[]})))),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},"No. of trip | \u0e40\u0e17\u0e35\u0e48\u0e22\u0e27\u0e17\u0e35\u0e48: ",this.state.trip_no),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},r.a.createElement(He.h,{container:!0},r.a.createElement(He.h,{item:!0,xs:4},"Origin | \u0e08\u0e38\u0e14\u0e40\u0e23\u0e34\u0e48\u0e21\u0e15\u0e49\u0e19*"),r.a.createElement(He.h,{item:!0,xs:8},r.a.createElement(_t,{suggestions:p,plate_no:this.state.vehicle,onUpdate:this.onUpdate,origin:this.state.origin?this.state.origin:"",destination:this.state.destination?this.state.destination:[]})),r.a.createElement(He.h,{container:!0,style:{marginTop:"12px"}},r.a.createElement(He.h,{item:!0,xs:6},"Time in | \u0e40\u0e27\u0e25\u0e32\u0e40\u0e02\u0e49\u0e32: "),r.a.createElement(He.h,{item:!0,xs:6},"Time out | \u0e40\u0e27\u0e25\u0e32\u0e2d\u0e2d\u0e01:   ")))),r.a.createElement(He.h,{item:!0,xs:8,className:o.box},this.state.inputLinkClicked.map(function(t,a){return r.a.createElement(He.h,{container:!0,key:a},0===a?r.a.createElement(He.h,{item:!0,xs:4},"Destination | \u0e1b\u0e25\u0e32\u0e22\u0e17\u0e32\u0e07*"):r.a.createElement(He.h,{item:!0,xs:4}),r.a.createElement(He.h,{item:!0,xs:5},r.a.createElement(_t,{key:a,suggestions:d,plate_no:e.state.vehicle,onUpdate:e.onUpdate,origin:e.state.origin?e.state.origin:"",destination:e.state.destination?e.state.destination:[],defaultValue:{value:e.state.destination[a],label:e.state.destination[a],destination:!0},index:a})),r.a.createElement(He.h,{item:!0,xs:3},0===a&&e.state.inputLinkClicked.length<7?r.a.createElement(He.i,{variant:"contained",color:"secondary",className:o.button,style:{float:"right"},onClick:function(){return e.handleAddInput()}},r.a.createElement(yt.a,null)):null,0!==a&&e.state.inputLinkClicked.length>1?r.a.createElement(He.i,{variant:"contained",color:"secondary",className:o.button,style:{float:"right"},onClick:function(){return e.handleDeleteInput(a)}},r.a.createElement(xt.a,null)):null),0===a?r.a.createElement(He.h,{container:!0},r.a.createElement(He.h,{item:!0,xs:6},"Time in | \u0e40\u0e27\u0e25\u0e32\u0e40\u0e02\u0e49\u0e32:   "),r.a.createElement(He.h,{item:!0,xs:6},"Time out | \u0e40\u0e27\u0e25\u0e32\u0e2d\u0e2d\u0e01:   ")):r.a.createElement(He.h,{container:!0,style:{marginTop:"12px"}},r.a.createElement(He.h,{item:!0,xs:6},"Time in | \u0e40\u0e27\u0e25\u0e32\u0e40\u0e02\u0e49\u0e32:  "),r.a.createElement(He.h,{item:!0,xs:6},"Time out | \u0e40\u0e27\u0e25\u0e32\u0e2d\u0e2d\u0e01:  ")))})),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},r.a.createElement(He.f,{control:r.a.createElement(He.n,{checked:this.state.onReturn,onChange:this.handleChange("onReturn"),value:this.state.onReturn}),label:this.state.onReturn?"Return* | \u0e23\u0e31\u0e1a\u0e01\u0e25\u0e31\u0e1a":"No return | \u0e44\u0e21\u0e48\u0e23\u0e31\u0e1a\u0e01\u0e25\u0e31\u0e1a"})),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},r.a.createElement(He.f,{control:r.a.createElement(He.n,{checked:this.state.onOvertime,onChange:this.handleChange("onOvertime"),value:this.state.onOvertime}),label:this.state.onOvertime?"Overtime* | \u0e25\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32":"No overtime | \u0e44\u0e21\u0e48\u0e25\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32"})),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},r.a.createElement(He.f,{control:r.a.createElement(He.n,{checked:this.state.onOverNight,onChange:this.handleChange("onOverNight"),value:this.state.onOverNight}),label:this.state.onOverNight?"Over Night | \u0e04\u0e49\u0e32\u0e07\u0e04\u0e37\u0e19*":"No over night | \u0e44\u0e21\u0e48\u0e04\u0e49\u0e32\u0e07\u0e04\u0e37\u0e19"}),this.state.onOverNight?r.a.createElement(He.o,{id:"date",label:"Delivered date",type:"date",value:this.state.delivered_date,fullWidth:!0,onChange:this.handleChangeName,className:y.a.tel,name:"delivered_date",InputLabelProps:{shrink:!0}}):null),r.a.createElement(He.h,{item:!0,xs:6,className:o.box},"Product* | \u0e1c\u0e25\u0e34\u0e15\u0e20\u0e31\u0e13\u0e11\u0e4c:",r.a.createElement(He.g,{style:{flexDirection:"row"}},r.a.createElement(He.f,{control:r.a.createElement(He.d,{checked:this.state.pallet,onChange:this.handleChange("pallet"),value:"pallet"}),label:"Pallet"}),this.state.pallet?r.a.createElement(He.o,{id:"num_pallet",label:"\u0e08\u0e33\u0e19\u0e27\u0e19\u0e02\u0e2d\u0e07",type:"text",defaultValue:this.state.num_pallet,onChange:this.handleChangeName,className:o.textField_number,InputLabelProps:{shrink:!0,style:{zIndex:0}},name:"num_pallet",variant:"outlined"}):null,r.a.createElement(He.f,{control:r.a.createElement(He.d,{checked:this.state.rack,onChange:this.handleChange("rack"),value:"rack"}),label:"Rack"}),this.state.rack?r.a.createElement(He.o,{id:"num_rack",label:"\u0e08\u0e33\u0e19\u0e27\u0e19\u0e02\u0e2d\u0e07",type:"text",defaultValue:this.state.num_rack,onChange:this.handleChangeName,className:o.textField_number,InputLabelProps:{shrink:!0},name:"num_rack",variant:"outlined"}):null,r.a.createElement(He.f,{control:r.a.createElement(He.d,{checked:this.state.dies,onChange:this.handleChange("dies"),value:"dies"}),label:"Dies"}),this.state.dies?r.a.createElement(He.o,{id:"num_die",label:"\u0e08\u0e33\u0e19\u0e27\u0e19\u0e02\u0e2d\u0e07",type:"text",defaultValue:this.state.num_die,onChange:this.handleChangeName,className:o.textField_number,InputLabelProps:{shrink:!0},name:"num_die",variant:"outlined"}):null,r.a.createElement(He.f,{control:r.a.createElement(He.d,{checked:this.state.box,onChange:this.handleChange("box"),value:"box"}),label:"Box"}),this.state.box?r.a.createElement(He.o,{id:"num_box",label:"\u0e08\u0e33\u0e19\u0e27\u0e19\u0e02\u0e2d\u0e07",type:"text",defaultValue:this.state.num_box,onChange:this.handleChangeName,className:o.textField_number,InputLabelProps:{shrink:!0},name:"num_box",variant:"outlined"}):null),r.a.createElement(He.o,{id:"outlined-product-note-input",label:"\u0e2d\u0e37\u0e48\u0e19\u0e46: ",className:o.textField,value:this.state.product_note,onChange:this.handleChangeName,inputProps:{name:"product_note"},InputLabelProps:{shrink:!0},name:"product_note",margin:"normal",variant:"outlined",fullWidth:!0,multiline:!0,rowsMax:"10"})),r.a.createElement(He.h,{item:!0,xs:6,container:!0,className:o.box},"Seal Number: ",r.a.createElement("br",null),r.a.createElement(He.o,{id:"outlined-multiline-flexible",label:"\u0e40\u0e25\u0e02\u0e2a\u0e32\u0e22\u0e23\u0e31\u0e14",multiline:!0,rowsMax:"10",value:this.state.seal_no,onChange:this.handleChangeName,inputProps:{name:"seal_no"},InputLabelProps:{shrink:!0},className:o.textField,margin:"normal",helperText:"Maximum of 100 character",variant:"outlined",fullWidth:!0}),r.a.createElement("br",null),"Able Sanoh industries (1996) co. ltd"===this.state.company_name?r.a.createElement(Dt.a,{component:"fieldset",className:o.formControl,variant:"outlined"},r.a.createElement(jt.a,{component:"legend"},r.a.createElement(U.a,null," Department* | \u0e41\u0e1c\u0e19\u0e01: ")),r.a.createElement(St.a,{"aria-label":"department",name:"department",className:o.group,value:this.state.department,onChange:this.handleChangeName,row:!0},r.a.createElement(He.f,{value:"PC",control:r.a.createElement(Ct.a,null),label:"PC"}),r.a.createElement(He.f,{value:"Warehouse",control:r.a.createElement(Ct.a,null),label:"Warehouse"}),r.a.createElement(He.f,{value:"Others",control:r.a.createElement(Ct.a,null),label:"Others"}),"Others"===this.state.department?r.a.createElement(He.o,{id:"outlined-multiline-flexible",label:"others",multiline:!0,rowsMax:"10",value:this.state.department_note,onChange:this.handleChangeName,inputProps:{name:"department_note"},name:"department_note",className:o.textField,margin:"normal",helperText:"Maximum of 50 character",variant:"outlined",fullWidth:!0}):null)):null,"Able Sanoh industries (1996) co. ltd"===this.state.company_name?r.a.createElement(Dt.a,{component:"fieldset",className:o.formControl},r.a.createElement(jt.a,{component:"legend"},r.a.createElement(U.a,null,"Delivery Type* | \u0e23\u0e39\u0e1b\u0e41\u0e1a\u0e1a\u0e01\u0e32\u0e23\u0e02\u0e19\u0e2a\u0e48\u0e07: ")),r.a.createElement(St.a,{"aria-label":"department",name:"delivery_type",className:o.group,value:this.state.delivery_type,onChange:this.handleChangeName,row:!0},r.a.createElement(He.f,{value:"normal",control:r.a.createElement(Ct.a,null),label:"Normal"}),r.a.createElement(He.f,{value:"special",control:r.a.createElement(Ct.a,null),label:"Special"}))):null),r.a.createElement(He.h,{item:!0,xs:6,className:o.box},"Type of car | \u0e0a\u0e19\u0e34\u0e14\u0e23\u0e16\u0e02\u0e19\u0e2a\u0e48\u0e07: ",this.state.car_type),r.a.createElement(He.h,{item:!0,xs:6,className:o.box},r.a.createElement(He.o,{id:"outlined-multiline-flexible",label:"Price | \u0e23\u0e32\u0e04\u0e32",value:this.state.price,disabled:!0,inputProps:{name:"price"},type:"number",InputLabelProps:{shrink:!0},name:"price",className:o.textField,margin:"normal",variant:"outlined",fullWidth:!0})),r.a.createElement(He.h,{item:!0,xs:12,className:o.box},r.a.createElement(He.o,{id:"outlined-multiline-flexible",label:"\u0e2d\u0e37\u0e48\u0e19\u0e46",multiline:!0,rowsMax:"10",value:this.state.note,onChange:this.handleChangeName,inputProps:{name:"note"},InputLabelProps:{shrink:!0},className:o.textField,margin:"normal",helperText:"Maximum of 100 character",variant:"outlined",fullWidth:!0})),r.a.createElement(He.h,{item:!0,xs:6,className:o.box},"Driver Name | \u0e04\u0e19\u0e02\u0e31\u0e1a\u0e23\u0e16:"),r.a.createElement(He.h,{item:!0,xs:6,className:o.box},"Issuer's name | \u0e1c\u0e39\u0e49\u0e2a\u0e31\u0e48\u0e07\u0e07\u0e32\u0e19:  ",r.a.createElement("br",null)," ",i))),r.a.createElement(He.h,{container:!0,style:{justifyContent:"center"}},r.a.createElement(He.k,{style:{width:"100%",margin:10,textAlign:"center",display:"contents"}},r.a.createElement(He.a,{variant:"contained",color:"primary",style:{margin:10},onClick:function(){return e.props.history.push("invoicelist")}},"Cancel"),r.a.createElement(He.a,{variant:"contained",color:"primary",style:{margin:10},onClick:function(){return e.handleSubmit()}},"Save"))))}}]),t}(r.a.Component),ma=Object(M.withStyles)(function(e){return{container:{textAlign:"flex-start",margin:"auto",marginBottom:20,padding:20,width:window.innerWidth<=1024?"95%":"60%",height:"100%"},paper:{padding:2*e.spacing.unit,textAlign:"flext-start",alignContent:"center",color:e.palette.text.secondary,whiteSpace:"nowrap",height:"100%"},divider:{margin:"".concat(2*e.spacing.unit,"px 0")},box:{border:"solid",padding:10,borderWidth:.25,borderColor:"grey",boxSizing:"border-box"},boxButton:{alignContent:"flex-start",border:"solid",padding:10,borderWidth:.25,borderColor:"grey",boxSizing:"border-box"},textField:{},textField_number:{height:"100%",width:150,marginRight:10,marginTop:10},formControl:{margin:2,borderWidth:1,borderStyle:"groove",borderRadius:5,padding:10}}})(da),ha=a(327),ga=a.n(ha),fa={success:et.a,warning:st.a,error:at.a,info:rt.a};var ba=Object(M.withStyles)(function(e){return{success:{backgroundColor:ut.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:dt.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,i=e.onClose,o=e.variant,l=Object(d.a)(e,["classes","className","message","onClose","variant"]),s=fa[o];return r.a.createElement(Ze.a,Object.assign({className:y()(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(s,{className:y()(t.icon,t.iconVariant)}),n),action:[r.a.createElement(Ye.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},r.a.createElement(ot.a,{className:t.icon}))]},l))});function _a(e){var t=e.inputRef,a=Object(d.a)(e,["inputRef"]);return r.a.createElement("div",Object.assign({ref:t},a))}var va={Control:function(e){return r.a.createElement(Ee.a,Object.assign({fullWidth:!0,InputProps:{inputComponent:_a,inputProps:Object(ne.a)({className:e.selectProps.classes.input,inputRef:e.innerRef,children:e.children},e.innerProps)}},e.selectProps.textFieldProps))},Menu:function(e){return r.a.createElement(oe.a,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)},MultiValue:function(e){return r.a.createElement(ke.a,{tabIndex:-1,label:e.children,className:y()(e.selectProps.classes.chip,Object(_.a)({},e.selectProps.classes.chipFocused,e.isFocused)),onDelete:e.removeProps.onClick,deleteIcon:r.a.createElement(we.a,e.removeProps)})},NoOptionsMessage:function(e){return r.a.createElement(U.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return r.a.createElement(Oe.a,Object.assign({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps),e.children)},Placeholder:function(e){return r.a.createElement(U.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return r.a.createElement(U.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return r.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}},ya=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={single:null,multi:null},a.handleChange=function(e){return function(t){return console.log(a.state.single),a.props.vehicle&&(a.props.onUpdate([t,a.state.single]),a.setState(Object(_.a)({},e,t))),a.props.products&&(a.props.onUpdate([t,a.state.single]),a.setState(Object(_.a)({},e,t))),t.value===a.props.origin?(a.setState({alert:"Origin & destination cannot be same",snackbar_open:!0}),null):a.props.destination.includes(t.value)?(a.setState({alert:"Destination cannot be same",snackbar_open:!0}),null):a.props.vehicle||a.props.plate_no?(a.props.onUpdate([t,a.state.single,a.props.index]),void a.setState(Object(_.a)({},e,t))):(a.setState({alert:"Please select vehicle first",snackbar_open:!0}),null)}},a.handleSnackbarClose=function(e,t){"clickaway"!==t&&a.setState({snackbar_open:!1})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.theme,n={input:function(e){return Object(ne.a)({},e,{color:a.palette.text.primary,"& input":{font:"inherit"},zIndex:10})}};return r.a.createElement("div",{className:t.root},r.a.createElement(Ke.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.snackbar_open,autoHideDuration:6e3,onClose:this.handleSnackbarClose},r.a.createElement(ba,{onClose:this.handleSnackbarClose,variant:"error",message:this.state.alert})),r.a.createElement(ve.a,null,r.a.createElement(ga.a,{classes:t,styles:n,options:this.props.suggestions,components:va,value:this.state.single,onChange:this.handleChange("single"),placeholder:"Search ...",clearable:!1})))}}]),t}(r.a.Component),Ea=Object(M.withStyles)(function(e){return{root:{flexGrow:1,zIndex:10,height:"auto"},input:{display:"flex",padding:0},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:"".concat(e.spacing.unit/2,"px ").concat(e.spacing.unit/4,"px")},chipFocused:{backgroundColor:Object(je.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},singleValue:{fontSize:12},placeholder:{position:"absolute",left:2,fontSize:12,paddingLeft:5},paper:{position:"absolute",zIndex:10,marginTop:e.spacing.unit,left:0,right:0},divider:{height:2*e.spacing.unit}}},{withTheme:!0})(ya),xa=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){console.log(this.props);var e=this.props.classes,t=this.props.origin?[this.props.origin].concat(Object(b.a)(this.props.destination)):[];return r.a.createElement("div",{className:e.root},r.a.createElement(Kt.a,{alternativeLabel:!0},t.map(function(e){return r.a.createElement(Zt.a,{key:e},r.a.createElement(ea.a,null,e))})))}}]),t}(r.a.Component),ka=Object(M.withStyles)(function(e){return{root:{width:"90%"},backButton:{marginRight:e.spacing.unit},instructions:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit}}})(xa),Ca={success:et.a,warning:st.a,error:at.a,info:rt.a};var Oa=Object(M.withStyles)(function(e){return{success:{backgroundColor:ut.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:dt.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,i=e.onClose,o=e.variant,l=Object(d.a)(e,["classes","className","message","onClose","variant"]),s=Ca[o];return r.a.createElement(Ze.a,Object.assign({className:y()(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(s,{className:y()(t.icon,t.iconVariant)}),n),action:[r.a.createElement(Ye.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},r.a.createElement(ot.a,{className:t.icon}))]},l))});function Sa(e){return r.a.createElement(Wt.a,Object.assign({direction:"up"},e))}var wa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1}),a.props.onUpdateState(!1)},a.handleSubmit=function(e){a.setState({open:!1}),a.props.onUpdateState(!1),G.a.post("".concat(H.url,"/orders"),e).then(function(e){console.log(e),a.setState({snackbar_open:!0}),a.props.history.push("invoicelist")})},a.handleSnackbarClose=function(e,t){"clickaway"!==t&&a.setState({snackbar_open:!1})},a.state={snackbar_open:!1},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;console.log(this.props);var t=this.props.classes;return r.a.createElement("div",null,r.a.createElement(Ke.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.snackbar_open,autoHideDuration:6e3,onClose:this.handleSnackbarClose},r.a.createElement(Oa,{onClose:this.handleSnackbarClose,variant:"success",message:"Operation successful!"})),r.a.createElement(It.a,{fullWidth:!0,maxWidth:"md",open:this.props.open,TransitionComponent:Sa,keepMounted:!0,onClose:this.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(Bt.a,{id:"alert-dialog-slide-title",style:{margin:"auto"}},"Please verified before confirm order?"),r.a.createElement(He.e,null),r.a.createElement(Lt.a,null,r.a.createElement(Ut.a,{className:t.table},r.a.createElement(qt.a,null,r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Date")),r.a.createElement(Ht.a,null,this.props.data.created_date?new ra.a(this.props.data.created_date).add(0,"hours").toDate().toLocaleString():"")),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Invoice")),r.a.createElement(Ht.a,null,0!==Object.keys(this.props.data).length?this.props.data.invoices_out_ap.split("\n").map(function(e,t){return r.a.createElement(ke.a,{label:"".concat(e),key:e,color:"primary"})}):null)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Transporter")),r.a.createElement(Ht.a,null,this.props.data.supplier)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Vehicle")),r.a.createElement(Ht.a,null,this.props.data.plate_no)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Product")),r.a.createElement(Ht.a,null,0!==Object.keys(this.props.data).length?this.props.data.products_ap.split("\n").map(function(t,a){return r.a.createElement(ke.a,{label:"".concat(t,"[").concat(e.props.data.pro_quantity_ap.split("\n")[a]||" ","]"),key:t,color:"primary"})}):null)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Note")),r.a.createElement(Ht.a,null,this.props.data.note)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Return")),r.a.createElement(Ht.a,null,this.props.data.will_return?r.a.createElement(ke.a,{label:"True",color:"primary"}):r.a.createElement(ke.a,{label:"False"}))),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"\u0e04\u0e49\u0e32\u0e07\u0e04\u0e37\u0e19*")),r.a.createElement(Ht.a,null,this.props.data.over_night?r.a.createElement(ke.a,{label:"True",color:"primary"}):r.a.createElement(ke.a,{label:"False"}))))),r.a.createElement(ka,{origin:0!==Object.keys(this.props.data).length?this.props.data.origin:"",destination:0!==Object.keys(this.props.data).length?this.props.data.destination.split("|"):[]})),r.a.createElement(He.e,null),r.a.createElement(Tt.a,null,r.a.createElement(C.a,{onClick:this.handleClose,variant:"contained",color:"secondary"},"Cancel"),r.a.createElement(C.a,{onClick:function(){return e.handleSubmit(e.props.data)},variant:"contained",color:"primary"},"Confirm"))))}}]),t}(r.a.Component),ja=Object(M.withStyles)(function(e){return{root:{minWidth:"700px",maxWidth:"100%",marginTop:3*e.spacing.unit,overflowX:"auto",borderBottom:"1px solid ".concat(e.palette.divider)},tableHead:{backgroundColor:"green"}}})(wa),Na={success:et.a,warning:st.a,error:at.a,info:rt.a};var Da=Object(M.withStyles)(function(e){return{success:{backgroundColor:ut.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:dt.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,i=e.onClose,o=e.variant,l=Object(d.a)(e,["classes","className","message","onClose","variant"]),s=Na[o];return r.a.createElement(Ze.a,Object.assign({className:y()(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(s,{className:y()(t.icon,t.iconVariant)}),n),action:[r.a.createElement(He.i,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},r.a.createElement(ot.a,{className:t.icon}))]},l))}),Pa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){return function(t){"onOverNight"===e&&a.setState({delivered_date:(new ra.a).add(1,"days").toDate().toISOString().slice(0,10)}),a.setState(Object(_.a)({},e,t.target.checked))}},a.handleChangeName=function(e){console.log(e.target.name),a.setState(Object(_.a)({},e.target.name,e.target.value))},a.handleChangeTime=function(e){return function(t){console.log(t.target.value),console.log(e),console.log(a.state.inputLinkClicked.length);var n=parseInt(t.target.value);a.setState(function(t){console.log(e);var a=t.times.map(function(t,a){return console.log(a),a===e&&(console.log(a),t=n),t});return console.log(a),{times:a}}),console.log(a.state.times)}},a.onUpdateProps=function(e){a.setState({showDialog:e})},a.onUpdate=function(e){var t=Object(re.a)(Object(re.a)(a));if(console.log(e),e[0].product&&(""!==a.state.products_ap?a.setState({products_ap:a.state.products_ap+"\n"+e[0].value}):a.setState({products_ap:e[0].value})),e[0].origin&&a.setState({origin:e[0].value}),e[0].destination&&(console.log(e[0].value),"FAURECIA ARGENTINA S.A."===e[0].value||"Adient South Africa Proprietary Limited"===e[0].value?a.setState({order_type:"abroad"}):a.setState({order_type:"local"}),console.log(e[2]),a.setState(function(t){return{destination:t.destination.map(function(t,a){return a===e[2]&&(t=e[0].value),console.log(t),t})}})),e[0].vehicle){var n=a.state.pois.filter(function(t){return t.appid===e[0].appid});a.setState({vehicle:e[0].value,car_type:e[0].type,pois:n}),G.a.get("".concat(H.url,"/suppliers?appid=").concat(e[0].appid)).then(function(e){t.setState({supplier:e.data[0].name})}),G.a.get("".concat(H.url,"/orders/count?plate_no=").concat(e[0].value,"&created_date_gt=").concat((new Date).toISOString().slice(0,10),"&company_id=").concat(localStorage.getItem("companyID"))).then(function(e){a.setState({trip_no:e.data+1})})}},a.onUpdate_pro_in=function(e){console.log(e),e[0].product&&(""!==a.state.products_in_ap?a.setState({products_in_ap:a.state.products_in_ap+"\n"+e[0].value}):a.setState({products_in_ap:e[0].value}))},a.handleSnackbarClose=function(e,t){"clickaway"!==t&&a.setState({snackbar_open:!1})},a.state={alert:"",onReturn:!1,onOvertime:!1,onOverNight:!1,seal_no:"",vehicle:"",origin:"",destination:[null],issuer_name:"",origin_geo_in:"0",origin_geo_out:"0",dest_geo_in:"",dest_geo_out:"",car_type:"",note:"",job_no:"",invoice_no:"",supplier:"",delivered_date:"",submitData:{},loading:!0,multiline:"",company_logo:"",company_name:"",suppliers:"",pois:[],vehicles:[],products:[],inputLinkClicked:[1],showDialog:!1,process:"later",products_ap:"",pro_quantity_ap:"",invoices_out_ap:"",invoices_in_ap:"",times:[1],price_trip:"",price_toll:"",price_other:"",order_type:null,orders_no:"",long_pick_up:!1,products_in_ap:"",pro_in_quantity_ap:""},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(){if(this.state.vehicle)if(this.state.origin)if(0===this.state.destination.length||this.state.destination.includes(null))this.setState({alert:"Please specfic destination of delivery",snackbar_open:!0});else if(this.state.destination.includes(this.state.origin))this.setState({alert:"Origin and destination cannot be same",snackbar_open:!0});else{var e=this.state,t=e.job_no,a=e.invoice_no,n=e.supplier,r=e.vehicle,i=e.origin,o=e.destination,l=e.onReturn,s=e.onOverNight,c=e.onOvertime,u=e.seal_no,p=e.car_type,d=e.note,m=e.price,h=e.issuer_name,g=e.delivered_date,f=e.company_logo,b=e.company_name,_=e.trip_no,v=e.process,y=e.products_ap,E=e.pro_quantity_ap,x=e.price_ap,k=e.toll_price_ap,C=e.invoices_in_ap,O=e.invoices_out_ap,S=e.times,w=e.price_trip,j=e.price_toll,N=e.price_other,D=e.order_type,P=e.orders_no,I=e.long_pick_up,A=e.products_in_ap,T=e.pro_in_quantity_ap,R=Array(o.length).fill(0).join("|"),L=R;if(""===O)return void this.setState({alert:"Invoices is missing",snackbar_open:!0});var z={job_no:t,invoice_no:a,supplier:n,plate_no:r,origin:i,destination:o.join("|"),will_return:l,over_night:s,over_time:c,seal_no:u,car_type:p,note:d,price:m,issuer:h,created_date:(new ra.a).add(0,"hours").toDate(),updated_date:(new ra.a).add(0,"hours").toDate(),delivered_date:g,status:"new",company_id:localStorage.getItem("companyID"),company_logo:f,company_name:b,dest_geo_in:R,dest_geo_out:L,trip_no:_,process:v,products_ap:y,pro_quantity_ap:E,price_ap:x,toll_price_ap:k,invoices_in_ap:C,invoices_out_ap:O,times:S.join("\n"),price_trip:w,price_toll:j,price_other:N,order_type:D,orders_no:P,long_pick_up:I,products_in_ap:A,pro_in_quantity_ap:T};console.log(z),this.setState({showDialog:!0,submitData:z})}else this.setState({alert:"Please specfic origin of delivery",snackbar_open:!0});else this.setState({alert:"Plate_no is missing",snackbar_open:!0})}},{key:"componentWillMount",value:function(){var e=this,t=this,a=G.a.get("".concat(H.url,"/companies/").concat(localStorage.getItem("companyID")));this.setState({issuer_name:localStorage.getItem("username")}),Promise.all([a]).then(function(e){t.setState({loading:!1,company_logo:e[0].data.logo,company_name:e[0].data.name,company_abbr:e[0].data.abbr,suppliers:e[0].data.supplier})}).catch(function(e){console.log(e.message),t.setState({loading:!1})}).then(Object(f.a)(g.a.mark(function t(){var a,n,r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.suppliers.map(function(e,t){return G.a.get("".concat(H.url,"/vehicles?appid=").concat(e.appid,"&_sort=plate_no:ASC&_limit=1000"),{})}),n=e.state.suppliers.map(function(t,a){return G.a.get("".concat(H.url,"/pois?appid=").concat(t.appid,"&_sort=name:ASC&_limit=1000&company_name=").concat(e.state.company_abbr),{})}),r=G.a.get("".concat(H.url,"/products?_sort=CUSTOMER_ITEM_CODE_SALE:ASC&_limit=10000")),t.next=5,Promise.all([Promise.all([a,n,r]).then(function(e){return console.log(e),e})]).then(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a),t.next=3,a[0][0].map(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a.then(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({vehicles:[].concat(Object(b.a)(e.state.vehicles),Object(b.a)(a.data))});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 3:return t.next=5,a[0][1].map(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a.then(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({pois:[].concat(Object(b.a)(e.state.pois),Object(b.a)(a.data))});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 5:return t.next=7,e.setState({products:[].concat(Object(b.a)(e.state.products),Object(b.a)(a[0][2].data))});case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 5:case"end":return t.stop()}},t)}))).then(function(){G.a.get("".concat(H.url,"/orders?_sort=job_no:DESC&_limit=1&company_id=").concat(localStorage.getItem("companyID"))).then(function(a){0!==a.data.length?t.setState({job_no:e.pad(parseInt(a.data[0].job_no)+1,5)}):t.setState({job_no:"00001"})})})}},{key:"pad",value:function(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}},{key:"handleAddInput",value:function(){this.setState({inputLinkClicked:[].concat(Object(b.a)(this.state.inputLinkClicked),[1]),times:[].concat(Object(b.a)(this.state.times),[1]),destination:[].concat(Object(b.a)(this.state.destination),[null])})}},{key:"handleDeleteInput",value:function(e){console.log(e),this.setState({inputLinkClicked:this.state.inputLinkClicked.filter(function(t,a){return a!==e}),times:this.state.times.filter(function(t,a){return a!==e}),destination:this.state.destination.filter(function(t,a){return a!==e})})}},{key:"handleDeletePackage",value:function(){var e=this;0!==this.state.products_ap.length&&(this.state.pro_quantity_ap.split("\n").length===this.state.products_ap.split("\n").length?this.setState({products_ap:this.state.products_ap.split("\n").filter(function(t,a){return a!==e.state.products_ap.split("\n").length-1}).join("\n"),pro_quantity_ap:this.state.pro_quantity_ap.split("\n").filter(function(t,a){return a!==e.state.pro_quantity_ap.split("\n").length-1}).join("\n")}):this.setState({products_ap:this.state.products_ap.split("\n").filter(function(t,a){return a!==e.state.products_ap.split("\n").length-1}).join("\n")}))}},{key:"handleDeleteInPackage",value:function(){var e=this;0!==this.state.products_in_ap.length&&(this.state.pro_in_quantity_ap.split("\n").length===this.state.products_in_ap.split("\n").length?this.setState({products_in_ap:this.state.products_in_ap.split("\n").filter(function(t,a){return a!==e.state.products_in_ap.split("\n").length-1}).join("\n"),pro_in_quantity_ap:this.state.pro_in_quantity_ap.split("\n").filter(function(t,a){return a!==e.state.pro_in_quantity_ap.split("\n").length-1}).join("\n")}):this.setState({products_in_ap:this.state.products_in_ap.split("\n").filter(function(t,a){return a!==e.state.products_in_ap.split("\n").length-1}).join("\n")}))}},{key:"render",value:function(){var e=this;console.log(this.state.destination);var t=this.state,a=t.company_logo,n=t.company_name,i=t.issuer_name,o=this.props.classes;if(this.state.loading)return r.a.createElement("div",null,r.a.createElement(He.j,null),r.a.createElement("br",null),r.a.createElement(He.j,{color:"secondary"}));var l=this.state.vehicles.map(function(e){return{value:e.plate_no,label:e.plate_no,type:e.vehicle_type,appid:e.appid,vehicle:!0}}),s=this.state.pois.map(function(e){return{value:e.name,label:e.name,origin:!0}}),c=this.state.pois.map(function(e){return{value:e.name,label:e.name,destination:!0}}),u=function(e){return Object(b.a)(new Set(e.map(function(e){return JSON.stringify(e)}))).map(function(e){return JSON.parse(e)})},p=u(this.state.products.filter(function(e){return"(blank)"!==e.CUSTOMER_ITEM_CODE_SALE?e:null}).map(function(e){return{value:e.CUSTOMER_ITEM_CODE_SALE,label:e.CUSTOMER_ITEM_CODE_SALE,product:!0}})),d=u(s),m=u(c);return r.a.createElement("div",{style:{paddingTop:"20px"}},r.a.createElement(Ke.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.snackbar_open,autoHideDuration:6e3,onClose:this.handleSnackbarClose},r.a.createElement(Da,{onClose:this.handleSnackbarClose,variant:"error",message:this.state.alert})),r.a.createElement(ja,{open:this.state.showDialog,onUpdateState:this.onUpdateProps,data:this.state.submitData,history:this.props.history}),r.a.createElement(He.k,{className:o.container},r.a.createElement(He.h,{container:!0},r.a.createElement(He.h,{item:!0,xs:8,className:o.box,style:{textAlign:"center"}},r.a.createElement("img",{src:a,alt:"no logo found",width:"75px",style:{float:"left"}}),r.a.createElement("b",null,n)),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},"Job no. | \u0e43\u0e1a\u0e07\u0e32\u0e19\u0e17\u0e35\u0e48: ",this.state.job_no),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},"Transporter | \u0e02\u0e19\u0e2a\u0e48\u0e07: ",this.state.supplier),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},"Date | \u0e27\u0e31\u0e19\u0e17\u0e35\u0e48: ",(new Date).toLocaleString()),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},"No. of trip | \u0e40\u0e17\u0e35\u0e48\u0e22\u0e27\u0e17\u0e35\u0e48: ",this.state.trip_no),r.a.createElement(He.h,{item:!0,xs:8,className:o.box},r.a.createElement(He.h,{container:!0},r.a.createElement(He.h,{item:!0,xs:2},"Car Plate* | \u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e23\u0e16:"),r.a.createElement(He.h,{item:!0,xs:4},r.a.createElement(Ea,{suggestions:l,vehicle:!0,onUpdate:this.onUpdate,origin:this.state.origin?this.state.origin:"",destination:this.state.destination?this.state.destination:[]})),r.a.createElement(He.h,{item:!0,xs:1}),r.a.createElement(He.h,{item:!0,xs:3},"Code No. :"))),r.a.createElement(He.h,{item:!0,xs:4,className:o.box,container:!0},r.a.createElement(He.h,{item:!0,xs:12},"Type of car | \u0e0a\u0e19\u0e34\u0e14\u0e23\u0e16\u0e02\u0e19\u0e2a\u0e48\u0e07: ",this.state.car_type),r.a.createElement(He.h,{item:!0,xs:12},r.a.createElement(He.f,{control:r.a.createElement(He.d,{checked:this.state.long_pick_up,onChange:this.handleChange("long_pick_up"),value:"long_pick_up"}),label:"5 m long"}))),r.a.createElement(He.h,{item:!0,xs:5,className:o.box},r.a.createElement(He.h,{container:!0},r.a.createElement(He.h,{item:!0,xs:3},"Origin | \u0e08\u0e38\u0e14\u0e40\u0e23\u0e34\u0e48\u0e21\u0e15\u0e49\u0e19*"),r.a.createElement(He.h,{item:!0,xs:9},r.a.createElement(Ea,{suggestions:d,plate_no:this.state.vehicle,onUpdate:this.onUpdate,origin:this.state.origin?this.state.origin:"",destination:this.state.destination?this.state.destination:[]})),r.a.createElement(He.h,{container:!0,style:{margin:"6px"}},r.a.createElement(He.h,{item:!0,xs:6},"Time in | \u0e40\u0e27\u0e25\u0e32\u0e40\u0e02\u0e49\u0e32: "),r.a.createElement(He.h,{item:!0,xs:6},"Time out | \u0e40\u0e27\u0e25\u0e32\u0e2d\u0e2d\u0e01: ")))),r.a.createElement(He.h,{item:!0,xs:7,className:o.box},this.state.inputLinkClicked.map(function(t,a){return r.a.createElement(He.h,{container:!0,key:a},0===a?r.a.createElement(He.h,{item:!0,xs:2},"Destination | \u0e1b\u0e25\u0e32\u0e22\u0e17\u0e32\u0e07*"):r.a.createElement(He.h,{item:!0,xs:2}),r.a.createElement(He.h,{item:!0,xs:8,container:!0},r.a.createElement(He.h,{item:!0,xs:9},r.a.createElement(Ea,{key:a,suggestions:m,plate_no:e.state.vehicle,onUpdate:e.onUpdate,origin:e.state.origin?e.state.origin:"",defaultValue:{value:e.state.destination[a],label:e.state.destination[a],destination:!0},destination:e.state.destination?e.state.destination:[],index:a})),r.a.createElement(He.h,{item:!0,xs:1}),r.a.createElement(He.h,{item:!0,xs:2},r.a.createElement(He.o,{id:"text",label:"times",type:"number",variant:"outlined",InputLabelProps:{shrink:!0},inputProps:{style:{fontSize:10,padding:10,paddingLeft:5}},value:e.state.times[a],onChange:e.handleChangeTime(a),multilined:!0,rowsMax:1}))),r.a.createElement(He.h,{item:!0,xs:2},0===a&&e.state.inputLinkClicked.length<7?r.a.createElement(He.i,{variant:"contained",color:"secondary",className:o.button,style:{float:"right"},onClick:function(){return e.handleAddInput()}},r.a.createElement(yt.a,null)):null,0!==a&&e.state.inputLinkClicked.length>1?r.a.createElement(He.i,{variant:"contained",color:"secondary",className:o.button,style:{float:"right"},onClick:function(){return e.handleDeleteInput(a)}},r.a.createElement(xt.a,null)):null),0===a?r.a.createElement(He.h,{container:!0,style:{margin:"6px"}},r.a.createElement(He.h,{item:!0,xs:6},"Time in | \u0e40\u0e27\u0e25\u0e32\u0e40\u0e02\u0e49\u0e32:   "),r.a.createElement(He.h,{item:!0,xs:6},"Time out | \u0e40\u0e27\u0e25\u0e32\u0e2d\u0e2d\u0e01:   ")):r.a.createElement(He.h,{container:!0,style:{margin:"6px"}},r.a.createElement(He.h,{item:!0,xs:6},"TIme in | \u0e40\u0e27\u0e25\u0e32\u0e40\u0e02\u0e49\u0e32:  "),r.a.createElement(He.h,{item:!0,xs:6},"Time out | \u0e40\u0e27\u0e25\u0e32\u0e2d\u0e2d\u0e01:  ")))})),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},r.a.createElement(He.f,{control:r.a.createElement(He.n,{checked:this.state.onReturn,onChange:this.handleChange("onReturn"),value:this.state.onReturn}),label:this.state.onReturn?"Return* | \u0e23\u0e31\u0e1a\u0e01\u0e25\u0e31\u0e1a":"No return | \u0e44\u0e21\u0e48\u0e23\u0e31\u0e1a\u0e01\u0e25\u0e31\u0e1a"})),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},r.a.createElement(He.f,{control:r.a.createElement(He.n,{checked:this.state.onOvertime,onChange:this.handleChange("onOvertime"),value:this.state.onOvertime}),label:this.state.onOvertime?"Overtime* | \u0e25\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32":"No overtime | \u0e44\u0e21\u0e48\u0e25\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32"})),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},r.a.createElement(He.f,{control:r.a.createElement(He.n,{checked:this.state.onOverNight,onChange:this.handleChange("onOverNight"),value:this.state.onOverNight}),label:this.state.onOverNight?"Over Night | \u0e04\u0e49\u0e32\u0e07\u0e04\u0e37\u0e19*":"No over night | \u0e44\u0e21\u0e48\u0e04\u0e49\u0e32\u0e07\u0e04\u0e37\u0e19"}),this.state.onOverNight?r.a.createElement(He.o,{id:"date",label:"Delivered date",type:"date",defaultValue:(new ra.a).add(1,"days").toDate().toISOString().slice(0,10),fullWidth:!0,onChange:this.handleChangeName,className:o.textField,InputProps:{style:{fontSize:12}},InputLabelProps:{shrink:!0,style:{zIndex:0}},name:"delivered_date"}):null),r.a.createElement(He.h,{item:!0,xs:12,container:!0},r.a.createElement(He.h,{item:!0,xs:7,className:o.box},r.a.createElement(He.h,{item:!0,xs:12,style:{textAlign:"center",backgroundColor:"#2ecc71",height:48}},"Description of out-bound:    ",r.a.createElement(He.f,{control:r.a.createElement(He.d,{value:"part"}),label:"Part"}),r.a.createElement(He.f,{control:r.a.createElement(He.d,{value:"document"}),label:"Document"})),r.a.createElement(He.h,{container:!0,item:!0,xs:12,style:{marginTop:10}},r.a.createElement(He.h,{item:!0,xs:4},r.a.createElement(He.o,{id:"text",label:"Item code",type:"text",variant:"outlined",fullWidth:!0,className:o.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},value:this.state.products_ap,name:"products_ap",onChange:this.handleChangeName,multiline:!0,rowsMax:40,disabled:!0}),r.a.createElement(He.h,null,r.a.createElement(Ea,{suggestions:p,product:!0,plate_no:this.state.vehicle,onUpdate:this.onUpdate,origin:this.state.origin?this.state.origin:"",destination:this.state.destination?this.state.destination:[]}))),r.a.createElement(He.h,{item:!0,xs:2},r.a.createElement(He.o,{id:"text",type:"text",label:"Qu.",variant:"outlined",fullWidth:!0,className:o.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},name:"pro_quantity_ap",value:this.state.pro_quantity_ap,onChange:this.handleChangeName,multiline:!0,rowsMax:40}),r.a.createElement(He.i,{variant:"contained",color:"secondary",className:o.button,style:{float:"right"},onClick:function(){return e.handleDeletePackage()}},r.a.createElement(xt.a,null))),r.a.createElement(He.h,{item:!0,xs:3},r.a.createElement(He.o,{id:"text",type:"text",label:"Orders",variant:"outlined",fullWidth:!0,className:o.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},name:"orders_no",value:this.state.orders_no,onChange:this.handleChangeName,multiline:!0,rowsMax:40})),r.a.createElement(He.h,{item:!0,xs:3},r.a.createElement(He.o,{id:"text",label:"Invoices",type:"text",variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},name:"invoices_out_ap",onChange:this.handleChangeName,multiline:!0,rowsMax:40})))),r.a.createElement(He.h,{item:!0,xs:5,container:!0,className:o.box},r.a.createElement(He.h,{item:!0,xs:12,style:{textAlign:"center",backgroundColor:"#2ecc71"}},"Description of in-bound:  ",r.a.createElement(He.f,{control:r.a.createElement(He.d,{value:"part"}),label:"Part"}),r.a.createElement(He.f,{control:r.a.createElement(He.d,{value:"document"}),label:"Document"})),r.a.createElement(He.h,{container:!0,item:!0,xs:12,className:o.box},r.a.createElement(He.h,{item:!0,xs:5},r.a.createElement(He.o,{id:"text",label:"Item code",type:"text",variant:"outlined",fullWidth:!0,className:o.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},value:this.state.products_in_ap,name:"products_in_ap",onChange:this.handleChangeName,multiline:!0,rowsMax:20,disabled:!0}),r.a.createElement(He.h,null,r.a.createElement(Ea,{suggestions:p,product:!0,plate_no:this.state.vehicle,onUpdate:this.onUpdate_pro_in,origin:this.state.origin?this.state.origin:"",destination:this.state.destination?this.state.destination:[]}))),r.a.createElement(He.h,{item:!0,xs:2},r.a.createElement(He.o,{id:"text",label:"Qu.",type:"text",variant:"outlined",fullWidth:!0,className:o.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},name:"pro_in_quantity_ap",onChange:this.handleChangeName,multiline:!0,rowsMax:20}),r.a.createElement(He.i,{variant:"contained",color:"secondary",className:o.button,style:{float:"right"},onClick:function(){return e.handleDeleteInPackage()}},r.a.createElement(xt.a,null))),r.a.createElement(He.h,{item:!0,xs:5},r.a.createElement(He.o,{id:"text",label:"Invoices",type:"text",variant:"outlined",fullWidth:!0,className:o.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},name:"invoices_in_ap",onChange:this.handleChangeName,multiline:!0,rowsMax:20}))),r.a.createElement(He.h,{item:!0,xs:12,container:!0,className:o.box},r.a.createElement(He.h,{item:!0,xs:4},r.a.createElement(He.o,{variant:"outlined",label:" Trip (\u0e3f)",type:"number",InputLabelProps:{shrink:!0,style:{zIndex:0}},className:o.input,inputProps:{"aria-label":"Description",style:{fontSize:10,padding:10}},name:"price_trip",value:this.state.price_trip,onChange:this.handleChangeName,fullWidth:!0})),r.a.createElement(He.h,{item:!0,xs:4},r.a.createElement(He.o,{variant:"outlined",label:"Toll (\u0e3f)",InputLabelProps:{shrink:!0,style:{zIndex:0}},type:"number",className:o.input,inputProps:{"aria-label":"Description",style:{fontSize:10,padding:10}},name:"price_toll",value:this.state.price_toll,onChange:this.handleChangeName,fullWidth:!0})),r.a.createElement(He.h,{item:!0,xs:4},r.a.createElement(He.o,{variant:"outlined",label:"Other (\u0e3f)",type:"number",InputLabelProps:{shrink:!0,style:{zIndex:0}},className:o.input,inputProps:{"aria-label":"Description",style:{fontSize:10,padding:10}},name:"price_other",value:this.state.price_other,onChange:this.handleChangeName,fullWidth:!0}))),r.a.createElement(He.h,{item:!0,xs:12,container:!0},r.a.createElement(He.h,{item:!0,xs:6,className:o.box},r.a.createElement(He.h,{item:!0,xs:7},"Sender Name/ WH: "),r.a.createElement(He.h,{item:!0,xs:5},"Date / Time: ")),r.a.createElement(He.h,{item:!0,xs:6,className:o.box},r.a.createElement(He.h,{item:!0,xs:7},"Name of Receiver: "),r.a.createElement(He.h,{item:!0,xs:5},"Date / Time:  "))),r.a.createElement(He.h,{item:!0,xs:6,className:o.box},"Report by: "),r.a.createElement(He.h,{item:!0,xs:6,className:o.box},"Date / Time: "),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},"Driver Name | \u0e04\u0e19\u0e02\u0e31\u0e1a\u0e23\u0e16:"),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},"Issuer's name | \u0e1c\u0e39\u0e49\u0e2a\u0e31\u0e48\u0e07\u0e07\u0e32\u0e19: ",i),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},"Approved by | \u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34\u0e42\u0e14\u0e22:"),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},"Date / Time:"),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},"Date / Time:"),r.a.createElement(He.h,{item:!0,xs:4,className:o.box},"Date / Time:"))))),r.a.createElement(He.h,{container:!0,style:{justifyContent:"center"}},r.a.createElement(He.k,{style:{width:"100%",margin:10,textAlign:"center",display:"contents"}},r.a.createElement(He.a,{variant:"contained",color:"primary",style:{margin:10},onClick:function(){return e.props.history.push("invoicelist")}},"Cancel"),r.a.createElement(He.a,{variant:"contained",color:"primary",style:{margin:10},onClick:function(){return e.handleSubmit()}},"Save"))))}}]),t}(r.a.Component),Ia=Object(M.withStyles)(function(e){return{container:{textAlign:"flex-start",margin:"auto",marginBottom:20,padding:20,width:window.innerWidth<=1024?"95%":"21cm",height:"100%",fontSize:12},paper:{padding:2*e.spacing.unit,textAlign:"flext-start",alignContent:"center",whiteSpace:"nowrap",height:"100%"},divider:{margin:"".concat(2*e.spacing.unit,"px 0")},box:{border:"solid",padding:10,borderWidth:.25,borderColor:"grey",boxSizing:"border-box"},boxButton:{alignContent:"flex-start",border:"solid",padding:10,borderWidth:.25,borderColor:"grey",boxSizing:"border-box"},textField:{fontSize:8},button:{padding:5},formControl:{margin:2,borderWidth:1,borderStyle:"groove",borderRadius:5,padding:10}}})(Pa),Aa=a(138),Ta=a.n(Aa),Ra=a(319),La=a.n(Ra);function za(e){var t=e.inputRef,a=Object(d.a)(e,["inputRef"]);return r.a.createElement("div",Object.assign({ref:t},a))}var Ba={Control:function(e){return r.a.createElement(Ee.a,{label:null,variant:"outlined",fullWidth:!0,InputProps:{inputComponent:za,inputProps:Object(ne.a)({className:e.selectProps.classes.input,inputRef:e.innerRef,children:e.children},e.innerProps)}})},Menu:function(e){return r.a.createElement(oe.a,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)},MultiValue:function(e){return r.a.createElement(ke.a,{tabIndex:-1,label:e.children,className:y()(e.selectProps.classes.chip,Object(_.a)({},e.selectProps.classes.chipFocused,e.isFocused)),onDelete:e.removeProps.onClick,deleteIcon:r.a.createElement(we.a,e.removeProps)})},NoOptionsMessage:function(e){return r.a.createElement(U.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return r.a.createElement(Oe.a,Object.assign({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps),e.children)},Placeholder:function(e){return r.a.createElement(U.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return r.a.createElement(U.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return r.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}},Fa=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={single:null,multi:null},a.handleChange=function(e){return function(t){console.log(t);var n=a.props.inputs;0===t.length?(console.log("send from here"),a.props.onUpdate([{id:n[0].id,value:""}])):a.props.onUpdate(t),a.setState(Object(_.a)({},e,t))}},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e),console.log(e),e.clear&&this.setState({multi:[]})}},{key:"render",value:function(){console.log(this.state);var e=this.props,t=e.classes,a=e.theme,n=this.props.inputs.map(function(e){return{value:e.label,label:e.label,id:e.id}}),i={input:function(e){return Object(ne.a)({},e,{color:a.palette.text.primary,"& input":{font:"inherit"}})}};return r.a.createElement("div",{className:t.root},r.a.createElement(ve.a,null,r.a.createElement(be.a,{classes:t,styles:i,textFieldProps:{label:"Label",InputLabelProps:{shrink:!0}},options:n,components:Ba,value:this.state.multi,onChange:this.handleChange("multi"),placeholder:this.props.placeholder,isMulti:!0})))}}]),t}(r.a.Component),Wa=Object(M.withStyles)(function(e){return{root:{flexGrow:1,height:"auto",margin:5},input:{display:"flex",padding:10},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:"".concat(e.spacing.unit/2,"px ").concat(e.spacing.unit/4,"px")},chipFocused:{backgroundColor:Object(je.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,fontSize:16,padding:10},paper:{position:"absolute",zIndex:1,marginTop:e.spacing.unit,left:0,right:0},divider:{height:2*e.spacing.unit}}},{withTheme:!0})(Fa),Va=a(156),Ua=(a(6258),function(){return r.a.createElement("div",{style:{margin:"1rem auto",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center"}},"For more examples, visit ","",r.a.createElement("br",null),r.a.createElement("a",{href:"http://th1.tracksynq.com",target:"_blank"},r.a.createElement("img",{src:"http://www.powermap.in.th/src/images/logo.png",style:{width:"150px",margin:".5em auto .3em"}})))}),Ma=function(){return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("em",null,"Tip: Hold shift when sorting to multi-sort!"))},qa=a(211),Ga=a(119),Ha=a.n(Ga),Ja=a(249),Ya=a.n(Ja),Qa=a(213),Ka=(a(273),a(172)),Xa=a.n(Ka),Za=a(328),$a=a(169),en=a.n($a),tn=a(181),an=a.n(tn),nn=a(182),rn=a.n(nn),on=a(203),ln=a.n(on),sn=a(205),cn=a.n(sn),un=a(204),pn=a.n(un),dn=a(206),mn=a.n(dn),hn=a(214),gn=a.n(hn),fn={avatar:{backgroundColor:gn.a[100],color:gn.a[600]}},bn=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){a.props.onClose(a.props.selectedValue)},a.handleListItemClick=function(e){a.props.onClose(e)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;console.log(this.props);var t=this.props,a=t.classes,n=(t.onClose,t.selectedValue,Object(d.a)(t,["classes","onClose","selectedValue"]));return r.a.createElement(It.a,Object.assign({onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},n),r.a.createElement(Bt.a,{id:"simple-dialog-title"},"Select Supplier"),r.a.createElement("div",null,r.a.createElement(an.a,null,this.props.emails.map(function(t){return r.a.createElement(rn.a,{button:!0,onClick:function(){return e.handleListItemClick(t)},key:t},r.a.createElement(ln.a,null,r.a.createElement(en.a,{className:a.avatar},r.a.createElement(pn.a,null))),r.a.createElement(cn.a,{primary:t}))}))))}}]),t}(r.a.Component),_n=Object(M.withStyles)(fn)(bn),vn=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,selectedValue:null},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(e){a.props.onUpdate(e),a.setState({selectedValue:e,open:!1})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{variant:"contained",color:"primary",style:{marginBottom:15},onClick:this.handleClickOpen},"Export (csv)",r.a.createElement(mn.a,{style:{marginLeft:10}})),r.a.createElement(_n,{selectedValue:this.state.selectedValue,open:this.state.open,onClose:this.handleClose,emails:this.props.emails}))}}]),t}(r.a.Component),yn=a(158),En=a.n(yn),xn=En.a.ExcelFile,kn=En.a.ExcelFile.ExcelSheet,Cn={year:"2-digit",month:"2-digit",day:"2-digit"},On={success:et.a,warning:st.a,error:at.a,info:rt.a};var Sn=Object(M.withStyles)(function(e){return{success:{backgroundColor:ut.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:dt.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,i=e.onClose,o=e.variant,l=Object(d.a)(e,["classes","className","message","onClose","variant"]),s=On[o];return r.a.createElement(Ze.a,Object.assign({className:y()(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(s,{className:y()(t.icon,t.iconVariant)}),n),action:[r.a.createElement(Ye.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},r.a.createElement(ot.a,{className:t.icon}))]},l))}),wn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1})},a.handleSnackbarClose=function(e,t){"clickaway"!==t&&a.setState({snackbar_open:!1})},a.chipColor=function(e){switch(e){case"new":return{backgroundColor:"#777777",color:"white"};case"delivering":return{backgroundColor:"#F0AD4E",color:"white"};case"confirm":return{backgroundColor:"#5CB85C",color:"white"};case"match":return{backgroundColor:"#5BC0DE",color:"white"};default:return{backgroundColor:"#C90D0D",color:"white"}}},a.columns=[{Header:"View",accessor:"id",Cell:function(e){return"AAPICO PLASTIC CO., LTD"===e.row.company_name?r.a.createElement(Va.a,{target:"_blank",to:{pathname:"/viewinvoiceAP",search:e.value}},r.a.createElement(Ye.a,{"aria-label":"View",color:"primary",style:{margin:0,padding:0}},r.a.createElement(Xa.a,null))):r.a.createElement(Va.a,{target:"_blank",to:{pathname:"/viewinvoice",search:e.value}},r.a.createElement(Ye.a,{"aria-label":"View",color:"primary",style:{margin:0,padding:0}},r.a.createElement(Xa.a,null)))},filterable:!1,width:60},{Header:"Factory",accessor:"company_name",filterMethod:function(e,t){return Object(qa.a)(t,e.value,{keys:["company_name"]})},filterAll:!0},{Header:"Job No.",accessor:"job_no",width:60},{Header:"Order date",id:"timestamp",accessor:"created_date",Cell:function(e){return r.a.createElement("span",null," ",new ra.a(e.value).add(-7,"hours").toDate().toLocaleDateString("en-GB",Cn).replace(/[/]/g,"-"),r.a.createElement("br",null),new ra.a(e.value).add(-7,"hours").toDate().toLocaleTimeString())},filterable:!1,width:100},{Header:"Origin",accessor:"origin",Cell:function(e){return r.a.createElement("span",null,e.value.split("|").map(function(e){return r.a.createElement(ke.a,{label:e,key:e,color:"primary"})}))},filterable:!0},{Header:"Destination",accessor:"destination",Cell:function(e){return r.a.createElement("span",null,e.value.split("|").map(function(e){return r.a.createElement(ke.a,{label:e,key:e,color:"primary"})}))},filterable:!0},{Header:"Vehicle",accessor:"plate_no",filterable:!0,width:100},{Header:"Trip",accessor:"trip_no",filterable:!1,width:60},{Header:"Return",accessor:"will_return",Cell:function(e){return r.a.createElement("span",null,e.value?"\u2714\ufe0f":"")},filterable:!1,width:60},{Header:"Status",accessor:"status",Cell:function(e){return r.a.createElement("span",null,r.a.createElement(ke.a,{label:e.value.replace("_"," "),key:e.value,style:a.chipColor(e.value)}))},filterable:!1,width:100},{Header:"Driver",accessor:"driver_name",filterable:!1,width:60},{Header:"Delete",accessor:"issuer",Cell:function(e){return r.a.createElement(Ye.a,{"aria-label":"View",color:"primary",style:{margin:0,padding:0}},e.value===localStorage.getItem("username")&&"confirm"!==e.row.status?r.a.createElement(xt.a,{onClick:function(){return a.setState({deleteRow:e,open:!0})}}):null)},filterable:!1,width:60}],a.pad_array=function(e,t,a){return e.concat(Array(t).fill(a)).slice(0,t)},a.download=function(){var e=Object(f.a)(g.a.mark(function e(t){var n,r,i,o,l,s,c,u,p,d,m,h,f,b,_,v;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=a.state.data.sort(function(e,t){return parseFloat(e.job_no)-parseFloat(t.job_no)}),console.log(n),r=[],i=0,o=0;o<n.length;o++)if(a.state.selectExport===n[o].supplier){if(i+=1,l=n[o].products.split("|"),s="",c="","AAPICO PLASTIC CO., LTD"!==n[o].company_name){for(u=0;u<l.length;u++)console.log(n[o]),"Pallet"===l[u]?(console.log(n[o].num_pallet),s+="Pallet (".concat(n[o].num_pallet,"),")):"Rack"===l[u]?s+="Rack (".concat(n[o].num_rack,"),"):"Box"===l[u]?(console.log(n[o].num_box),s+="Box (".concat(n[o].num_box,"),")):"Dies"===l[u]?s+="Dies (".concat(n[o].num_die,"),"):s+=l[u];c=n[o].invoice_no}else s=n[o].products_ap.replace(/\n/g,"|"),c=n[o].invoices_out_ap.replace(/\n/g,"|");console.log(s),console.log(n[o].trip_no),p={"#":i,Factory:n[o].company_name,Suppiler:n[o].supplier,"Invoice Number":c,"Job No":n[o].job_no,"Date Submit":new ra.a(n[o].created_date).add(-7,"hours").toDate().toLocaleDateString("en-GB",Cn).replace(/[/]/g,"-"),Origin:n[o].origin,"Des 1":n[o].destination.split("|")[0],"Des 2":n[o].destination.split("|")[1],"Des 3":n[o].destination.split("|")[2],"Des 4":n[o].destination.split("|")[3],"Des 5":n[o].destination.split("|")[4],"Des 6":n[o].destination.split("|")[5],"Des 7":n[o].destination.split("|")[6],Overnight:n[o].over_night?"Yes":"","Del Date":n[o].delivered_date?new ra.a(n[o].delivered_date).add(-7,"hours").toDate().toLocaleDateString("en-GB",Cn).replace(/[/]/g,"-"):"",Product:s,Note:n[o].note,Return:n[o].will_return?"Return":"",Overtime:n[o].over_time?"Overtime":"",Department:": "!==n[o].department?n[o].department:"","Delivery type":"special"!==n[o].delivery_type?"":n[o].delivery_type,"No of trip":n[o].trip_no,"Driver name":/\d/.test(n[o].driver_name)?"driver not register":n[o].driver_name,"Truck Plate":n[o].plate_no,"Truck Type":n[o].car_type.replace("-u","u").replace("-"," ").toUpperCase(),"Total Price":n[o].price,"Ori - In":"0"!==n[o].origin_geo_in?new ra.a(n[o].origin_geo_in).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Ori - Out":"0"!==n[o].origin_geo_out?new ra.a(n[o].origin_geo_out).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des1 - In":"0"!==n[o].dest_geo_in.split("|")[0]?new ra.a(n[o].dest_geo_in.split("|")[0]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des1 - Out":"0"!==n[o].dest_geo_out.split("|")[0]?new ra.a(n[o].dest_geo_out.split("|")[0]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des2 - In":"0"!==n[o].dest_geo_in.split("|")[1]&&n[o].dest_geo_in.split("|")[1]?new ra.a(n[o].dest_geo_in.split("|")[1]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des2 - Out":"0"!==n[o].dest_geo_out.split("|")[1]&&n[o].dest_geo_out.split("|")[1]?new ra.a(n[o].dest_geo_out.split("|")[1]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des3 - In":"0"!==n[o].dest_geo_in.split("|")[2]&&n[o].dest_geo_in.split("|")[2]?new ra.a(n[o].dest_geo_in.split("|")[2]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des3 - Out":"0"!==n[o].dest_geo_out.split("|")[2]&&n[o].dest_geo_out.split("|")[2]?new ra.a(n[o].dest_geo_out.split("|")[2]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des4 - In":"0"!==n[o].dest_geo_in.split("|")[3]&&n[o].dest_geo_in.split("|")[3]?new ra.a(n[o].dest_geo_in.split("|")[3]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des4 - Out":"0"!==n[o].dest_geo_out.split("|")[3]&&n[o].dest_geo_out.split("|")[3]?new ra.a(n[o].dest_geo_out.split("|")[3]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des5 - In":"0"!==n[o].dest_geo_in.split("|")[4]&&n[o].dest_geo_in.split("|")[4]?new ra.a(n[o].dest_geo_in.split("|")[4]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des5 - Out":"0"!==n[o].dest_geo_out.split("|")[4]&&n[o].dest_geo_out.split("|")[4]?new ra.a(n[o].dest_geo_out.split("|")[4]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des6 - In":"0"!==n[o].dest_geo_in.split("|")[5]&&n[o].dest_geo_in.split("|")[5]?new ra.a(n[o].dest_geo_in.split("|")[5]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des6 - Out":"0"!==n[o].dest_geo_out.split("|")[5]&&n[o].dest_geo_out.split("|")[5]?new ra.a(n[o].dest_geo_out.split("|")[5]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des7 - In":"0"!==n[o].dest_geo_in.split("|")[6]&&n[o].dest_geo_in.split("|")[6]?new ra.a(n[o].dest_geo_in.split("|")[6]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des7 - Out":"0"!==n[o].dest_geo_out.split("|")[6]&&n[o].dest_geo_out.split("|")[6]?new ra.a(n[o].dest_geo_out.split("|")[6]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Return-In":"0"!==n[o].return_in?new ra.a(n[o].return_in).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Return-Out":"0"!==n[o].return_out?new ra.a(n[o].return_out).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Name List For Signature of Job":n[o].issuer,Auditor:n[o].checked_by,"Seal Number":n[o].seal_no,"Delivery Status":n[o].status.replace("_"," "),"Transportation Description":"".concat(n[o].company_name,"-").concat(n[o].supplier,"-").concat(n[o].car_type.toUpperCase().replace("-"," "),"-").concat(n[o].origin,"-").concat(a.pad_array(n[o].destination.split("|").filter(function(e){return e}),7,"").join("-"),"-").concat(n[o].onReturn?"Return-":"-").concat(n[o].onOvertime?"Overtime":"")},"AAPICO PLASTIC CO., LTD"!==n[o].company_name?r.push(p):(delete p["Total Price"],p["Trip Price"]=n[o].price_trip,p["Toll Price"]=n[o].price_toll,p["Other Price"]=n[o].price_other,p["Total Price"]=parseInt(n[o].price_trip)||0+parseInt(n[o].price_toll)||0+parseInt(n[o].price_other)||0,r.push(p))}for(h in d=[{ySteps:-1,columns:[],data:[]}],m=Object.keys(r[0]),d[0].data[0]=[],m)d[0].data[0].push({value:m[h],style:{font:{sz:10,name:"Arial",bold:!0},fill:{patternType:"solid",fgColor:{rgb:"C0C0C0"}},border:{left:{style:"medium"},right:{style:"medium"},bottom:{style:"medium"},top:{style:"medium"}}}});for(b in f=0,r)for(v in _=parseInt(b),f+=1,d[0].data[f]=[],r[_])"Return"===r[_][v]?d[0].data[f].push({value:r[_][v]?r[_][v].toString():"",style:{font:{sz:10,name:"Arial"},fill:{patternType:"solid",fgColor:{rgb:"008000"}},border:{left:{style:"medium"},right:{style:"medium"}}}}):"confirm"===r[_][v]?d[0].data[f].push({value:r[_][v]?r[_][v].toString():"",style:{font:{sz:10,name:"Arial"},fill:{patternType:"solid",fgColor:{rgb:"5CB85C"}},border:{left:{style:"medium"},right:{style:"medium"}}}}):"new"===r[_][v]?d[0].data[f].push({value:r[_][v]?r[_][v].toString():"",style:{font:{sz:10,name:"Arial"},fill:{patternType:"solid",fgColor:{rgb:"777777"}},border:{left:{style:"medium"},right:{style:"medium"}}}}):"delivering"===r[_][v]?d[0].data[f].push({value:r[_][v]?r[_][v].toString():"",style:{font:{sz:10,name:"Arial"},fill:{patternType:"solid",fgColor:{rgb:"F0AD4E"}},border:{left:{style:"medium"},right:{style:"medium"}}}}):"GPS error"===r[_][v]?d[0].data[f].push({value:r[_][v]?r[_][v].toString():"",style:{font:{sz:10,name:"Arial"},fill:{patternType:"solid",fgColor:{rgb:"C90D0D"}},border:{left:{style:"medium"},right:{style:"medium"}}}}):"match"===r[_][v]?d[0].data[f].push({value:r[_][v]?r[_][v].toString():"",style:{font:{sz:10,name:"Arial"},fill:{patternType:"solid",fgColor:{rgb:"5BC0DE"}},border:{left:{style:"medium"},right:{style:"medium"}}}}):d[0].data[f].push({value:r[_][v]?r[_][v].toString():"",style:{font:{sz:10,name:"Arial"},border:{left:{style:"medium"},right:{style:"medium"}}}});console.log(r),console.log(d[0]),a.setState({excelData:d});case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onUpdate=function(e){console.log(e),e&&a.setState({selectExport:e},a.download)},a.download=a.download.bind(Object(re.a)(Object(re.a)(a))),a.state={data:e.data,dataToDownload:[],selectExport:"",open:!1,deleteRow:null,snackbar_open:!1,alert:""},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this;console.log(this.props.data),console.log(Sn),console.log(this.state);var t=this.state.selectExport+"-"+this.props.startDate+"-"+this.props.endDate+".csv",a=Object(b.a)(new Set(this.state.data.map(function(e){return e.supplier})));return r.a.createElement("div",null,r.a.createElement(Ke.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.snackbar_open,autoHideDuration:3e3,onClose:this.handleSnackbarClose},r.a.createElement(Sn,{onClose:this.handleSnackbarClose,variant:"success",message:this.state.alert})),this.state.deleteRow?r.a.createElement(It.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Bt.a,{id:"alert-dialog-title"},"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e01\u0e32\u0e23\u0e25\u0e1a\u0e43\u0e1a\u0e07\u0e32\u0e19?"),r.a.createElement(Lt.a,null,r.a.createElement(Ha.a,{id:"alert-dialog-description"},"\u0e04\u0e38\u0e13\u0e41\u0e19\u0e48\u0e43\u0e08\u0e27\u0e48\u0e32\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e25\u0e1a\u0e43\u0e1a\u0e07\u0e32\u0e19\u0e19\u0e35\u0e49?")),r.a.createElement(Tt.a,null,r.a.createElement(C.a,{onClick:this.handleClose,color:"primary"},"\u0e44\u0e21\u0e48\u0e43\u0e0a\u0e48"),r.a.createElement(C.a,{onClick:function(){var t=e;G.a.delete("".concat(H.url,"/orders/").concat(e.state.deleteRow.row.id)).then(function(e){t.setState({alert:"successfully deleted",snackbar_open:!0,open:!1})}).then(function(){e.setState(function(t){var a=t.data.filter(function(t,a){return e.state.deleteRow.index!==a});return console.log(a),{data:a}})})},color:"primary",autoFocus:!0},"\u0e43\u0e0a\u0e48"))):null,r.a.createElement("div",null,r.a.createElement(vn,{emails:a,onUpdate:this.onUpdate}),this.state.excelData?r.a.createElement(xn,{element:r.a.createElement("button",null,"Download Data With Styles"),hideElement:!0,filename:t},r.a.createElement(kn,{dataSet:this.state.excelData,name:this.state.selectExport})):null),r.a.createElement("div",null,r.a.createElement(Za.CSVLink,{data:this.state.dataToDownload,filename:t,className:"hidden",ref:function(t){return e.csvLink=t},target:"_blank"})),r.a.createElement("div",null,r.a.createElement(Ya.a,null,r.a.createElement(Qa.a,{ref:function(t){e.reactTable=t},data:this.state.data,filterable:!0,defaultFilterMethod:function(e,t){return String(t[e.id])===e.value},columns:[{Header:"Search results",columns:this.columns}],defaultSorted:[{id:"timestamp",desc:!0}],defaultPageSize:50,className:"-striped -highlight"}))))}}]),t}(r.a.Component),jn=[{label:"new",id:"status"},{label:"GPS_error",id:"status"},{label:"match",id:"status"},{label:"confirm",id:"status"},{label:"void",id:"status"},{label:"delivering",id:"status"}].map(function(e){return{value:e.label,label:e.label,id:e.id}}),Nn=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={status:"",supplier:"",start_date:(new ra.a).add(0,"hours").toDate().toISOString().slice(0,10),end_date:(new ra.a).add(0,"hours").toDate().toISOString().slice(0,10),plate_no:"",destination:"",job_no:"",suppliers:[],plate_nos:[],destinations:[],data:[],isClear:!1,loading:!0},a.handleChange=function(e){return function(t){a.setState(Object(_.a)({},e,t.target.value))}},a.componentWillMount=Object(f.a)(g.a.mark(function e(){var t,n,r,i,o,l;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="undefined"===localStorage.getItem("companyID")||"null"===localStorage.getItem("companyID")?G.a.get("".concat(H.url,"/suppliers?").concat("id="+localStorage.getItem("supplierID"))).then(function(e){return e.data.map(function(e){return{label:e.name,id:"supplier"}})}):G.a.get("".concat(H.url,"/companies?id=").concat(localStorage.getItem("companyID"))).then(function(e){return e.data[0].supplier.map(function(e){return console.log(e),{label:e.name,id:"supplier"}})}),n=[],r=[],i=null,o=[],l=[],"undefined"!==localStorage.getItem("companyID")&&"null"!==localStorage.getItem("companyID")){e.next=14;break}return e.next=9,G.a.get("".concat(H.url,"/suppliers?").concat("id="+localStorage.getItem("supplierID"))).then(function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.data.map(function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.push(t.name),n.push(t.appid);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 9:console.log(t),o=G.a.get("".concat(H.url,"/pois?_sort=name:DESC&_limit=1000&appid=").concat(n.join("&appid="))).then(function(e){return e.data.map(function(e){return{label:e.name,id:"poi"}})}),l=G.a.get("".concat(H.url,"/vehicles?_sort=plate_no:DESC&_limit=1000&appid=").concat(n.join("&appid="))).then(function(e){return e.data.map(function(e){return{label:e.plate_no,id:"vehicle"}})}),e.next=18;break;case 14:return e.next=16,G.a.get("".concat(H.url,"/companies?id=").concat(localStorage.getItem("companyID"))).then(function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.data[0].supplier.map(function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.push(t.name),n.push(t.appid);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),i=t.data[0].abbr;case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 16:o=G.a.get("".concat(H.url,"/pois?company_name_contains=").concat(i,"&_sort=name:DESC&_limit=1000&appid=").concat(n.join("&appid="))).then(function(e){return e.data.map(function(e){return{label:e.name,id:"poi"}})}),l=G.a.get("".concat(H.url,"/vehicles?company_name_contains=").concat(i,"&_sort=plate_no:DESC&_limit=1000&appid=").concat(n.join("&appid="))).then(function(e){return e.data.map(function(e){return{label:e.plate_no,id:"vehicle"}})});case 18:Promise.all([t]).then(function(e){a.setState({suppliers:e[0]})}).then(function(){G.a.get("".concat(H.url,"/orders?created_date_gt=").concat((new ra.a).add(0,"hours").toDate().toISOString().slice(0,10)).concat("undefined"===localStorage.getItem("companyID")||"null"===localStorage.getItem("companyID")?"&supplier="+r.join("&supplier="):"&company_id="+localStorage.getItem("companyID"),"&_sort=created_date:DESC")).then(function(e){console.log(e.data),a.setState({data:e.data,loading:!1})})}),Promise.all([o,l]).then(function(e){console.log(e),a.setState({destinations:Object.values(e[0].reduce(function(e,t){return Object.assign(e,Object(_.a)({},t.label,t))},{})),plate_nos:e[1]})});case 20:case"end":return e.stop()}},e)})),a.onUpdate=function(e){switch(a.setState({isClear:!1}),console.log(e),e[0].id){case"status":var t=""===e[0].value?"":e.map(function(e){return e.value});a.setState({status:t});break;case"vehicle":var n=""===e[0].value?"":e.map(function(e){return e.value});a.setState({plate_no:n});break;case"poi":var r=""===e[0].value?"":e.map(function(e){return e.value});a.setState({destination:r});break;case"supplier":var i=""===e[0].value?"":e.map(function(e){return e.value});a.setState({supplier:i});break;default:return null}},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(){var e,t,a=this,n=this.state.job_no?"job_no=".concat(this.state.job_no):"";e="created_date_gte=".concat(ra()(this.state.start_date).startOf("day")),t="created_date_lte=".concat(ra()(this.state.end_date).endOf("day"));var r=this.state.status?this.state.status.map(function(e){return"status=".concat(e,"&")}).join(""):"",i=this.state.supplier?this.state.supplier.map(function(e){return"supplier=".concat(e,"&")}).join(""):"",o=this.state.plate_no?this.state.plate_no.map(function(e){return"plate_no=".concat(e,"&")}).join(""):"",l=(this.state.destination?this.state.destination.map(function(e){return"destination_containss=".concat(e,"&")}).join(""):"")+o+r+i+n+"&"+e+"&"+t+"&"+("undefined"===localStorage.getItem("companyID")||"null"===localStorage.getItem("companyID")?"&supplier="+this.state.suppliers[0].label:"company_id="+localStorage.getItem("companyID"))+"&_limit=1000000";console.log(l),this.setState({loading:!0}),G.a.get("".concat(H.url,"/orders?").concat(l,"&_sort=created_date:DESC")).then(function(e){console.log(e),a.setState({data:e.data,loading:!1})})}},{key:"render",value:function(){var e=this,t=this.props.classes;return console.log(this.props),console.log(this.state),r.a.createElement(He.h,{container:!0,style:{justifyContent:"center"}},r.a.createElement(oe.a,{className:t.root,elevation:1},r.a.createElement(U.a,{variant:"h5",component:"h3"},"Orders search"),r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},r.a.createElement(He.h,{container:!0,style:{justifyContent:"center"}},r.a.createElement(He.h,{item:!0,xs:2,className:t.searchBox},r.a.createElement(Ee.a,{id:"standard-number",label:"Job No.",value:this.state.job_no,onChange:this.handleChange("job_no"),type:"text",className:t.textField,InputLabelProps:{shrink:!0},fullWidth:!0,variant:"outlined"})),r.a.createElement(He.h,{xs:4,className:t.searchBox,item:!0},r.a.createElement(Ee.a,{id:"date",label:"Start Date",type:"date",value:this.state.start_date,className:t.textField,onChange:this.handleChange("start_date"),InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.a.createElement(He.h,{xs:4,className:t.searchBox,item:!0},r.a.createElement(Ee.a,{id:"date",label:"End Date",type:"date",className:t.textField,value:this.state.end_date,onChange:this.handleChange("end_date"),InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0}))),r.a.createElement(He.h,{container:!0,style:{justifyContent:"center"}},r.a.createElement(He.h,{item:!0,xs:2},r.a.createElement(Wa,{inputs:jn,placeholder:"select status",onUpdate:this.onUpdate,clear:this.state.isClear})),r.a.createElement(He.h,{item:!0,xs:3},r.a.createElement(Wa,{inputs:this.state.suppliers,placeholder:"select suppliers",onUpdate:this.onUpdate,clear:this.state.isClear})),r.a.createElement(He.h,{item:!0,xs:3},r.a.createElement(Wa,{inputs:this.state.plate_nos,placeholder:"select vehicles",onUpdate:this.onUpdate,clear:this.state.isClear})),r.a.createElement(He.h,{item:!0,xs:4},r.a.createElement(Wa,{inputs:this.state.destinations,placeholder:"select destinations",onUpdate:this.onUpdate,clear:this.state.isClear})))),r.a.createElement(C.a,{variant:"contained",color:"primary",className:t.button,onClick:function(){return e.handleSubmit()}},"Search",r.a.createElement(Ta.a,{className:t.rightIcon})),r.a.createElement(C.a,{variant:"contained",color:"default",className:t.button,onClick:function(){e.setState({status:"",supplier:"",start_date:(new ra.a).add(0,"hours").toDate().toISOString().slice(0,10),end_date:(new ra.a).add(0,"hours").toDate().toISOString().slice(0,10),plate_no:"",destination:"",job_no:"",isClear:!0})}},"Clear Filter",r.a.createElement(xt.a,{className:t.rightIcon})),"supplier"===localStorage.getItem("role")||"purchaser"===localStorage.getItem("role")?null:r.a.createElement(C.a,{variant:"contained",color:"primary",className:t.button,onClick:function(){return e.props.history.push("addinvoice")}},"New Order",r.a.createElement(La.a,{className:t.rightIcon}))),r.a.createElement(oe.a,{className:t.root,elevation:1},this.state.loading?r.a.createElement(W.a,{color:"secondary"}):r.a.createElement(wn,{data:this.state.data,history:this.props.history,startDate:this.state.start_date,endDate:this.state.end_date})))}}]),t}(n.Component),Dn=Object(M.withStyles)(function(e){return{root:Object(ne.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,textAlign:"center",marginBottom:"10px",marginTop:"10px",width:"80%"}),button:{margin:e.spacing.unit},leftIcon:{marginRight:e.spacing.unit},rightIcon:{marginLeft:e.spacing.unit},iconSmall:{fontSize:20},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},dense:{marginTop:16},menu:{width:200},searchBox:{margin:"10px"}}})(Nn);a(274);function Pn(e){var t=e.inputRef,a=Object(d.a)(e,["inputRef"]);return r.a.createElement("div",Object.assign({ref:t},a))}var In={Control:function(e){return r.a.createElement(Ee.a,{label:null,variant:"outlined",fullWidth:!0,InputProps:{inputComponent:Pn,inputProps:Object(ne.a)({className:e.selectProps.classes.input,inputRef:e.innerRef,children:e.children},e.innerProps)}})},Menu:function(e){return r.a.createElement(oe.a,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)},MultiValue:function(e){return r.a.createElement(ke.a,{tabIndex:-1,label:e.children,className:y()(e.selectProps.classes.chip,Object(_.a)({},e.selectProps.classes.chipFocused,e.isFocused)),onDelete:e.removeProps.onClick,deleteIcon:r.a.createElement(we.a,e.removeProps)})},NoOptionsMessage:function(e){return r.a.createElement(U.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return r.a.createElement(Oe.a,Object.assign({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps),e.children)},Placeholder:function(e){return r.a.createElement(U.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return r.a.createElement(U.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return r.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}},An=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={single:null,multi:null},a.handleChange=function(e){return function(t){console.log(t);var n=a.props.inputs;0===t.length?(console.log("send from here"),a.props.onUpdate([{id:n[0].id,value:""}])):a.props.onUpdate(t),a.setState(Object(_.a)({},e,t))}},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e),console.log(e),e.clear&&this.setState({multi:[]})}},{key:"render",value:function(){console.log(this.state);var e=this.props,t=e.classes,a=e.theme,n=this.props.inputs.map(function(e){return{value:e.label,label:e.label,id:e.id}}),i={input:function(e){return Object(ne.a)({},e,{color:a.palette.text.primary,"& input":{font:"inherit"}})}};return r.a.createElement("div",{className:t.root},r.a.createElement(ve.a,null,r.a.createElement(be.a,{classes:t,styles:i,textFieldProps:{label:"Label",InputLabelProps:{shrink:!0}},options:n,components:In,value:this.state.multi,onChange:this.handleChange("multi"),placeholder:this.props.placeholder,isMulti:!0})))}}]),t}(r.a.Component),Tn=Object(M.withStyles)(function(e){return{root:{flexGrow:1,height:"auto",margin:5},input:{display:"flex",padding:10},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:"".concat(e.spacing.unit/2,"px ").concat(e.spacing.unit/4,"px")},chipFocused:{backgroundColor:Object(je.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,fontSize:16,padding:10},paper:{position:"absolute",zIndex:1,marginTop:e.spacing.unit,left:0,right:0},divider:{height:2*e.spacing.unit}}},{withTheme:!0})(An),Rn={avatar:{backgroundColor:gn.a[100],color:gn.a[600]}},Ln=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){a.props.onClose(a.props.selectedValue)},a.handleListItemClick=function(e){a.props.onClose(e)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;console.log(this.props);var t=this.props,a=t.classes,n=(t.onClose,t.selectedValue,Object(d.a)(t,["classes","onClose","selectedValue"]));return r.a.createElement(It.a,Object.assign({onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},n),r.a.createElement(Bt.a,{id:"simple-dialog-title"},"Select Supplier"),r.a.createElement("div",null,r.a.createElement(an.a,null,this.props.emails.map(function(t){return r.a.createElement(rn.a,{button:!0,onClick:function(){return e.handleListItemClick(t)},key:t},r.a.createElement(ln.a,null,r.a.createElement(en.a,{className:a.avatar},r.a.createElement(pn.a,null))),r.a.createElement(cn.a,{primary:t}))}))))}}]),t}(r.a.Component),zn=Object(M.withStyles)(Rn)(Ln),Bn=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,selectedValue:null},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(e){a.props.onUpdate(e),a.setState({selectedValue:e,open:!1})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{variant:"contained",color:"primary",style:{marginBottom:15},onClick:this.handleClickOpen},"Export (csv)",r.a.createElement(mn.a,{style:{marginLeft:10}})),r.a.createElement(zn,{selectedValue:this.state.selectedValue,open:this.state.open,onClose:this.handleClose,emails:this.props.emails}))}}]),t}(r.a.Component),Fn=a(320),Wn=a.n(Fn),Vn=En.a.ExcelFile,Un=En.a.ExcelFile.ExcelSheet,Mn={year:"2-digit",month:"2-digit",day:"2-digit"},qn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).chipColor=function(e){switch(e){case"new":return{backgroundColor:"#777777",color:"white"};case"delivering":return{backgroundColor:"#F0AD4E",color:"white"};case"confirm":return{backgroundColor:"#5CB85C",color:"white"};case"match":return{backgroundColor:"#5BC0DE",color:"white"};default:return{backgroundColor:"#C90D0D",color:"white"}}},a.columns=[{Header:"Factory",accessor:"company_name",filterMethod:function(e,t){return Object(qa.a)(t,e.value,{keys:["company_name"]})},filterAll:!0},{Header:"Job No.",accessor:"job_no",width:60},{Header:"Order date",id:"timestamp",accessor:"created_date",Cell:function(e){return r.a.createElement("span",null," ",new ra.a(e.value).add(-7,"hours").toDate().toLocaleDateString("en-GB",Mn).replace(/[/]/g,"-"),r.a.createElement("br",null),new ra.a(e.value).add(-7,"hours").toDate().toLocaleTimeString())},filterable:!1,width:100},{Header:"Origin",accessor:"origin",Cell:function(e){return r.a.createElement("span",null,e.value.split("|").map(function(e){return r.a.createElement(ke.a,{label:e,key:e,color:"primary"})}))},filterable:!0},{Header:"Origin Geo Time",accessor:"id",Cell:function(e){return r.a.createElement("div",null,r.a.createElement("span",null,"0"!==e.row._original.origin_geo_in?new ra.a(e.row._original.origin_geo_in).add(0,"hours").toDate().toLocaleTimeString():"-"),r.a.createElement("br",null),r.a.createElement("span",null,"0"!==e.row._original.origin_geo_out?new ra.a(e.row._original.origin_geo_out).add(0,"hours").toDate().toLocaleTimeString():"-"))},filterable:!0},{Header:"Destination",accessor:"destination",Cell:function(e){return r.a.createElement("span",null,e.value.split("|").map(function(e){return r.a.createElement(ke.a,{label:e,key:e,color:"primary"})}))},filterable:!0},{Header:"Destination Geo Time",accessor:"id",Cell:function(e){return r.a.createElement("div",null,r.a.createElement("span",null,"0"!==e.row._original.dest_geo_in?e.row._original.dest_geo_in.split("|").map(function(e,t){return(0!==t?"|":"")+("0"!==e?new ra.a(e).add(0,"hours").toDate().toLocaleTimeString():"-")}):"-"),r.a.createElement("br",null),r.a.createElement("span",null,"0"!==e.row._original.dest_geo_out?e.row._original.dest_geo_out.split("|").map(function(e,t){return(0!==t?"|":"")+("0"!==e?new ra.a(e).add(0,"hours").toDate().toLocaleTimeString():"-")}):"-"))},filterable:!0},{Header:"Vehicle",accessor:"plate_no",filterable:!0,width:100},{Header:"Trip",accessor:"trip_no",filterable:!1,width:60},{Header:"Return",accessor:"will_return",Cell:function(e){return r.a.createElement("span",null,e.value?"\u2714\ufe0f":null)},filterable:!1,width:60},{Header:"Delivered date",accessor:"delivered_date",Cell:function(e){return r.a.createElement("span",null," ",e.value?new ra.a(e.value).add(-7,"hours").toDate().toLocaleDateString("en-GB",Mn).replace(/[/]/g,"-"):"")},filterable:!1,width:100},{Header:"Supplier",accessor:"supplier",filterable:!1},{Header:"Driver",accessor:"driver_name",filterable:!1,width:60},{Header:"Status",accessor:"status",Cell:function(e){return r.a.createElement("span",null,r.a.createElement(ke.a,{label:e.value.replace("_"," "),key:e.value,style:a.chipColor(e.value)}))},filterable:!1,width:100},{Header:"View",accessor:"id",Cell:function(e){return"AAPICO PLASTIC CO., LTD"===e.row.company_name?r.a.createElement(Va.a,{target:"_blank",to:{pathname:"/viewinvoiceAP",search:e.value}},r.a.createElement(Ye.a,{"aria-label":"View",color:"primary",style:{margin:0,padding:0}},r.a.createElement(Xa.a,null))):r.a.createElement(Va.a,{target:"_blank",to:{pathname:"/viewinvoice",search:e.value}},r.a.createElement(Ye.a,{"aria-label":"View",color:"primary",style:{margin:0,padding:0}},r.a.createElement(Xa.a,null)))},filterable:!1,width:60},{Header:"Reset",accessor:"id",Cell:function(e){return r.a.createElement(Ye.a,{"aria-label":"View",color:"primary",style:{margin:0,padding:0}},r.a.createElement(Wn.a,{onClick:function(){a.setState({open:!0,resetRow:e.row._original,resetRowIndex:e.index})}}))},filterable:!1,width:60},{Header:"Delete",accessor:"issuer",Cell:function(e){return r.a.createElement(Ye.a,{"aria-label":"View",color:"primary",style:{margin:0,padding:0}},e.value===localStorage.getItem("username")?r.a.createElement(xt.a,null):null)},filterable:!1,width:60}],a.pad_array=function(e,t,a){return e.concat(Array(t).fill(a)).slice(0,t)},a.download=function(){var e=Object(f.a)(g.a.mark(function e(t){var n,r,i,o,l,s,c,u,p,d,m,h,f,b,_,v;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=a.state.data.sort(function(e,t){return parseFloat(e.job_no)-parseFloat(t.job_no)}),console.log(n),r=[],i=0,o=0;o<n.length;o++)if(a.state.selectExport===n[o].supplier){if(i+=1,console.log(a.state.selectExport),console.log(n[o].job_no),console.log(n[o]),l=n[o].products.split("|"),s="",c="","AAPICO PLASTIC CO., LTD"!==n[o].company_name){for(u=0;u<l.length;u++)console.log(n[o]),"Pallet"===l[u]?(console.log(n[o].num_pallet),s+="Pallet (".concat(n[o].num_pallet,"),")):"Rack"===l[u]?s+="Rack (".concat(n[o].num_rack,"),"):"Box"===l[u]?(console.log(n[o].num_box),s+="Box (".concat(n[o].num_box,"),")):"Dies"===l[u]?s+="Dies (".concat(n[o].num_die,"),"):s+=l[u];c=n[o].invoice_no.replace(/\n/g,"|")}else s=n[o].products_ap.replace(/\n/g,"|"),c=n[o].invoices_out_ap.replace(/\n/g,"|");console.log(s),console.log(n[o].trip_no),p={"#":i,Factory:n[o].company_name,Suppiler:n[o].supplier,"Invoice Number":c,"Job No":n[o].job_no,"Date Submit":new ra.a(n[o].created_date).add(-7,"hours").toDate().toLocaleDateString("en-GB",Mn).replace(/[/]/g,"-"),Origin:n[o].origin,"Des 1":n[o].destination.split("|")[0],"Des 2":n[o].destination.split("|")[1],"Des 3":n[o].destination.split("|")[2],"Des 4":n[o].destination.split("|")[3],"Des 5":n[o].destination.split("|")[4],"Des 6":n[o].destination.split("|")[5],"Des 7":n[o].destination.split("|")[6],Overnight:n[o].over_night?"Yes":"","Del Date":n[o].delivered_date?new ra.a(n[o].delivered_date).add(-7,"hours").toDate().toLocaleDateString("en-GB",Mn).replace(/[/]/g,"-"):"",Product:s,Note:n[o].note,Return:n[o].will_return?"Return":"",Overtime:n[o].over_time?"Overtime":"",Department:": "!==n[o].department?n[o].department:"","Delivery type":"special"!==n[o].delivery_type?"":n[o].delivery_type,"No of trip":n[o].trip_no,"Driver name":/\d/.test(n[o].driver_name)?"driver not register":n[o].driver_name,"Truck Plate":n[o].plate_no,"Truck Type":n[o].car_type.replace("-u","u").replace("-"," ").toUpperCase(),"Total Price":n[o].price,"Ori - In":"0"!==n[o].origin_geo_in?new ra.a(n[o].origin_geo_in).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Ori - Out":"0"!==n[o].origin_geo_out?new ra.a(n[o].origin_geo_out).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des1 - In":"0"!==n[o].dest_geo_in.split("|")[0]?new ra.a(n[o].dest_geo_in.split("|")[0]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des1 - Out":"0"!==n[o].dest_geo_out.split("|")[0]?new ra.a(n[o].dest_geo_out.split("|")[0]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des2 - In":"0"!==n[o].dest_geo_in.split("|")[1]&&n[o].dest_geo_in.split("|")[1]?new ra.a(n[o].dest_geo_in.split("|")[1]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des2 - Out":"0"!==n[o].dest_geo_out.split("|")[1]&&n[o].dest_geo_out.split("|")[1]?new ra.a(n[o].dest_geo_out.split("|")[1]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des3 - In":"0"!==n[o].dest_geo_in.split("|")[2]&&n[o].dest_geo_in.split("|")[2]?new ra.a(n[o].dest_geo_in.split("|")[2]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des3 - Out":"0"!==n[o].dest_geo_out.split("|")[2]&&n[o].dest_geo_out.split("|")[2]?new ra.a(n[o].dest_geo_out.split("|")[2]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des4 - In":"0"!==n[o].dest_geo_in.split("|")[3]&&n[o].dest_geo_in.split("|")[3]?new ra.a(n[o].dest_geo_in.split("|")[3]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des4 - Out":"0"!==n[o].dest_geo_out.split("|")[3]&&n[o].dest_geo_out.split("|")[3]?new ra.a(n[o].dest_geo_out.split("|")[3]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des5 - In":"0"!==n[o].dest_geo_in.split("|")[4]&&n[o].dest_geo_in.split("|")[4]?new ra.a(n[o].dest_geo_in.split("|")[4]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des5 - Out":"0"!==n[o].dest_geo_out.split("|")[4]&&n[o].dest_geo_out.split("|")[4]?new ra.a(n[o].dest_geo_out.split("|")[4]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des6 - In":"0"!==n[o].dest_geo_in.split("|")[5]&&n[o].dest_geo_in.split("|")[5]?new ra.a(n[o].dest_geo_in.split("|")[5]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des6 - Out":"0"!==n[o].dest_geo_out.split("|")[5]&&n[o].dest_geo_out.split("|")[5]?new ra.a(n[o].dest_geo_out.split("|")[5]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des7 - In":"0"!==n[o].dest_geo_in.split("|")[6]&&n[o].dest_geo_in.split("|")[6]?new ra.a(n[o].dest_geo_in.split("|")[6]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Des7 - Out":"0"!==n[o].dest_geo_out.split("|")[6]&&n[o].dest_geo_out.split("|")[6]?new ra.a(n[o].dest_geo_out.split("|")[6]).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Return-In":"0"!==n[o].return_in?new ra.a(n[o].return_in).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Return-Out":"0"!==n[o].return_out?new ra.a(n[o].return_out).add(0,"hours").toDate().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"","Name List For Signature of Job":n[o].issuer,Auditor:n[o].checked_by,"Seal Number":n[o].seal_no,"Delivery Status":n[o].status.replace("_"," "),"Transportation Description":"".concat(n[o].company_name,"-").concat(n[o].supplier,"-").concat(n[o].car_type.toUpperCase().replace("-"," "),"-").concat(n[o].origin,"-").concat(a.pad_array(n[o].destination.split("|").filter(function(e){return e}),7,"").join("-"),"-").concat(n[o].onReturn?"Return-":"-").concat(n[o].onOvertime?"Overtime":"")},r.push(p)}for(h in d=[{ySteps:-1,columns:[],data:[]}],m=Object.keys(r[0]),d[0].data[0]=[],m)d[0].data[0].push({value:m[h],style:{font:{sz:10,name:"Arial",bold:!0},fill:{patternType:"solid",fgColor:{rgb:"C0C0C0"}},border:{left:{style:"medium"},right:{style:"medium"},bottom:{style:"medium"},top:{style:"medium"}}}});for(b in f=0,r)for(v in _=parseInt(b),f+=1,d[0].data[f]=[],r[_])"Return"===r[_][v]?d[0].data[f].push({value:r[_][v]?r[_][v].toString():"",style:{font:{sz:10,name:"Arial"},fill:{patternType:"solid",fgColor:{rgb:"008000"}},border:{left:{style:"medium"},right:{style:"medium"}}}}):"confirm"===r[_][v]?d[0].data[f].push({value:r[_][v]?r[_][v].toString():"",style:{font:{sz:10,name:"Arial"},fill:{patternType:"solid",fgColor:{rgb:"5CB85C"}},border:{left:{style:"medium"},right:{style:"medium"}}}}):"new"===r[_][v]?d[0].data[f].push({value:r[_][v]?r[_][v].toString():"",style:{font:{sz:10,name:"Arial"},fill:{patternType:"solid",fgColor:{rgb:"777777"}},border:{left:{style:"medium"},right:{style:"medium"}}}}):"delivering"===r[_][v]?d[0].data[f].push({value:r[_][v]?r[_][v].toString():"",style:{font:{sz:10,name:"Arial"},fill:{patternType:"solid",fgColor:{rgb:"F0AD4E"}},border:{left:{style:"medium"},right:{style:"medium"}}}}):"GPS error"===r[_][v]?d[0].data[f].push({value:r[_][v]?r[_][v].toString():"",style:{font:{sz:10,name:"Arial"},fill:{patternType:"solid",fgColor:{rgb:"C90D0D"}},border:{left:{style:"medium"},right:{style:"medium"}}}}):"match"===r[_][v]?d[0].data[f].push({value:r[_][v]?r[_][v].toString():"",style:{font:{sz:10,name:"Arial"},fill:{patternType:"solid",fgColor:{rgb:"5BC0DE"}},border:{left:{style:"medium"},right:{style:"medium"}}}}):d[0].data[f].push({value:r[_][v]?r[_][v].toString():"",style:{font:{sz:10,name:"Arial"},border:{left:{style:"medium"},right:{style:"medium"}}}});a.setState({excelData:d});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onUpdate=function(e){console.log(e),e&&a.setState({selectExport:e},a.download)},a.handleClose=function(){a.setState({open:!1})},a.download=a.download.bind(Object(re.a)(Object(re.a)(a))),a.state={data:e.data,dataToDownload:[],selectExport:"",open:!1,resetRow:null},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this;console.log(this.props.data),console.log(this.state);var t=this.state.selectExport+"-"+this.props.startDate+"-"+this.props.endDate+".csv",a=Object(b.a)(new Set(this.state.data.map(function(e){return e.supplier})));return r.a.createElement("div",null,this.state.resetRow?r.a.createElement(It.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Bt.a,{id:"alert-dialog-title"},"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e01\u0e32\u0e23\u0e25\u0e1a\u0e43\u0e1a\u0e07\u0e32\u0e19?"),r.a.createElement(Lt.a,null,r.a.createElement(Ha.a,{id:"alert-dialog-description"},"\u0e04\u0e38\u0e13\u0e41\u0e19\u0e48\u0e43\u0e08\u0e27\u0e48\u0e32\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23 Update \u0e43\u0e1a\u0e07\u0e32\u0e19\u0e19\u0e35\u0e49?")),r.a.createElement(Tt.a,null,r.a.createElement(C.a,{onClick:this.handleClose,color:"primary"},"\u0e44\u0e21\u0e48\u0e43\u0e0a\u0e48"),r.a.createElement(C.a,{onClick:function(){console.log("click"),console.log(e.state.resetRow);var t=e;G.a.post("".concat(H.url,"/orders/resettime"),{order_id:e.state.resetRow.id,dest_geo_in:e.state.resetRow.dest_geo_in,dest_geo_out:e.state.resetRow.dest_geo_out}).then(function(e){alert("reset successfully"),t.setState({open:!1})}).then(function(){e.setState(function(t){var a=t.data.map(function(t,a){return e.state.resetRowIndex===a&&(t.origin_geo_in="0",t.origin_geo_out="0",t.dest_geo_in="0",t.dest_geo_out="0",t.driver_name="",t.status="new"),t});return console.log(a),{data:a}})})},color:"primary",autoFocus:!0},"\u0e43\u0e0a\u0e48"))):null,r.a.createElement("div",null,r.a.createElement(Bn,{emails:a,onUpdate:this.onUpdate}),this.state.excelData?r.a.createElement(Vn,{element:r.a.createElement("button",null,"Download Data With Styles"),hideElement:!0,filename:t},r.a.createElement(Un,{dataSet:this.state.excelData,name:"Organization"})):null),r.a.createElement("div",null,r.a.createElement(Za.CSVLink,{data:this.state.dataToDownload,filename:t,className:"hidden",ref:function(t){return e.csvLink=t},target:"_blank"})),r.a.createElement("div",null,r.a.createElement(Ya.a,null,r.a.createElement(Qa.a,{ref:function(t){e.reactTable=t},data:this.props.data,filterable:!0,defaultFilterMethod:function(e,t){return String(t[e.id])===e.value},columns:[{Header:"Search results",columns:this.columns}],defaultSorted:[{id:"timestamp",desc:!0}],defaultPageSize:50,className:"-striped -highlight"}))))}}]),t}(r.a.Component),Gn=[{label:"new",id:"status"},{label:"GPS_error",id:"status"},{label:"match",id:"status"},{label:"confirm",id:"status"},{label:"void",id:"status"},{label:"delivering",id:"status"}].map(function(e){return{value:e.label,label:e.label,id:e.id}}),Hn=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={status:"",supplier:"",start_date:(new ra.a).add(0,"hours").toDate().toISOString().slice(0,10),end_date:(new ra.a).add(0,"hours").toDate().toISOString().slice(0,10),plate_no:"",destination:"",job_no:"",suppliers:[],plate_nos:[],destinations:[],companies:[],data:[],isClear:!1,loading:!0},a.handleChange=function(e){return function(t){a.setState(Object(_.a)({},e,t.target.value))}},a.componentWillMount=Object(f.a)(g.a.mark(function e(){var t,n,r,i,o,l;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=G.a.get("".concat(H.url,"/suppliers")).then(function(e){return e.data.map(function(e){return{label:e.name,id:"supplier"}})}),n=[],r=[],e.next=5,G.a.get("".concat(H.url,"/suppliers")).then(function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.data.map(function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),r.push(t.name),n.push(t.appid);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 5:console.log(r),i=G.a.get("".concat(H.url,"/pois?_sort=name:DESC&_limit=1000&appid=").concat(n.join("&appid="))).then(function(e){return e.data.map(function(e){return{label:e.name,id:"poi"}})}),o=G.a.get("".concat(H.url,"/vehicles?_sort=plate_no:DESC&_limit=1000&appid=").concat(n.join("&appid="))).then(function(e){return e.data.map(function(e){return{label:e.plate_no,id:"vehicle"}})}),l=G.a.get("".concat(H.url,"/companies?_sort=plate_no:DESC&_limit=1000")).then(function(e){return e.data.map(function(e){return{label:e.name,id:"company"}})}),Promise.all([t,i,o,l]).then(function(e){a.setState({suppliers:e[0],destinations:Object.values(e[1].reduce(function(e,t){return Object.assign(e,Object(_.a)({},t.label,t))},{})),plate_nos:e[2],companies:e[3]})}),G.a.get("".concat(H.url,"/orders?created_date_gt=").concat((new ra.a).add(0,"hours").toDate().toISOString().slice(0,10),"&_sort=created_date:DESC")).then(function(e){console.log(e.data),a.setState({data:e.data,loading:!1})});case 11:case"end":return e.stop()}},e)})),a.onUpdate=function(e){switch(a.setState({isClear:!1}),console.log(e),e[0].id){case"status":var t=""===e[0].value?"":e.map(function(e){return e.value});a.setState({status:t});break;case"vehicle":var n=""===e[0].value?"":e.map(function(e){return e.value});a.setState({plate_no:n});break;case"poi":var r=""===e[0].value?"":e.map(function(e){return e.value});a.setState({destination:r});break;case"supplier":var i=""===e[0].value?"":e.map(function(e){return e.value});a.setState({supplier:i});break;case"company":var o=""===e[0].value?"":e.map(function(e){return e.value});a.setState({company:o});break;default:return null}},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(){var e,t,a=this,n=this.state.job_no?"job_no=".concat(this.state.job_no):"";e="created_date_gte=".concat(ra()(this.state.start_date).startOf("day")),t="created_date_lte=".concat(ra()(this.state.end_date).endOf("day"));var r=this.state.status?this.state.status.map(function(e){return"status=".concat(e,"&")}).join(""):"",i=this.state.supplier?this.state.supplier.map(function(e){return"supplier=".concat(e,"&")}).join(""):"",o=this.state.plate_no?this.state.plate_no.map(function(e){return"plate_no=".concat(e,"&")}).join(""):"",l=(this.state.destination?this.state.destination.map(function(e){return"destination_containss=".concat(e,"&")}).join(""):"")+o+r+i+n+"&"+e+"&"+t+"&"+(this.state.company?this.state.company.map(function(e){return"company_name=".concat(e,"&")}).join(""):"")+"&_limit=1000000";console.log(l),this.setState({loading:!0}),G.a.get("".concat(H.url,"/orders?").concat(l,"&_sort=created_date:DESC")).then(function(e){console.log(e),a.setState({data:e.data,loading:!1})})}},{key:"render",value:function(){var e=this,t=this.props.classes;return console.log(this.props),console.log(this.state),console.log(230,this.state.companies),r.a.createElement(He.h,{container:!0,style:{justifyContent:"center"}},r.a.createElement(oe.a,{className:t.root,elevation:1},r.a.createElement(U.a,{variant:"h5",component:"h3"},"Orders search"),r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},r.a.createElement(He.h,{container:!0,style:{justifyContent:"center"}},r.a.createElement(He.h,{item:!0,xs:3},r.a.createElement(Tn,{inputs:this.state.companies,placeholder:"select Company",onUpdate:this.onUpdate,clear:this.state.isClear})),r.a.createElement(He.h,{item:!0,xs:1,className:t.searchBox},r.a.createElement(Ee.a,{id:"standard-number",label:"Job No.",value:this.state.job_no,onChange:this.handleChange("job_no"),type:"text",className:t.textField,InputLabelProps:{shrink:!0},fullWidth:!0,variant:"outlined"})),r.a.createElement(He.h,{xs:3,className:t.searchBox,item:!0},r.a.createElement(Ee.a,{id:"date",label:"Start Date",type:"date",value:this.state.start_date,className:t.textField,onChange:this.handleChange("start_date"),InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0})),r.a.createElement(He.h,{xs:3,className:t.searchBox,item:!0},r.a.createElement(Ee.a,{id:"date",label:"End Date",type:"date",className:t.textField,onChange:this.handleChange("end_date"),value:this.state.end_date,InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0}))),r.a.createElement(He.h,{container:!0,style:{justifyContent:"center"}},r.a.createElement(He.h,{item:!0,xs:2},r.a.createElement(Tn,{inputs:Gn,placeholder:"select status",onUpdate:this.onUpdate,clear:this.state.isClear})),r.a.createElement(He.h,{item:!0,xs:3},r.a.createElement(Tn,{inputs:this.state.suppliers,placeholder:"select suppliers",onUpdate:this.onUpdate,clear:this.state.isClear})),r.a.createElement(He.h,{item:!0,xs:3},r.a.createElement(Tn,{inputs:this.state.plate_nos,placeholder:"select vehicles",onUpdate:this.onUpdate,clear:this.state.isClear})),r.a.createElement(He.h,{item:!0,xs:4},r.a.createElement(Tn,{inputs:this.state.destinations,placeholder:"select destinations",onUpdate:this.onUpdate,clear:this.state.isClear})))),r.a.createElement(C.a,{variant:"contained",color:"primary",className:t.button,onClick:function(){return e.handleSubmit()}},"Search",r.a.createElement(Ta.a,{className:t.rightIcon})),r.a.createElement(C.a,{variant:"contained",color:"default",className:t.button,onClick:function(){e.setState({status:"",supplier:"",start_date:(new ra.a).add(0,"hours").toDate().toISOString().slice(0,10),end_date:(new ra.a).add(0,"hours").toDate().toISOString().slice(0,10),plate_no:"",destination:"",job_no:"",isClear:!0})}},"Clear Filter",r.a.createElement(xt.a,{className:t.rightIcon}))),r.a.createElement(oe.a,{className:t.root,elevation:1},this.state.loading?r.a.createElement(W.a,{color:"secondary"}):r.a.createElement(qn,{data:this.state.data,history:this.props.history,startDate:this.state.start_date,endDate:this.state.end_date})))}}]),t}(n.Component),Jn=Object(M.withStyles)(function(e){return{root:Object(ne.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,textAlign:"center",marginBottom:"10px",marginTop:"10px",width:"80%"}),button:{margin:e.spacing.unit},leftIcon:{marginRight:e.spacing.unit},rightIcon:{marginLeft:e.spacing.unit},iconSmall:{fontSize:20},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},dense:{marginTop:16},menu:{width:200},searchBox:{margin:"10px"}}})(Hn),Yn=a(139),Qn=a.n(Yn),Kn=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){console.log(this.props);var e=this.props.classes,t=[this.props.origin].concat(Object(b.a)(this.props.destination)),a=[this.props.origin_geo_in].concat(Object(b.a)(this.props.dest_geo_in)),n=[this.props.origin_geo_out].concat(Object(b.a)(this.props.dest_geo_out)),i=this.props.return_in,o=this.props.return_out,l=this.props.will_return;return r.a.createElement("div",{className:e.root},r.a.createElement(Kt.a,{alternativeLabel:!0},t.map(function(e,t){return r.a.createElement(Zt.a,{key:e},r.a.createElement(ea.a,null,r.a.createElement(U.a,{style:{fontSize:"10px"}},e,r.a.createElement("br",null),"0"!==a[t]?new ra.a(a[t]).add(0,"hours").toDate().toLocaleString():"-"," ",r.a.createElement("br",null),"0"!==n[t]?new ra.a(n[t]).add(0,"hours").toDate().toLocaleString():"-"," ",r.a.createElement("br",null),0===t&&l?"0"!==i?new ra.a(i).add(0,"hours").toDate().toLocaleString():"-":"","  ",r.a.createElement("br",null),0===t&&l?"0"!==o?new ra.a(o).add(0,"hours").toDate().toLocaleString():"-":"")))})))}}]),t}(r.a.Component),Xn=Object(M.withStyles)(function(e){return{root:{width:"90%"},backButton:{marginRight:e.spacing.unit},instructions:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit}}})(Kn),Zn=a(170),$n=a.n(Zn),er=a(329),tr=a.n(er);var ar=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={company_logo:"",company_name:"",data:[]},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;G.a.get("".concat(H.url,"/orders/").concat(this.props.history.location.state.id)).then(function(t){console.log(t.data),e.setState({data:t.data,company_logo:t.data.company_logo,company_name:t.data.company_name})})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.data,i=a.company_logo,o=a.company_name;return console.log(this.state),function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(this.state.data)?r.a.createElement("div",null,r.a.createElement(W.a,null),r.a.createElement("br",null),r.a.createElement(W.a,{color:"secondary"})):r.a.createElement(L.a,{container:!0,style:{justifyContent:"center",padding:20}},r.a.createElement(oe.a,{className:t.root,elevation:1},r.a.createElement(tr.a,{trigger:function(){return r.a.createElement(C.a,{variant:"contained",size:"small",className:t.button,onClick:function(){e.props.history.push("print",{id:n.id})}},r.a.createElement($n.a,{className:t.iconSmall}))},content:function(){return e.componentRef}}),r.a.createElement("div",{ref:function(t){return e.componentRef=t}},r.a.createElement(L.a,{container:!0,style:{justifyContent:"center",padding:20}},r.a.createElement(L.a,{item:!0,xs:6},r.a.createElement(U.a,null," Order status: ",n.status.replace("_"," "))),r.a.createElement(L.a,{item:!0,xs:6},r.a.createElement(U.a,{style:{float:"right"}},"Updated date: ",new ra.a(n.updated_date).add(-7,"hours").toDate().toLocaleString())),r.a.createElement(L.a,{item:!0,xs:8,className:t.box,style:{textAlign:"center"}},r.a.createElement("img",{src:i,alt:"no logo found",width:"50px",style:{float:"left"}}),r.a.createElement("b",{style:{textAlign:"top"}},o)),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Job no. | \u0e43\u0e1a\u0e07\u0e32\u0e19\u0e17\u0e35\u0e48: ",n.job_no),r.a.createElement(L.a,{item:!0,xs:8,className:t.box},"Transporter | \u0e02\u0e19\u0e2a\u0e48\u0e07: ",n.supplier),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Date | \u0e27\u0e31\u0e19\u0e17\u0e35\u0e48: ",new ra.a(n.created_date).add(-7,"hours").toDate().toLocaleString()),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Invoice No.: ",n.invoice_no),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Car Plate* | \u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e23\u0e16: ",n.plate_no),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"No. of trip | \u0e40\u0e17\u0e35\u0e48\u0e22\u0e27\u0e17\u0e35\u0e48: ",n.trip_no),r.a.createElement(Xn,{origin:n.origin,destination:n.destination?n.destination.split("|"):[],origin_geo_in:n.origin_geo_in?n.origin_geo_in:"",origin_geo_out:n.origin_geo_out?n.origin_geo_out:"",dest_geo_in:n.dest_geo_in?n.dest_geo_in.split("|"):[],dest_geo_out:n.dest_geo_out?n.dest_geo_out.split("|"):[],return_in:n.return_in,return_out:n.return_out,will_return:n.will_return}),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Return* | \u0e23\u0e31\u0e1a\u0e01\u0e25\u0e31\u0e1a: "," ",n.will_return?"\u2714\ufe0f":"-"),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Overtime* | \u0e25\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32: "," ",n.over_time?"\u2714\ufe0f":"-"),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Over Night | \u0e04\u0e49\u0e32\u0e07\u0e04\u0e37\u0e19*: "," ",n.over_night?"\u2714\ufe0f":"-"),r.a.createElement(L.a,{item:!0,xs:6,className:t.box},"Product*: "," ",n.products?n.products.split("|").map(function(e){return"Pallet"===e?r.a.createElement(ke.a,{label:"Pallet [".concat(n.num_pallet,"]"),key:e,color:"primary"}):"Rack"===e?r.a.createElement(ke.a,{label:"Rack [".concat(n.num_rack,"]"),key:e,color:"primary"}):"Dies"===e?r.a.createElement(ke.a,{label:"Dies [".concat(n.num_die,"]"),key:e,color:"primary"}):"Box"===e?r.a.createElement(ke.a,{label:"Box [".concat(n.num_box,"]"),key:e,color:"primary"}):r.a.createElement(ke.a,{label:e,key:e,color:"primary"})}):[]),r.a.createElement(L.a,{item:!0,xs:6,className:t.box},"Seal Number: ",n.seal_no),r.a.createElement(L.a,{item:!0,xs:6,className:t.box},"Type of car: ",n.car_type),r.a.createElement(L.a,{item:!0,xs:6,className:t.box},"Amount | \u0e23\u0e32\u0e04\u0e32: ",n.price," "," "," Baht"),r.a.createElement(L.a,{item:!0,xs:12,className:t.box},"Note:",n.note),r.a.createElement(L.a,{item:!0,xs:4,style:{padding:20,textAlign:"center",marginBottom:30},className:t.box},"Driver Name | \u0e04\u0e19\u0e02\u0e31\u0e1a\u0e23\u0e16: ",r.a.createElement("br",null)," ",n.driver_name),r.a.createElement(L.a,{item:!0,xs:4,style:{padding:20,textAlign:"center",marginBottom:30},className:t.box},"Issuer's name | \u0e1c\u0e39\u0e49\u0e2a\u0e31\u0e48\u0e07\u0e07\u0e32\u0e19: ",r.a.createElement("br",null)," ",n.issuer),r.a.createElement(L.a,{item:!0,xs:4,style:{padding:20,textAlign:"center",marginBottom:30},className:t.box},"Checked by | \u0e1c\u0e39\u0e49\u0e2a\u0e31\u0e48\u0e07\u0e07\u0e32\u0e19: ",r.a.createElement("br",null)," ",n.checked_by)),r.a.createElement(U.a,{style:{float:"left",marginLeft:10}},r.a.createElement("i",null," For factory only")),r.a.createElement(Qn.a,{variant:"middle",style:{margin:"20px 0px 0px 0px",borderTop:"4px dotted rgba(0, 0, 0, 0.98)"}}),r.a.createElement(U.a,{style:{float:"right",marginRight:10}},r.a.createElement("i",null," For driver only")),r.a.createElement(L.a,{container:!0,style:{justifyContent:"center",padding:20}},r.a.createElement(L.a,{item:!0,xs:8,className:t.box,style:{textAlign:"center"}},r.a.createElement("img",{src:i,alt:"no logo found",width:"50px",style:{float:"left"}}),r.a.createElement("b",{style:{textAlign:"top"}},o)),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Job no. | \u0e43\u0e1a\u0e07\u0e32\u0e19\u0e17\u0e35\u0e48: ",n.job_no),r.a.createElement(L.a,{item:!0,xs:8,className:t.box},"Transporter | \u0e02\u0e19\u0e2a\u0e48\u0e07: ",n.supplier),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Date | \u0e27\u0e31\u0e19\u0e17\u0e35\u0e48: ",new ra.a(n.created_date).add(-7,"hours").toDate().toLocaleString()),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Invoice No.: ",n.invoice_no),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Car Plate* | \u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e23\u0e16: ",n.plate_no),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"No. of trip | \u0e40\u0e17\u0e35\u0e48\u0e22\u0e27\u0e17\u0e35\u0e48: ",n.trip_no),r.a.createElement(Xn,{origin:n.origin,destination:n.destination?n.destination.split("|"):[],origin_geo_in:n.origin_geo_in?n.origin_geo_in:"",origin_geo_out:n.origin_geo_out?n.origin_geo_out:"",dest_geo_in:n.dest_geo_in?n.dest_geo_in.split("|"):[],dest_geo_out:n.dest_geo_out?n.dest_geo_out.split("|"):[],return_in:n.return_in,return_out:n.return_out,will_return:n.will_return}),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Return* | \u0e23\u0e31\u0e1a\u0e01\u0e25\u0e31\u0e1a: "," ",n.will_return?"\u2714\ufe0f":"-"),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Overtime* | \u0e25\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32: "," ",n.over_time?"\u2714\ufe0f":"-"),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Over Night | \u0e04\u0e49\u0e32\u0e07\u0e04\u0e37\u0e19*: "," ",n.over_night?"\u2714\ufe0f":"-"),r.a.createElement(L.a,{item:!0,xs:4,style:{padding:20,textAlign:"center"},className:t.box},"Driver Name | \u0e04\u0e19\u0e02\u0e31\u0e1a\u0e23\u0e16: ",r.a.createElement("br",null)," ",n.driver_name),r.a.createElement(L.a,{item:!0,xs:4,style:{padding:20,textAlign:"center"},className:t.box},"Issuer's name | \u0e1c\u0e39\u0e49\u0e2a\u0e31\u0e48\u0e07\u0e07\u0e32\u0e19: ",r.a.createElement("br",null)," ",n.issuer),r.a.createElement(L.a,{item:!0,xs:4,style:{padding:20,textAlign:"center"},className:t.box},"Checked by | \u0e1c\u0e39\u0e49\u0e2a\u0e31\u0e48\u0e07\u0e07\u0e32\u0e19: ",r.a.createElement("br",null)," ",n.checked_by)))))}}]),t}(n.Component),nr=Object(M.withStyles)(function(e){return{root:Object(ne.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,width:"20cm",height:"100%",fontSize:12}),divider:{margin:"".concat(2*e.spacing.unit,"px 0")},box:{border:"solid",padding:10,borderWidth:.25,borderColor:"grey",boxSizing:"border-box"}}})(ar),rr={success:et.a,warning:st.a,error:at.a,info:rt.a};var ir=Object(M.withStyles)(function(e){return{success:{backgroundColor:ut.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:dt.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,i=e.onClose,o=e.variant,l=Object(d.a)(e,["classes","className","message","onClose","variant"]),s=rr[o];return r.a.createElement(Ze.a,Object.assign({className:y()(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(s,{className:y()(t.icon,t.iconVariant)}),n),action:[r.a.createElement(Ye.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},r.a.createElement(ot.a,{className:t.icon}))]},l))});function or(e){var t=e.inputRef,a=Object(d.a)(e,["inputRef"]);return r.a.createElement("div",Object.assign({ref:t},a))}var lr={Control:function(e){return r.a.createElement(Ee.a,Object.assign({fullWidth:!0,InputProps:{inputComponent:or,inputProps:Object(ne.a)({className:e.selectProps.classes.input,inputRef:e.innerRef,children:e.children},e.innerProps)}},e.selectProps.textFieldProps))},Menu:function(e){return r.a.createElement(oe.a,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)},MultiValue:function(e){return r.a.createElement(ke.a,{tabIndex:-1,label:e.children,className:y()(e.selectProps.classes.chip,Object(_.a)({},e.selectProps.classes.chipFocused,e.isFocused)),onDelete:e.removeProps.onClick,deleteIcon:r.a.createElement(we.a,e.removeProps)})},NoOptionsMessage:function(e){return r.a.createElement(U.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return r.a.createElement(Oe.a,Object.assign({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps),e.children)},Placeholder:function(e){return r.a.createElement(U.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return r.a.createElement(U.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return r.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}},sr=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={single:null,multi:null},a.handleChange=function(e){return function(t){return console.log(a.state.single),a.props.vehicle&&(a.props.onUpdate([t,a.state.single]),a.setState(Object(_.a)({},e,t))),t.value===a.props.origin?(a.setState({alert:"Origin & destination \u0e15\u0e49\u0e2d\u0e07\u0e44\u0e21\u0e48\u0e40\u0e2b\u0e21\u0e37\u0e2d\u0e19\u0e01\u0e31\u0e19",snackbar_open:!0}),null):a.props.destination.includes(t.value)?(a.setState({alert:"Destination \u0e15\u0e49\u0e2d\u0e07\u0e44\u0e21\u0e48\u0e40\u0e2b\u0e21\u0e37\u0e2d\u0e19\u0e01\u0e31\u0e19",snackbar_open:!0}),null):a.props.vehicle||a.props.plate_no?(a.props.onUpdate([t,a.state.single,a.props.index]),void a.setState(Object(_.a)({},e,t))):(a.setState({alert:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e22\u0e32\u0e19\u0e1e\u0e32\u0e2b\u0e19\u0e30\u0e01\u0e48\u0e2d\u0e19",snackbar_open:!0}),null)}},a.handleSnackbarClose=function(e,t){"clickaway"!==t&&a.setState({snackbar_open:!1})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e),this.setState({single:e.defaultValue})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.theme,n={input:function(e){return Object(ne.a)({},e,{color:a.palette.text.primary,"& input":{font:"inherit"}})}};return r.a.createElement("div",{className:t.root},r.a.createElement(Ke.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.snackbar_open,autoHideDuration:6e3,onClose:this.handleSnackbarClose},r.a.createElement(ir,{onClose:this.handleSnackbarClose,variant:"error",message:this.state.alert})),r.a.createElement(ve.a,null,r.a.createElement(be.a,{classes:t,styles:n,options:this.props.suggestions,components:lr,value:this.state.single,onChange:this.handleChange("single"),placeholder:this.state.single})))}}]),t}(r.a.Component),cr=Object(M.withStyles)(function(e){return{root:{flexGrow:1,height:"auto"},input:{display:"flex",padding:0},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:"".concat(e.spacing.unit/2,"px ").concat(e.spacing.unit/4,"px")},chipFocused:{backgroundColor:Object(je.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,fontSize:14,paddingLeft:10},paper:{position:"absolute",zIndex:10,marginTop:e.spacing.unit,left:0,right:0},divider:{height:2*e.spacing.unit}}},{withTheme:!0})(sr),ur=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){console.log(this.props);var e=this.props.classes,t=this.props.origin?[this.props.origin].concat(Object(b.a)(this.props.destination)):[];return r.a.createElement("div",{className:e.root},r.a.createElement(Kt.a,{alternativeLabel:!0},t.map(function(e){return r.a.createElement(Zt.a,{key:e},r.a.createElement(ea.a,null,e))})))}}]),t}(r.a.Component),pr=Object(M.withStyles)(function(e){return{root:{width:"90%"},backButton:{marginRight:e.spacing.unit},instructions:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit}}})(ur);function dr(e){return r.a.createElement(Wt.a,Object.assign({direction:"up"},e))}var mr=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){a.setState({open:!1}),a.props.onUpdateState(!1)},a.handleSubmit=function(e){a.setState({open:!1}),a.props.onUpdateState(!1),G.a.put("".concat(H.url,"/orders/").concat(a.props.orderid),e).then(function(t){console.log(t),alert("\u0e2d\u0e31\u0e1b\u0e40\u0e14\u0e15\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08\u0e41\u0e25\u0e49\u0e27"),a.props.reset&&G.a.post("".concat(H.url,"/orders/resettime"),{order_id:a.props.orderid,dest_geo_in:e.destination,dest_geo_out:e.destination})}).then(function(){a.props.history.push("invoicelist")})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;console.log(this.props);var t=this.props.classes;return r.a.createElement("div",null,r.a.createElement(It.a,{fullWidth:!0,maxWidth:"md",open:this.props.open,TransitionComponent:dr,keepMounted:!0,onClose:this.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(Bt.a,{id:"alert-dialog-slide-title",style:{margin:"auto"}},"Please verified before confirm order?"),r.a.createElement(Qn.a,null),r.a.createElement(Lt.a,null,r.a.createElement(Ut.a,{className:t.table},r.a.createElement(qt.a,null,r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Date")),r.a.createElement(Ht.a,null,this.props.data.created_date)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Invoice")),r.a.createElement(Ht.a,null,this.props.data.invoice_no)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Transporter")),r.a.createElement(Ht.a,null,this.props.data.supplier)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Vehicle")),r.a.createElement(Ht.a,null,this.props.data.plate_no)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Product")),r.a.createElement(Ht.a,null,0!==Object.keys(this.props.data).length?this.props.data.products.split("|").map(function(t){return console.log(t),"Pallet"===t?r.a.createElement(ke.a,{label:"Pallet (".concat(e.props.data.num_pallet,")"),key:t,color:"primary"}):"Rack"===t?r.a.createElement(ke.a,{label:"Rack (".concat(e.props.data.num_rack,")"),key:t,color:"primary"}):"Dies"===t?r.a.createElement(ke.a,{label:"Dies (".concat(e.props.data.num_die,")"),key:t,color:"primary"}):"Box"===t?r.a.createElement(ke.a,{label:"Box (".concat(e.props.data.num_box,")"),key:t,color:"primary"}):r.a.createElement(ke.a,{label:t,key:t,color:"primary"})}):null)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Note")),r.a.createElement(Ht.a,null,this.props.data.note)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Return")),r.a.createElement(Ht.a,null,this.props.data.will_return?r.a.createElement(ke.a,{label:"True",color:"primary"}):r.a.createElement(ke.a,{label:"False"}))),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"\u0e04\u0e49\u0e32\u0e07\u0e04\u0e37\u0e19*")),r.a.createElement(Ht.a,null,this.props.data.over_night?r.a.createElement(ke.a,{label:"True",color:"primary"}):r.a.createElement(ke.a,{label:"False"}))))),r.a.createElement(pr,{origin:0!==Object.keys(this.props.data).length?this.props.data.origin:"",destination:0!==Object.keys(this.props.data).length?this.props.data.destination.split("|"):[]})),r.a.createElement(Qn.a,null),r.a.createElement(Tt.a,null,r.a.createElement(C.a,{onClick:this.handleClose,variant:"contained",color:"secondary"},"Cancel"),r.a.createElement(C.a,{onClick:function(){return e.handleSubmit(e.props.data)},variant:"contained",color:"primary"},"Confirm"))))}}]),t}(r.a.Component),hr=Object(M.withStyles)(function(e){return{root:{minWidth:"700px",maxWidth:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},tableHead:{backgroundColor:"green"}}})(mr),gr={success:et.a,warning:st.a,error:at.a,info:rt.a};var fr=Object(M.withStyles)(function(e){return{success:{backgroundColor:ut.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:dt.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,i=e.onClose,o=e.variant,l=Object(d.a)(e,["classes","className","message","onClose","variant"]),s=gr[o];return r.a.createElement(Ze.a,Object.assign({className:y()(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(s,{className:y()(t.icon,t.iconVariant)}),n),action:[r.a.createElement(He.i,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},r.a.createElement(ot.a,{className:t.icon}))]},l))}),br=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){return function(t){"onOverNight"===e&&a.setState({delivered_date:(new ra.a).add(1,"days").toDate().toISOString().slice(0,10)}),a.setState(Object(_.a)({},e,t.target.checked),a.getDeliverCost)}},a.handleChangeName=function(e){"note"===e.target.name&&a.setState({reset:!1}),"delivered_date"===e.target.name?(console.log(e.target.value),new ra.a(e.target.value)<new ra.a(a.state.created_date)?a.setState({alert:"\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e15\u0e31\u0e49\u0e07\u0e04\u0e48\u0e32\u0e01\u0e48\u0e2d\u0e19\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e23\u0e49\u0e32\u0e07\u0e43\u0e1a\u0e2a\u0e48\u0e07\u0e02\u0e2d\u0e07",snackbar_open:!0,delivered_date:a.state.delivered_date}):ra()(e.target.value).isValid()?a.setState({delivered_date:e.target.value}):a.setState({alert:"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e07\u0e1c\u0e25\u0e34\u0e15\u0e20\u0e31\u0e13\u0e11\u0e4c\u0e44\u0e21\u0e48\u0e16\u0e39\u0e01\u0e15\u0e49\u0e2d\u0e07",snackbar_open:!0,delivered_date:a.state.delivered_date})):a.setState(Object(_.a)({},e.target.name,e.target.value))},a.onUpdateProps=function(e){a.setState({showDialog:e})},a.onUpdate=function(e){var t=Object(re.a)(Object(re.a)(a));if(e[0].origin&&a.setState({origin:e[0].value},a.getDeliverCost),e[0].destination&&a.setState(function(t){return{destination:t.destination.map(function(t,a){return a===e[2]&&(t=e[0].value),t})}},a.getDeliverCost),e[0].vehicle){var n=a.state.pois.filter(function(t){return t.appid===e[0].appid});console.log(e),a.setState({vehicle:e[0].value,car_type:e[0].type,pois:n},a.getDeliverCost),G.a.get("".concat(H.url,"/suppliers?appid=").concat(e[0].appid)).then(function(e){t.setState({supplier:e.data[0].name})})}},a.getDeliverCost=function(){var e=Object(re.a)(Object(re.a)(a));console.log(a.state);var t=a.state,n=t.destination,r=t.origin,i=t.supplier,o=t.company_name,l=t.onOvertime,s=t.onReturn,c=t.car_type;console.log(o,r,n,i);var u="".concat(o,"-").concat(i,"-").concat(c.toUpperCase().replace("-"," "),"-").concat(r,"-").concat(a.pad_array(n.filter(function(e){return e}),7,"").join("-"),"-").concat(s?"Return-":"-").concat(l?"Overtime":"");console.log(u),G.a.get("".concat(H.url,"/deliveryfees?Transportation Description=").concat(u)).then(function(t){console.log(t),0!==t.data.length?e.setState({price:t.data[0].Price}):e.setState({price:""})}).catch(function(e){console.log(e)})},a.pad_array=function(e,t,a){return e.concat(Array(t).fill(a)).slice(0,t)},a.handleSnackbarClose=function(e,t){"clickaway"!==t&&a.setState({snackbar_open:!1})},a.state={alert:"",currentOrderId:"",onReturn:!1,onOvertime:!1,onOverNight:!1,pallet:!0,rack:!1,dies:!1,box:!1,product_note:"",seal_no:"",vehicle:"",origin:"",destination:[],issuer_name:"",origin_geo_in:"",origin_geo_out:"",dest_geo_in:"",dest_geo_out:"",car_type:"",price:"",note:"",job_no:"",invoice_no:"",supplier:"",delivered_date:null,submitData:{},num_pallet:"",num_die:"",num_rack:"",num_box:"",department:"",delivery_type:"normal",department_note:"",reset:!0,loading:!0,multiline:"",company_logo:"",company_name:"",suppliers:"",pois:[],vehicles:[],inputLinkClicked:[1],showDialog:!1},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(){var e=[];if(this.state.pallet&&e.push("Pallet"),this.state.rack&&e.push("Rack"),this.state.dies&&e.push("Dies"),this.state.box&&e.push("Box"),this.state.product_note&&e.push.apply(e,Object(b.a)(this.state.product_note.split(","))),this.state.vehicle)if(0===e.length)this.setState({alert:"\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e01\u0e23\u0e2d\u0e01\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32",snackbar_open:!0});else if(this.state.origin)if(0===this.state.destination.length||this.state.destination.includes(null))this.setState({alert:"\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e01\u0e23\u0e2d\u0e01 destination of delivery",snackbar_open:!0});else if(this.state.destination.includes(this.state.origin))this.setState({alert:"Origin and destination \u0e15\u0e49\u0e2d\u0e07\u0e44\u0e21\u0e48\u0e40\u0e2b\u0e21\u0e37\u0e2d\u0e19\u0e01\u0e31\u0e19",snackbar_open:!0});else{var t=this.state,a=t.job_no,n=t.invoice_no,r=t.supplier,i=t.vehicle,o=t.origin,l=t.destination,s=t.onReturn,c=t.onOverNight,u=t.onOvertime,p=t.seal_no,d=t.car_type,m=t.note,h=t.price,g=t.issuer_name,f=t.delivered_date,_=t.company_logo,v=t.company_name,y=t.department,E=t.department_note,x=t.delivery_type,k=t.num_box,C=t.num_die,O=t.num_pallet,S=t.num_rack,w=t.created_date,j=t.trip_no,N=t.order_type,D=t.reset,P=t.status,I={job_no:a,invoice_no:n,supplier:r,plate_no:i,origin:o,destination:l.join("|"),will_return:s,over_night:c,over_time:u,seal_no:p,car_type:d,note:m,price:h,issuer:g,updated_date:new ra.a(new Date).add(0,"hours").toDate(),created_date:w,products:e.join("|"),delivered_date:f,status:D?"new":P,company_id:localStorage.getItem("companyID"),company_logo:_,company_name:v,department:"Others"!==y.split(":")[0]?y:E?"Others: ".concat(E):null,delivery_type:x,num_box:k,num_die:C,num_pallet:O,num_rack:S,trip_no:j,order_type:N};this.setState({showDialog:!0,submitData:I})}else this.setState({alert:"\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e01\u0e23\u0e2d\u0e01 origin of delivery",snackbar_open:!0});else this.setState({alert:"Plate_no is missing",snackbar_open:!0})}},{key:"componentWillMount",value:function(){var e=this,t=this;G.a.get("".concat(H.url,"/orders/").concat(this.props.history.location.state.id)).then(function(a){var n=a.data.products.split("|");n.includes("Pallet")&&e.setState({pallet:!0}),n.includes("Rack")&&e.setState({rack:!0}),n.includes("Dies")&&e.setState({dies:!0}),n.includes("Box")&&e.setState({box:!0});var r=n.filter(function(e,t,a){return"Box"!==e&&"Pallet"!==e&&"Rack"!==e&&"Dies"!==e});t.setState({currentOrderId:a.data.id,company_id:a.data.company_id,company_logo:a.data.company_logo,company_name:a.data.company_name,invoice_no:a.data.invoice_no,product_note:r.join("|"),onReturn:a.data.will_return,onOvertime:a.data.over_time,onOverNight:a.data.over_night,seal_no:a.data.seal_no,vehicle:a.data.plate_no,origin:a.data.origin,destination:a.data.destination.split("|"),issuer_name:a.data.issuer,origin_geo_in:a.data.origin_geo_in,origin_geo_out:a.data.origin_geo_out,dest_geo_in:a.data.dest_geo_in,dest_geo_out:a.data.dest_geo_out,car_type:a.data.car_type,price:a.data.price,note:a.data.note,job_no:a.data.job_no,supplier:a.data.supplier,delivered_date:a.data.delivered_date?ra()(a.data.delivered_date).toDate().toISOString().slice(0,10):null,created_date:a.data.created_date,inputLinkClicked:new Array(a.data.destination.split("|").length).fill(1),num_pallet:a.data.num_pallet,num_box:a.data.num_box,num_rack:a.data.num_rack,num_die:a.data.num_die,trip_no:a.data.trip_no,driver_name:a.data.driver_name,order_type:a.data.order_type,department:a.data.department.split(":")[0],department_note:"Others"===a.data.department.split(":")[0]?a.data.department.split(":")[1]:""})}).then(function(){var a=G.a.get("".concat(H.url,"/companies/").concat(e.state.company_id));Promise.all([a]).then(function(e){t.setState({loading:!1,suppliers:e[0].data.supplier,company_abbr:e[0].data.abbr})}).catch(function(e){console.log(e.message),t.setState({loading:!1})}).then(Object(f.a)(g.a.mark(function t(){var a,n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.suppliers.map(function(t,a){return G.a.get("".concat(H.url,"/vehicles?appid=").concat(t.appid,"&company_name_contains=").concat(e.state.company_abbr,"&_sort=plate_no:ASC&_limit=1000"),{})}),n=e.state.suppliers.map(function(t,a){return G.a.get("".concat(H.url,"/pois?appid=").concat(t.appid,"&_sort=name:ASC&_limit=1000&company_name=").concat(e.state.company_abbr),{})}),t.next=4,Promise.all([Promise.all([a,n]).then(function(e){return e})]).then(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a[0][0].map(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a.then(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({vehicles:[].concat(Object(b.a)(e.state.vehicles),Object(b.a)(a.data))});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 2:return t.next=4,a[0][1].map(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a.then(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({pois:[].concat(Object(b.a)(e.state.pois),Object(b.a)(a.data))});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}},t)})))})}},{key:"pad",value:function(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}},{key:"handleAddInput",value:function(){this.setState({inputLinkClicked:[].concat(Object(b.a)(this.state.inputLinkClicked),[1]),destination:[].concat(Object(b.a)(this.state.destination),[null])})}},{key:"handleDeleteInput",value:function(e){this.setState({inputLinkClicked:this.state.inputLinkClicked.filter(function(t,a){return a!==e}),destination:this.state.destination.filter(function(t,a){return a!==e})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.company_logo,n=t.company_name,i=t.issuer_name,o=t.driver_name;console.log(this.state);var l=this.props.classes;if(this.state.loading)return r.a.createElement("div",null,r.a.createElement(He.j,null),r.a.createElement("br",null),r.a.createElement(He.j,{color:"secondary"}));var s=this.state.vehicles.map(function(e){return{value:e.plate_no,label:e.plate_no,type:e.vehicle_type,appid:e.appid,vehicle:!0}}),c=this.state.pois.map(function(e){return{value:e.name,label:e.name,origin:!0}}),u=this.state.pois.map(function(e){return{value:e.name,label:e.name,destination:!0}}),p=function(e){return Object(b.a)(new Set(e.map(function(e){return JSON.stringify(e)}))).map(function(e){return JSON.parse(e)})},d=p(c),m=p(u);return r.a.createElement("div",{style:{paddingTop:"20px"}},r.a.createElement(Ke.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.snackbar_open,autoHideDuration:6e3,onClose:this.handleSnackbarClose},r.a.createElement(fr,{onClose:this.handleSnackbarClose,variant:"error",message:this.state.alert})),r.a.createElement(hr,{open:this.state.showDialog,onUpdateState:this.onUpdateProps,data:this.state.submitData,reset:this.state.reset,orderid:this.props.history.location.state.id,history:this.props.history}),r.a.createElement(He.k,{className:l.container},r.a.createElement(He.h,{container:!0},r.a.createElement(He.h,{item:!0,xs:8,className:l.box,style:{textAlign:"center"}},r.a.createElement("img",{src:a,alt:"no logo found",width:"75px",style:{float:"left"}}),r.a.createElement("b",null,n)),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},"Job no. | \u0e43\u0e1a\u0e07\u0e32\u0e19\u0e17\u0e35\u0e48: ",this.state.job_no),r.a.createElement(He.h,{item:!0,xs:8,className:l.box},"Transporter | \u0e02\u0e19\u0e2a\u0e48\u0e07: ",this.state.supplier),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},"Date | \u0e27\u0e31\u0e19\u0e17\u0e35\u0e48: ",new ra.a(this.state.created_date).add(-7,"hours").toDate().toLocaleString()),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},r.a.createElement(He.o,{id:"outlined-email-input",label:"Invoice No. : \u0e15\u0e31\u0e27\u0e2d\u0e22\u0e48\u0e32\u0e07 591101616",onChange:this.handleChangeName,value:this.state.invoice_no,className:l.textField,InputLabelProps:{shrink:!0,name:"invoice_no"},type:"text",name:"invoice_no",margin:"normal",variant:"outlined",fullWidth:!0})),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},r.a.createElement(He.h,{container:!0},r.a.createElement(He.h,{item:!0,xs:4},"Car Plate* ",r.a.createElement("br",null),"\u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e23\u0e16:"),r.a.createElement(He.h,{item:!0,xs:8},r.a.createElement(cr,{suggestions:s,vehicle:!0,defaultValue:this.state.vehicle,onUpdate:this.onUpdate,origin:this.state.origin?this.state.origin:"",destination:this.state.destination?this.state.destination:[]})))),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},"No. of trip | \u0e40\u0e17\u0e35\u0e48\u0e22\u0e27\u0e17\u0e35\u0e48: ",this.state.trip_no),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},r.a.createElement(He.h,{container:!0},r.a.createElement(He.h,{item:!0,xs:4},"\u0e08\u0e38\u0e14\u0e40\u0e23\u0e34\u0e48\u0e21\u0e15\u0e49\u0e19*"),r.a.createElement(He.h,{item:!0,xs:8},r.a.createElement(cr,{suggestions:d,plate_no:this.state.vehicle,onUpdate:this.onUpdate,origin:this.state.origin?this.state.origin:"",defaultValue:this.state.origin,destination:this.state.destination?this.state.destination:[]})),r.a.createElement(He.h,{container:!0,style:{marginTop:"12px"}},r.a.createElement(He.h,{item:!0,xs:6,className:l.box},"\u0e40\u0e27\u0e25\u0e32\u0e40\u0e02\u0e49\u0e32: "),r.a.createElement(He.h,{item:!0,xs:6,className:l.box},"\u0e40\u0e27\u0e25\u0e32\u0e2d\u0e2d\u0e01:   ")))),r.a.createElement(He.h,{item:!0,xs:8,className:l.box},this.state.inputLinkClicked.map(function(t,a){return r.a.createElement(He.h,{container:!0,key:a},0===a?r.a.createElement(He.h,{item:!0,xs:4},"Destination | \u0e1b\u0e25\u0e32\u0e22\u0e17\u0e32\u0e07*"):r.a.createElement(He.h,{item:!0,xs:4}),r.a.createElement(He.h,{item:!0,xs:5},r.a.createElement(cr,{key:a,suggestions:m,plate_no:e.state.vehicle,onUpdate:e.onUpdate,origin:e.state.origin?e.state.origin:"",defaultValue:{value:e.state.destination[a],label:e.state.destination[a],destination:!0},destination:e.state.destination?e.state.destination:[],index:a})),r.a.createElement(He.h,{item:!0,xs:3},0===a&&e.state.inputLinkClicked.length<7?r.a.createElement(He.i,{variant:"contained",color:"secondary",className:l.button,style:{float:"right"},onClick:function(){return e.handleAddInput()}},r.a.createElement(yt.a,null)):null,0!==a&&e.state.inputLinkClicked.length>1?r.a.createElement(He.i,{variant:"contained",color:"secondary",className:l.button,style:{float:"right"},onClick:function(){return e.handleDeleteInput(a)}},r.a.createElement(xt.a,null)):null),0===a?r.a.createElement(He.h,{container:!0},r.a.createElement(He.h,{item:!0,xs:6,className:l.box},"Time in | \u0e40\u0e27\u0e25\u0e32\u0e40\u0e02\u0e49\u0e32:   "),r.a.createElement(He.h,{item:!0,xs:6,className:l.box},"Time out | \u0e40\u0e27\u0e25\u0e32\u0e2d\u0e2d\u0e01:   ")):r.a.createElement(He.h,{container:!0,style:{marginTop:"12px"}},r.a.createElement(He.h,{item:!0,xs:6,className:l.box},"Time in | \u0e40\u0e27\u0e25\u0e32\u0e40\u0e02\u0e49\u0e32:  "),r.a.createElement(He.h,{item:!0,xs:6,className:l.box},"Time out | \u0e40\u0e27\u0e25\u0e32\u0e2d\u0e2d\u0e01:  ")))})),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},r.a.createElement(He.f,{control:r.a.createElement(He.n,{checked:this.state.onReturn,onChange:this.handleChange("onReturn"),value:this.state.onReturn}),label:this.state.onReturn?"Return* | \u0e23\u0e31\u0e1a\u0e01\u0e25\u0e31\u0e1a":"No return | \u0e44\u0e21\u0e48\u0e23\u0e31\u0e1a\u0e01\u0e25\u0e31\u0e1a"})),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},"Overtime*: "," ",r.a.createElement(He.f,{control:r.a.createElement(He.n,{checked:this.state.onOvertime,onChange:this.handleChange("onOvertime"),value:this.state.onOvertime}),label:this.state.onOvertime?"Overtime* | \u0e25\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32":"No overtime | \u0e44\u0e21\u0e48\u0e25\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32"})),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},r.a.createElement(He.f,{control:r.a.createElement(He.n,{checked:this.state.onOverNight,onChange:this.handleChange("onOverNight"),value:this.state.onOverNight}),label:this.state.onOverNight?"Over Night | \u0e04\u0e49\u0e32\u0e07\u0e04\u0e37\u0e19*":"No over night | \u0e44\u0e21\u0e48\u0e04\u0e49\u0e32\u0e07\u0e04\u0e37\u0e19"}),this.state.onOverNight?r.a.createElement(He.o,{id:"date",label:"Delivered date",type:"date",value:this.state.delivered_date,fullWidth:!0,onChange:this.handleChangeName,className:l.textField,InputLabelProps:{shrink:!0},name:"delivered_date"}):null),r.a.createElement(He.h,{item:!0,xs:6,className:l.box},"Product*:",r.a.createElement(He.g,{style:{flexDirection:"row"}},r.a.createElement(He.f,{control:r.a.createElement(He.d,{checked:this.state.pallet,onChange:this.handleChange("pallet"),value:"pallet"}),label:"Pallet"}),this.state.pallet?r.a.createElement(He.o,{id:"num_pallet",label:"\u0e08\u0e33\u0e19\u0e27\u0e19\u0e02\u0e2d\u0e07",type:"text",defaultValue:this.state.num_pallet,onChange:this.handleChangeName,className:l.textField_number,InputLabelProps:{shrink:!0},name:"num_pallet",variant:"outlined"}):null,r.a.createElement(He.f,{control:r.a.createElement(He.d,{checked:this.state.rack,onChange:this.handleChange("rack"),value:"rack"}),label:"Rack"}),this.state.rack?r.a.createElement(He.o,{id:"num_rack",label:"\u0e08\u0e33\u0e19\u0e27\u0e19\u0e02\u0e2d\u0e07",type:"text",defaultValue:this.state.num_rack,onChange:this.handleChangeName,className:l.textField_number,InputLabelProps:{shrink:!0},name:"num_rack",variant:"outlined"}):null,r.a.createElement(He.f,{control:r.a.createElement(He.d,{checked:this.state.dies,onChange:this.handleChange("dies"),value:"dies"}),label:"Dies"}),this.state.dies?r.a.createElement(He.o,{id:"num_die",label:"\u0e08\u0e33\u0e19\u0e27\u0e19\u0e02\u0e2d\u0e07",type:"text",defaultValue:this.state.num_die,onChange:this.handleChangeName,className:l.textField_number,InputLabelProps:{shrink:!0},name:"num_die",variant:"outlined"}):null,r.a.createElement(He.f,{control:r.a.createElement(He.d,{checked:this.state.box,onChange:this.handleChange("box"),value:"box"}),label:"Box"}),this.state.box?r.a.createElement(He.o,{id:"num_box",label:"\u0e08\u0e33\u0e19\u0e27\u0e19\u0e02\u0e2d\u0e07",type:"text",defaultValue:this.state.num_box,onChange:this.handleChangeName,className:l.textField_number,InputLabelProps:{shrink:!0},name:"num_box",variant:"outlined"}):null),r.a.createElement(He.o,{id:"outlined-product-note-input",label:"\u0e2d\u0e37\u0e48\u0e19\u0e46: ",className:l.textField,value:this.state.product_note,onChange:this.handleChangeName,inputProps:{name:"product_note"},margin:"normal",variant:"outlined",fullWidth:!0})),r.a.createElement(He.h,{item:!0,xs:6,className:l.box},"Seal Number: ",r.a.createElement("br",null),r.a.createElement(He.o,{id:"outlined-multiline-flexible",label:"\u0e40\u0e25\u0e02\u0e2a\u0e32\u0e22\u0e23\u0e31\u0e14",multiline:!0,rows:"2",value:this.state.seal_no,onChange:this.handleChangeName,inputProps:{name:"seal_no"},className:l.textField,margin:"normal",helperText:"Maximum of 100 character",variant:"outlined",fullWidth:!0}),r.a.createElement("br",null),"Able Sanoh industries (1996) co. ltd"===this.state.company_name?r.a.createElement(Dt.a,{component:"fieldset",className:l.formControl,variant:"outlined"},r.a.createElement(jt.a,{component:"legend"},r.a.createElement(U.a,null," Department* | \u0e41\u0e1c\u0e19\u0e01: ")),r.a.createElement(St.a,{"aria-label":"department",name:"department",className:l.group,value:this.state.department,onChange:this.handleChangeName,row:!0},r.a.createElement(He.f,{value:"PC",control:r.a.createElement(Ct.a,null),label:"PC"}),r.a.createElement(He.f,{value:"Warehouse",control:r.a.createElement(Ct.a,null),label:"Warehouse"}),r.a.createElement(He.f,{value:"Others",control:r.a.createElement(Ct.a,null),label:"Others"}),"Others"===this.state.department.split(":")[0]?r.a.createElement(He.o,{id:"outlined-multiline-flexible",label:"others",multiline:!0,rows:"1",value:this.state.department_note,onChange:this.handleChangeName,inputProps:{name:"department_note"},name:"department_note",className:l.textField,margin:"normal",helperText:"Maximum of 50 character",variant:"outlined",fullWidth:!0}):null)):null,"Able Sanoh industries (1996) co. ltd"===this.state.company_name?r.a.createElement(Dt.a,{component:"fieldset",className:l.formControl},r.a.createElement(jt.a,{component:"legend"},r.a.createElement(U.a,null," Delivery Type* | \u0e23\u0e39\u0e1b\u0e41\u0e1a\u0e1a\u0e01\u0e32\u0e23\u0e02\u0e19\u0e2a\u0e48\u0e07: ")),r.a.createElement(St.a,{"aria-label":"department",name:"delivery_type",className:l.group,value:this.state.delivery_type,onChange:this.handleChangeName,row:!0},r.a.createElement(He.f,{value:"normal",control:r.a.createElement(Ct.a,null),label:"Normal"}),r.a.createElement(He.f,{value:"special",control:r.a.createElement(Ct.a,null),label:"Special"}))):null),r.a.createElement(He.h,{item:!0,xs:6,className:l.box},"Type of car: ",this.state.car_type),r.a.createElement(He.h,{item:!0,xs:6,className:l.box},r.a.createElement(He.o,{id:"outlined-multiline-flexible",label:"Price | \u0e23\u0e32\u0e04\u0e32",value:this.state.price,disabled:!0,inputProps:{name:"price"},type:"number",InputLabelProps:{shrink:!0},name:"price",className:l.textField,margin:"normal",variant:"outlined",fullWidth:!0})),r.a.createElement(He.h,{item:!0,xs:12,className:l.box},"Note:",r.a.createElement(He.o,{id:"outlined-multiline-flexible",label:"\u0e2d\u0e37\u0e48\u0e19\u0e46",multiline:!0,rows:"3",value:this.state.note,onChange:this.handleChangeName,inputProps:{name:"note"},className:l.textField,margin:"normal",helperText:"Maximum of 100 character",variant:"outlined",fullWidth:!0})),r.a.createElement(He.h,{item:!0,xs:6,className:l.box},"Driver Name | \u0e04\u0e19\u0e02\u0e31\u0e1a\u0e23\u0e16: ",r.a.createElement("br",null)," ",o),r.a.createElement(He.h,{item:!0,xs:6,className:l.box},"Issuer's name | \u0e1c\u0e39\u0e49\u0e2a\u0e31\u0e48\u0e07\u0e07\u0e32\u0e19: ",r.a.createElement("br",null)," ",i))),r.a.createElement(He.h,{container:!0,style:{justifyContent:"center"}},r.a.createElement(He.k,{style:{width:"100%",margin:10,textAlign:"center",display:"contents"}},r.a.createElement(He.a,{variant:"contained",color:"primary",style:{margin:10},onClick:function(){return e.props.history.push("invoicelist")}},"Cancel"),r.a.createElement(He.a,{variant:"contained",color:"primary",style:{margin:10},onClick:function(){return e.handleSubmit()}},"Save"))))}}]),t}(r.a.Component),_r=Object(M.withStyles)(function(e){return{container:{textAlign:"flex-start",margin:"auto",marginBottom:20,padding:20,width:window.innerWidth<=1024?"95%":"60%",height:"100%"},paper:{padding:2*e.spacing.unit,textAlign:"flext-start",alignContent:"center",whiteSpace:"nowrap",height:"100%"},divider:{margin:"".concat(2*e.spacing.unit,"px 0")},box:{border:"solid",padding:10,borderWidth:.25,borderColor:"grey",boxSizing:"border-box"},boxButton:{alignContent:"flex-start",border:"solid",padding:10,borderWidth:.25,borderColor:"grey",boxSizing:"border-box"},textField:{},textField_number:{height:"100%",width:150,marginRight:10,marginTop:10},formControl:{margin:2,borderWidth:1,borderStyle:"groove",borderRadius:5,padding:10}}})(br),vr=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){console.log(this.props);var e=this.props.classes,t=[this.props.origin].concat(Object(b.a)(this.props.destination)),a=[this.props.origin_geo_in].concat(Object(b.a)(this.props.dest_geo_in)),n=[this.props.origin_geo_out].concat(Object(b.a)(this.props.dest_geo_out)),i=this.props.return_in,o=this.props.return_out,l=this.props.will_return;return r.a.createElement("div",{className:e.root},r.a.createElement(Kt.a,{alternativeLabel:!0},t.map(function(e,t){return r.a.createElement(Zt.a,{key:e},r.a.createElement(ea.a,null,r.a.createElement(He.p,{style:{fontSize:"10px"}},e,r.a.createElement("br",null),"0"!==a[t]?new ra.a(a[t]).add(0,"hours").toDate().toLocaleString():"-"," ",r.a.createElement("br",null),"0"!==n[t]?new ra.a(n[t]).add(0,"hours").toDate().toLocaleString():"-"," ",r.a.createElement("br",null),0===t&&l?"0"!==i?new ra.a(i).add(0,"hours").toDate().toLocaleString():"-":"","  ",r.a.createElement("br",null),0===t&&l?"0"!==o?new ra.a(o).add(0,"hours").toDate().toLocaleString():"-":"")))})))}}]),t}(r.a.Component),yr=Object(M.withStyles)(function(e){return{root:{width:"90%",fontSize:12},backButton:{marginRight:e.spacing.unit},instructions:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit}}})(vr),Er=a(207),xr=a.n(Er),kr=a(210),Cr=a.n(kr),Or=a(208),Sr=a.n(Or),wr=a(173),jr=a.n(wr),Nr=a(209),Dr=a.n(Nr),Pr=a(330),Ir=a.n(Pr),Ar={success:et.a,warning:st.a,error:at.a,info:rt.a};var Tr=Object(M.withStyles)(function(e){return{success:{backgroundColor:ut.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:dt.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,i=e.onClose,o=e.variant,l=Object(d.a)(e,["classes","className","message","onClose","variant"]),s=Ar[o];return r.a.createElement(Ze.a,Object.assign({className:y()(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(s,{className:y()(t.icon,t.iconVariant)}),n),action:[r.a.createElement(Ye.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},r.a.createElement(ot.a,{className:t.icon}))]},l))});function Rr(e){return r.a.createElement(Ir.a,null,r.a.createElement(oe.a,e))}var Lr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleSnackbarClose=function(e,t){"clickaway"!==t&&a.setState({snackbar_open:!1})},a.state={data:{},lastOrder:"",firstOrder:"",open:!1,updated_data:"",filled_data:"",reset_time:!1,snackbar_open:!1,order_id:""},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this,a=G.a.get("".concat(H.url,"/orders?company_id=").concat(localStorage.getItem("companyID"),"&_sort=job_no:DESC&_limit=1")),n=G.a.get("".concat(H.url,"/orders?company_id=").concat(localStorage.getItem("companyID"),"&_sort=job_no:ASC&_limit=1"));Promise.all([a,n]).then(function(e){console.log(e),t.setState({lastOrder:e[0].data[0].job_no,firstOrder:e[1].data[0].job_no})}).catch(function(e){console.log(e.message)}).then(function(){G.a.get("".concat(H.url,"/orders/").concat(e.props.history.location.search.replace("?",""))).then(function(t){console.log(t.data),e.setState({data:t.data})})})}},{key:"previous",value:function(){var e=this;G.a.get("".concat(H.url,"/orders?job_no=").concat(this.pad(parseInt(this.state.data.job_no)-1,5),"&company_id=").concat(localStorage.getItem("companyID"))).then(function(t){console.log(t.data),e.setState({data:t.data[0]})})}},{key:"handleConfirm",value:function(){var e=this;console.log(this),this.setState({open:!1}),""!==this.state.updated_data?G.a.put("".concat(H.url,"/orders/").concat(this.state.data.id),this.state.updated_data).then(function(e){}).then(function(){e.setState({data:Object(ne.a)({},e.state.data,e.state.updated_data),snackbar_open:!0,updated_data:""})}):""!==this.state.filled_data?G.a.post("".concat(H.url,"/orders/filltime"),this.state.filled_data).then(function(t){G.a.get("".concat(H.url,"/orders/").concat(e.props.history.location.search.replace("?",""))).then(function(t){console.log(t.data),e.setState({data:Object(ne.a)({},e.state.data,t.data),snackbar_open:!0,open:!1,filled_data:""})})}):this.state.reset_time&&G.a.post("".concat(H.url,"/orders/resettime"),{order_id:this.state.order_id,dest_geo_in:this.state.dest_geo_in,dest_geo_out:this.state.dest_geo_out}).then(function(t){G.a.get("".concat(H.url,"/orders/").concat(e.props.history.location.search.replace("?",""))).then(function(t){console.log(t.data),e.setState({data:Object(ne.a)({},e.state.data,t.data),snackbar_open:!0,open:!1,reset_time:!1})})})}},{key:"next",value:function(){var e=this;G.a.get("".concat(H.url,"/orders?job_no=").concat(this.pad(parseInt(this.state.data.job_no)+1,5),"&company_id=").concat(localStorage.getItem("companyID"))).then(function(t){console.log(t.data),e.setState({data:t.data[0]})})}},{key:"pad",value:function(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}},{key:"render",value:function(){var e=this;console.log(this.state),console.log(this.props);var t=this.props.classes,a=this.state,n=a.data,i=a.lastOrder,o=a.firstOrder;return function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(n)?r.a.createElement("div",null,r.a.createElement(W.a,null),r.a.createElement("br",null),r.a.createElement(W.a,{color:"secondary"})):r.a.createElement(L.a,{container:!0,style:{justifyContent:"center",margin:"10px"}},r.a.createElement(Ke.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.snackbar_open,autoHideDuration:6e3,onClose:this.handleSnackbarClose},r.a.createElement(Tr,{onClose:this.handleSnackbarClose,variant:"success",message:"Operation successful!"})),r.a.createElement(It.a,{open:this.state.open,onClose:this.handleClose,PaperComponent:Rr,"aria-labelledby":"draggable-dialog-title"},r.a.createElement(Bt.a,{id:"draggable-dialog-title"},"Confirm"),r.a.createElement(Lt.a,null,r.a.createElement(Ha.a,null,"Are you sure to perform this operation?")),r.a.createElement(Tt.a,null,r.a.createElement(C.a,{onClick:function(){return e.handleClose()},color:"primary"},"No"),r.a.createElement(C.a,{onClick:function(){return e.handleConfirm()},color:"primary"},"Yes"))),r.a.createElement(L.a,{container:!0,style:{justifyContent:"center"}},r.a.createElement(oe.a,{style:{width:"100%",margin:10,textAlign:"center",display:"contents"}},"Administrator"!==localStorage.getItem("role")?r.a.createElement(C.a,{variant:"contained",size:"small",disabled:!!n&&n.job_no===o,className:t.button,onClick:function(){return e.previous()}},r.a.createElement(xr.a,{className:y()(t.leftIcon,t.iconSmall)}),"Previous"):null,console.log(n.will_return?""!==n.return_out:!!n.dest_geo_out.split("|").includes("0")),"admin"===localStorage.getItem("role")&&"match"===n.status?r.a.createElement(C.a,{variant:"contained",style:{backgroundColor:"#5CB85C",color:"white"},className:t.button,onClick:function(){e.setState({open:!0,updated_data:{checked_by:localStorage.getItem("username"),status:"confirm",updated_date:new Date}})}},"Confirm",r.a.createElement(Sr.a,{className:t.rightIcon})):null,"admin"===localStorage.getItem("role")?r.a.createElement(C.a,{variant:"contained",style:{backgroundColor:"#C90D0D",color:"white"},className:t.button,onClick:function(){e.setState({open:!0,updated_data:{checked_by:localStorage.getItem("username"),status:"void",updated_date:new Date}})}},"Void",r.a.createElement(jr.a,{className:t.rightIcon})):null,"GPS_error"===n.status&&"Administrator"===localStorage.getItem("role")?r.a.createElement(C.a,{variant:"contained",color:"secondary",className:t.button,onClick:function(){e.setState({open:!0,filled_data:{id:n.id,created_date:n.created_date,delivered_date:n.delivered_date,plate_no:n.plate_no,origin:n.origin,destination:n.destination,will_return:n.will_return,origin_geo_in:n.origin_geo_in,origin_geo_out:n.origin_geo_out,return_in:n.return_in,return_out:n.return_out,dest_geo_in:n.dest_geo_in,dest_geo_out:n.dest_geo_out,driver_name:n.driver_name,price:n.price}})}},"Fix Time",r.a.createElement(yt.a,{className:t.rightIcon})):null,"Administrator"===localStorage.getItem("role")?r.a.createElement(C.a,{variant:"contained",color:"secondary",className:t.button,onClick:function(){e.setState({open:!0,reset_time:!0,order_id:n.id,dest_geo_in:n.dest_geo_in,dest_geo_out:n.dest_geo_out})}},"Reset Time",r.a.createElement(jr.a,{className:t.rightIcon})):null,r.a.createElement(C.a,{variant:"contained",size:"small",className:t.button,onClick:function(){e.props.history.push("print",{id:n.id})}},r.a.createElement($n.a,{className:y()(t.leftIcon,t.iconSmall)}),"Print Preview"),r.a.createElement(C.a,{variant:"contained",size:"small",className:t.button,onClick:function(){e.props.history.push("report",{data:n})}},r.a.createElement(Ta.a,{className:y()(t.leftIcon,t.iconSmall)}),"Track Daily Record"),n.issuer!==localStorage.getItem("username")&&"admin"!==localStorage.getItem("role")||"confirm"===n.status?null:r.a.createElement(C.a,{variant:"contained",size:"small",className:t.button,onClick:function(){e.props.history.push("editinvoice",{id:n.id})}},r.a.createElement(Dr.a,{className:y()(t.leftIcon,t.iconSmall)}),"Edit"),"Administrator"!==localStorage.getItem("role")?r.a.createElement(C.a,{variant:"contained",size:"small",disabled:!!n&&n.job_no===i,className:t.button,onClick:function(){return e.next()}},"Next",r.a.createElement(Cr.a,{className:t.rightIcon})):null)),r.a.createElement(oe.a,{className:t.root,elevation:1},r.a.createElement(He.p,null," Order status: "," ",r.a.createElement(ke.a,{label:n.status.replace("_"," "),key:n.status,color:"primary"}),r.a.createElement("br",null),"Updated date: ",new ra.a(n.updated_date).add(-7,"hours").toDate().toLocaleString(),r.a.createElement("br",null)),r.a.createElement(L.a,{container:!0,style:{justifyContent:"center"}},r.a.createElement(L.a,{item:!0,xs:8,className:t.box,style:{textAlign:"center"}},r.a.createElement("img",{src:n.company_logo,alt:"no logo found",width:"75px",style:{float:"left"}}),r.a.createElement("b",{style:{textAlign:"top"}},n.company_name)),r.a.createElement(L.a,{item:!0,xs:4,className:t.box,style:{justifyContent:"end"}},"Job no. | \u0e43\u0e1a\u0e07\u0e32\u0e19\u0e17\u0e35\u0e48: ",n.job_no),r.a.createElement(L.a,{item:!0,xs:8,className:t.box},"Transporter | \u0e02\u0e19\u0e2a\u0e48\u0e07: ",n.supplier),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Date | \u0e27\u0e31\u0e19\u0e17\u0e35\u0e48: ",new ra.a(n.created_date).add(-7,"hours").toDate().toLocaleString()),r.a.createElement(L.a,{item:!0,xs:4,className:t.box,style:{justifyContent:"end"}},"Invoice No.: ",n.invoice_no),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Car Plate* | \u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e23\u0e16: ",n.plate_no),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"No. of trip | \u0e40\u0e17\u0e35\u0e48\u0e22\u0e27\u0e17\u0e35\u0e48: ",n.trip_no),r.a.createElement(yr,{origin:n.origin,destination:n.destination?n.destination.split("|"):[],origin_geo_in:n.origin_geo_in?n.origin_geo_in:"",origin_geo_out:n.origin_geo_out?n.origin_geo_out:"",dest_geo_in:n.dest_geo_in?n.dest_geo_in.split("|"):[],dest_geo_out:n.dest_geo_out?n.dest_geo_out.split("|"):[],return_in:n.return_in,return_out:n.return_out,will_return:n.will_return}),r.a.createElement(L.a,{item:!0,xs:4,className:t.box}," Return* | \u0e23\u0e31\u0e1a\u0e01\u0e25\u0e31\u0e1a: "," ",n.will_return?"\u2714\ufe0f":"-"),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Overtime* | \u0e25\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32: "," ",n.over_time?"\u2714\ufe0f":"-"),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Over Night | \u0e04\u0e49\u0e32\u0e07\u0e04\u0e37\u0e19*: "," ",n.over_night?"\u2714\ufe0f":"-",r.a.createElement("br",null),n.over_night?r.a.createElement(Ee.a,{id:"date",label:"Delivered date",type:"date",value:new ra.a(n.delivered_date).toDate().toISOString().slice(0,10),fullWidth:!0,className:t.textField,InputProps:{style:{fontSize:12}},InputLabelProps:{shrink:!0,style:{zIndex:0}},name:"delivered_date",disabled:!0}):null),r.a.createElement(L.a,{item:!0,xs:6,className:t.box},"Product*: "," ",n.products?n.products.split("|").map(function(e){return"Pallet"===e?r.a.createElement(ke.a,{label:"Pallet [".concat(n.num_pallet,"]"),key:e,color:"primary"}):"Rack"===e?r.a.createElement(ke.a,{label:"Rack [".concat(n.num_rack,"]"),key:e,color:"primary"}):"Dies"===e?r.a.createElement(ke.a,{label:"Dies [".concat(n.num_die,"]"),key:e,color:"primary"}):"Box"===e?r.a.createElement(ke.a,{label:"Box [".concat(n.num_box,"]"),key:e,color:"primary"}):r.a.createElement(ke.a,{label:e,key:e,color:"primary"})}):[]),r.a.createElement(L.a,{item:!0,xs:6,className:t.box},"Seal Number: ",n.seal_no," ",r.a.createElement("br",null)),r.a.createElement(L.a,{item:!0,xs:6,className:t.box},"Department : ",n.department," ",r.a.createElement("br",null)),r.a.createElement(L.a,{item:!0,xs:6,className:t.box},"Delivery Type: ",n.delivery_type," ",r.a.createElement("br",null)),r.a.createElement(L.a,{item:!0,xs:6,className:t.box},"Type of car: ",n.car_type),r.a.createElement(L.a,{item:!0,xs:6,className:t.box},"Amount | \u0e23\u0e32\u0e04\u0e32: ",n.price," "," Baht"),r.a.createElement(L.a,{item:!0,xs:12,className:t.box},"Note:",n.note),r.a.createElement(L.a,{item:!0,xs:4,style:{padding:20,textAlign:"center",marginBottom:30},className:t.box},"Driver Name | \u0e04\u0e19\u0e02\u0e31\u0e1a\u0e23\u0e16: ",r.a.createElement("br",null),n.driver_name),r.a.createElement(L.a,{item:!0,xs:4,style:{padding:20,textAlign:"center",marginBottom:30},className:t.box},"Issuer's name | \u0e1c\u0e39\u0e49\u0e2a\u0e31\u0e48\u0e07\u0e07\u0e32\u0e19: ",r.a.createElement("br",null)," ",r.a.createElement("b",null,n.issuer)),r.a.createElement(L.a,{item:!0,xs:4,style:{padding:20,textAlign:"center",marginBottom:30},className:t.box},"Checked by | \u0e1c\u0e39\u0e49\u0e15\u0e23\u0e27\u0e08\u0e07\u0e32\u0e19: ",r.a.createElement("br",null)," ",n.checked_by))))}}]),t}(r.a.Component),zr=Object(M.withStyles)(function(e){return{root:{padding:"0.5cm",width:window.innerWidth<=1024?"95%":"60%",height:"auto"},divider:{margin:"".concat(2*e.spacing.unit,"px 0")},box:{border:"solid",padding:10,borderWidth:.25,borderColor:"grey",boxSizing:"border-box"},button:{margin:e.spacing.unit},leftIcon:{marginRight:e.spacing.unit},rightIcon:{marginLeft:e.spacing.unit},iconSmall:{fontSize:20}}})(Lr),Br=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){console.log(this.props);var e=this.props.classes,t=[this.props.origin].concat(Object(b.a)(this.props.destination)),a=[this.props.origin_geo_in].concat(Object(b.a)(this.props.dest_geo_in)),n=[this.props.origin_geo_out].concat(Object(b.a)(this.props.dest_geo_out)),i=this.props.return_in,o=this.props.return_out,l=this.props.will_return,s=this.props.times.split("\n");return r.a.createElement("div",{className:e.root},r.a.createElement(Kt.a,{alternativeLabel:!0,style:{padding:0,paddingTop:10}},t.map(function(e,t){return r.a.createElement(Zt.a,{key:e},r.a.createElement(ea.a,null,r.a.createElement(He.p,{style:{fontSize:"10px"}},e,r.a.createElement("br",null),0!==t?"Deliveries:"+s[t-1]+" times":"",r.a.createElement("br",null),"0"!==a[t]?new ra.a(a[t]).add(0,"hours").toDate().toLocaleString():"-"," ",r.a.createElement("br",null),"0"!==n[t]?new ra.a(n[t]).add(0,"hours").toDate().toLocaleString():"-"," ",r.a.createElement("br",null),0===t&&l?"0"!==i?new ra.a(i).add(0,"hours").toDate().toLocaleString():"-":"","  ",r.a.createElement("br",null),0===t&&l?"0"!==o?new ra.a(o).add(0,"hours").toDate().toLocaleString():"-":"")))})))}}]),t}(r.a.Component),Fr=Object(M.withStyles)(function(e){return{root:{width:"90%",fontSize:12},backButton:{marginRight:e.spacing.unit},instructions:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit}}})(Br),Wr=a(174),Vr=a.n(Wr),Ur=a(175),Mr=a.n(Ur),qr={success:et.a,warning:st.a,error:at.a,info:rt.a};var Gr=Object(M.withStyles)(function(e){return{success:{backgroundColor:ut.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:dt.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,i=e.onClose,o=e.variant,l=Object(d.a)(e,["classes","className","message","onClose","variant"]),s=qr[o];return r.a.createElement(Ze.a,Object.assign({className:y()(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(s,{className:y()(t.icon,t.iconVariant)}),n),action:[r.a.createElement(Ye.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},r.a.createElement(ot.a,{className:t.icon}))]},l))});function Hr(e){return r.a.createElement(Ir.a,null,r.a.createElement(oe.a,e))}var Jr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleSnackbarClose=function(e,t){"clickaway"!==t&&a.setState({snackbar_open:!1})},a.state={data:{},lastOrder:"",firstOrder:"",open:!1,updated_data:"",filled_data:"",reset_time:!1,snackbar_open:!1,order_id:""},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this,a=G.a.get("".concat(H.url,"/orders?company_id=").concat(localStorage.getItem("companyID"),"&_sort=job_no:DESC&_limit=1")),n=G.a.get("".concat(H.url,"/orders?company_id=").concat(localStorage.getItem("companyID"),"&_sort=job_no:ASC&_limit=1"));Promise.all([a,n]).then(function(e){console.log(e),t.setState({lastOrder:e[0].data[0].job_no,firstOrder:e[1].data[0].job_no})}).catch(function(e){console.log(e.message)}).then(function(){G.a.get("".concat(H.url,"/orders/").concat(e.props.history.location.search.replace("?",""))).then(function(t){console.log(t.data),e.setState({data:t.data})})})}},{key:"previous",value:function(){var e=this;G.a.get("".concat(H.url,"/orders?job_no=").concat(this.pad(parseInt(this.state.data.job_no)-1,5),"&company_id=").concat(localStorage.getItem("companyID"))).then(function(t){console.log(t.data),e.setState({data:t.data[0]})})}},{key:"handleConfirm",value:function(){var e=this;console.log(this),this.setState({open:!1}),""!==this.state.updated_data?G.a.put("".concat(H.url,"/orders/").concat(this.state.data.id),this.state.updated_data).then(function(e){}).then(function(){e.setState({data:Object(ne.a)({},e.state.data,e.state.updated_data),snackbar_open:!0,updated_data:""})}):""!==this.state.filled_data?G.a.post("".concat(H.url,"/orders/filltime"),this.state.filled_data).then(function(t){G.a.get("".concat(H.url,"/orders/").concat(e.props.history.location.search.replace("?",""))).then(function(t){console.log(t.data),e.setState({data:Object(ne.a)({},e.state.data,t.data),snackbar_open:!0,open:!1,filled_data:""})})}):this.state.reset_time&&G.a.post("".concat(H.url,"/orders/resettime"),{order_id:this.state.order_id,dest_geo_in:this.state.dest_geo_in,dest_geo_out:this.state.dest_geo_out}).then(function(t){G.a.get("".concat(H.url,"/orders/").concat(e.props.history.location.search.replace("?",""))).then(function(t){console.log(t.data),e.setState({data:Object(ne.a)({},e.state.data,t.data),snackbar_open:!0,open:!1,reset_time:!1})})})}},{key:"next",value:function(){var e=this;G.a.get("".concat(H.url,"/orders?job_no=").concat(this.pad(parseInt(this.state.data.job_no)+1,5),"&company_id=").concat(localStorage.getItem("companyID"))).then(function(t){console.log(t.data),e.setState({data:t.data[0]})})}},{key:"pad",value:function(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}},{key:"render",value:function(){var e=this;console.log(this.state),console.log(this.props);var t=this.props.classes,a=this.state,n=a.data,i=a.lastOrder,o=a.firstOrder;return console.log(n),function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(n)?r.a.createElement("div",null,r.a.createElement(W.a,null),r.a.createElement("br",null),r.a.createElement(W.a,{color:"secondary"})):r.a.createElement(L.a,{container:!0,style:{justifyContent:"center",margin:"10px"}},r.a.createElement(Ke.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.snackbar_open,autoHideDuration:6e3,onClose:this.handleSnackbarClose},r.a.createElement(Gr,{onClose:this.handleSnackbarClose,variant:"success",message:"Operation successful!"})),r.a.createElement(It.a,{open:this.state.open,onClose:this.handleClose,PaperComponent:Hr,"aria-labelledby":"draggable-dialog-title"},r.a.createElement(Bt.a,{id:"draggable-dialog-title"},"Confirm"),r.a.createElement(Lt.a,null,r.a.createElement(Ha.a,null,"Are you sure to perform this operation?")),r.a.createElement(Tt.a,null,r.a.createElement(C.a,{onClick:function(){return e.handleClose()},color:"primary"},"No"),r.a.createElement(C.a,{onClick:function(){return e.handleConfirm()},color:"primary"},"Yes"))),r.a.createElement(L.a,{container:!0,style:{justifyContent:"center"}},r.a.createElement(oe.a,{style:{width:"100%",margin:10,textAlign:"center",display:"contents"}},"Administrator"!==localStorage.getItem("role")?r.a.createElement(C.a,{variant:"contained",size:"small",disabled:!!n&&n.job_no===o,className:t.button,onClick:function(){return e.previous()}},r.a.createElement(xr.a,{className:y()(t.leftIcon,t.iconSmall)}),"Previous"):null,console.log(n.will_return?""!==n.return_out:!!n.dest_geo_out.split("|").includes("0")),"admin"===localStorage.getItem("role")&&"match"===n.status?r.a.createElement(C.a,{variant:"contained",style:{backgroundColor:"#5CB85C",color:"white"},className:t.button,onClick:function(){e.setState({open:!0,updated_data:{checked_by:localStorage.getItem("username"),status:"confirm",updated_date:new Date}})}},"Confirm",r.a.createElement(Sr.a,{className:t.rightIcon})):null,"admin"===localStorage.getItem("role")?r.a.createElement(C.a,{variant:"contained",style:{backgroundColor:"#C90D0D",color:"white"},className:t.button,onClick:function(){e.setState({open:!0,updated_data:{checked_by:localStorage.getItem("username"),status:"void",updated_date:new Date}})}},"Void",r.a.createElement(jr.a,{className:t.rightIcon})):null,"GPS_error"===n.status&&"Administrator"===localStorage.getItem("role")?r.a.createElement("div",null,r.a.createElement(C.a,{variant:"contained",color:"secondary",className:t.button,onClick:function(){e.setState({open:!0,filled_data:{id:n.id,created_date:n.created_date,delivered_date:n.delivered_date,plate_no:n.plate_no,origin:n.origin,destination:n.destination,will_return:n.will_return,origin_geo_in:n.origin_geo_in,origin_geo_out:n.origin_geo_out,return_in:n.return_in,return_out:n.return_out,dest_geo_in:n.dest_geo_in,dest_geo_out:n.dest_geo_out,driver_name:n.driver_name}})}},"Fix Time",r.a.createElement(yt.a,{className:t.rightIcon})),r.a.createElement(C.a,{variant:"contained",color:"secondary",className:t.button,onClick:function(){e.setState({open:!0,reset_time:!0,order_id:n.id,dest_geo_in:n.dest_geo_in,dest_geo_out:n.dest_geo_out})}},"Reset Time",r.a.createElement(jr.a,{className:t.rightIcon}))):null,r.a.createElement(tr.a,{trigger:function(){return r.a.createElement(C.a,{variant:"contained",size:"small",className:t.button,onClick:function(){e.props.history.push("print",{id:n.id})}},r.a.createElement($n.a,{className:y()(t.leftIcon,t.iconSmall)}),"Print Preview")},content:function(){return e.componentRef}}),r.a.createElement(C.a,{variant:"contained",size:"small",className:t.button,onClick:function(){e.props.history.push("report",{data:n})}},r.a.createElement(Ta.a,{className:y()(t.leftIcon,t.iconSmall)}),"Track Daily Record"),n.issuer!==localStorage.getItem("username")&&"admin"!==localStorage.getItem("role")||"confirm"===n.status?null:r.a.createElement(C.a,{variant:"contained",size:"small",className:t.button,onClick:function(){e.props.history.push("editinvoiceAP",{id:n.id})}},r.a.createElement(Dr.a,{className:y()(t.leftIcon,t.iconSmall)}),"Edit"),"Administrator"!==localStorage.getItem("role")?r.a.createElement(C.a,{variant:"contained",size:"small",disabled:!!n&&n.job_no===i,className:t.button,onClick:function(){return e.next()}},"Next",r.a.createElement(Cr.a,{className:t.rightIcon})):null)),r.a.createElement(oe.a,{className:t.root,elevation:1},r.a.createElement(L.a,{container:!0,style:{justifyContent:"center",padding:20,fontSize:12},ref:function(t){return e.componentRef=t}},r.a.createElement(L.a,{container:!0},r.a.createElement(L.a,{item:!0,xs:6},r.a.createElement(He.p,null," Order status: ",n.status.replace("_"," "))),r.a.createElement(L.a,{item:!0,xs:6},r.a.createElement(He.p,{style:{float:"right"}},"Updated date: ",new ra.a(n.updated_date).add(-7,"hours").toDate().toLocaleString()))),r.a.createElement(L.a,{item:!0,xs:8,className:t.box,style:{textAlign:"center"}},r.a.createElement("img",{src:n.company_logo,alt:"no logo found",width:"75px",style:{float:"left"}}),r.a.createElement("b",{style:{textAlign:"top"}},n.company_name)),r.a.createElement(L.a,{item:!0,xs:4,className:t.box,style:{justifyContent:"end"}},"Job no. | \u0e43\u0e1a\u0e07\u0e32\u0e19\u0e17\u0e35\u0e48: ",n.job_no),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Transporter | \u0e02\u0e19\u0e2a\u0e48\u0e07: ",n.supplier),r.a.createElement(L.a,{item:!0,xs:5,className:t.box},"Date | \u0e27\u0e31\u0e19\u0e17\u0e35\u0e48: ",new ra.a(n.created_date).add(-7,"hours").toDate().toLocaleString()),r.a.createElement(L.a,{item:!0,xs:3,className:t.box},"No. of trip | \u0e40\u0e17\u0e35\u0e48\u0e22\u0e27\u0e17\u0e35\u0e48: ",n.trip_no),r.a.createElement(L.a,{item:!0,xs:8,className:t.box},r.a.createElement(L.a,{container:!0},r.a.createElement(L.a,{item:!0,xs:8},"Car Plate* | \u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e23\u0e16: ",n.plate_no),r.a.createElement(L.a,{item:!0,xs:4},"Code No. :"))),r.a.createElement(L.a,{item:!0,xs:4,className:t.box,container:!0},r.a.createElement(L.a,{item:!0,xs:12},"Type of car | \u0e0a\u0e19\u0e34\u0e14\u0e23\u0e16\u0e02\u0e19\u0e2a\u0e48\u0e07: ",n.car_type),r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(Mr.a,{control:r.a.createElement(Vr.a,{checked:n.long_pick_up,value:"long_pick_up",disabled:!0}),label:"5 m long"}))),r.a.createElement(Fr,{origin:n.origin,destination:n.destination?n.destination.split("|"):[],origin_geo_in:n.origin_geo_in?n.origin_geo_in:"",origin_geo_out:n.origin_geo_out?n.origin_geo_out:"",dest_geo_in:n.dest_geo_in?n.dest_geo_in.split("|"):[],dest_geo_out:n.dest_geo_out?n.dest_geo_out.split("|"):[],return_in:n.return_in,return_out:n.return_out,will_return:n.will_return,times:n.times}),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Return* | \u0e23\u0e31\u0e1a\u0e01\u0e25\u0e31\u0e1a: "," ",n.will_return?"\u2714\ufe0f":"-"),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Overtime* | \u0e25\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32: "," ",n.over_time?"\u2714\ufe0f":"-"),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Over Night | \u0e04\u0e49\u0e32\u0e07\u0e04\u0e37\u0e19*: "," ",n.over_night?"\u2714\ufe0f":"-",r.a.createElement("br",null),n.over_night?r.a.createElement(Ee.a,{id:"date",label:"Delivered date",type:"date",value:new ra.a(n.delivered_date).toDate().toISOString().slice(0,10),fullWidth:!0,className:t.textField,InputProps:{style:{fontSize:12}},InputLabelProps:{shrink:!0,style:{zIndex:0}},name:"delivered_date",disabled:!0}):null),r.a.createElement(L.a,{item:!0,xs:12,container:!0},r.a.createElement(L.a,{item:!0,xs:7,className:t.box},r.a.createElement(L.a,{item:!0,xs:12,style:{textAlign:"center",backgroundColor:"#2ecc71",height:48}},"Description of out-bound:    ",r.a.createElement(Mr.a,{control:r.a.createElement(Vr.a,{value:"part"}),label:"Part"}),r.a.createElement(Mr.a,{control:r.a.createElement(Vr.a,{value:"document"}),label:"Document"})),r.a.createElement(L.a,{container:!0,item:!0,xs:12,style:{marginTop:10}},r.a.createElement(L.a,{item:!0,xs:4},r.a.createElement(Ee.a,{id:"text",label:"Item code",type:"text",variant:"outlined",fullWidth:!0,className:t.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},value:n.products_ap,name:"products_ap",onChange:this.handleChangeName,multiline:!0,rows:40,disabled:!0})),r.a.createElement(L.a,{item:!0,xs:2},r.a.createElement(Ee.a,{id:"text",type:"text",label:"Q.",variant:"outlined",fullWidth:!0,className:t.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},name:"pro_quantity_ap",value:n.pro_quantity_ap,onChange:this.handleChangeName,multiline:!0,rows:40,disabled:!0})),r.a.createElement(L.a,{item:!0,xs:3},r.a.createElement(Ee.a,{id:"text",type:"text",label:"Orders",variant:"outlined",fullWidth:!0,className:t.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},name:"orders_no",value:n.orders_no,onChange:this.handleChangeName,multiline:!0,rows:40,disabled:!0})),r.a.createElement(L.a,{item:!0,xs:3},r.a.createElement(Ee.a,{id:"text",label:"Invoices",type:"text",variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},value:n.invoices_out_ap,name:"invoices_out_ap",onChange:this.handleChangeName,multiline:!0,rows:40,disabled:!0})))),r.a.createElement(L.a,{item:!0,xs:5,container:!0,className:t.box},r.a.createElement(L.a,{item:!0,xs:12,style:{textAlign:"center",backgroundColor:"#2ecc71"}},"Description of in-bound:  ",r.a.createElement(Mr.a,{control:r.a.createElement(Vr.a,{value:"part"}),label:"Part"}),r.a.createElement(Mr.a,{control:r.a.createElement(Vr.a,{value:"document"}),label:"Document"})),r.a.createElement(L.a,{container:!0,item:!0,xs:12,className:t.box},r.a.createElement(L.a,{item:!0,xs:5},r.a.createElement(Ee.a,{id:"text",label:"Item code",type:"text",variant:"outlined",fullWidth:!0,className:t.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},value:n.products_in_ap,name:"products_in_ap",onChange:this.handleChangeName,multiline:!0,rows:20,disabled:!0})),r.a.createElement(L.a,{item:!0,xs:2},r.a.createElement(Ee.a,{id:"text",label:"Q.",type:"text",variant:"outlined",fullWidth:!0,className:t.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},value:n.pro_in_quantity_ap,name:"pro_in_quantity_ap",onChange:this.handleChangeName,multiline:!0,rows:20,disabled:!0})),r.a.createElement(L.a,{item:!0,xs:5},r.a.createElement(Ee.a,{id:"text",label:"Invoices",type:"text",variant:"outlined",fullWidth:!0,className:t.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},value:n.invoices_in_ap,name:"invoices_in_ap",onChange:this.handleChangeName,multiline:!0,rows:20,disabled:!0}))),r.a.createElement(L.a,{item:!0,xs:12,container:!0,className:t.box},r.a.createElement(L.a,{item:!0,xs:4},r.a.createElement(Ee.a,{variant:"outlined",label:" Trip (\u0e3f)",InputLabelProps:{shrink:!0,style:{zIndex:0}},className:t.input,inputProps:{"aria-label":"Description",style:{fontSize:10,padding:10}},name:"price_trip",value:n.price_trip,onChange:this.handleChangeName,fullWidth:!0,disabled:!0})),r.a.createElement(L.a,{item:!0,xs:4},r.a.createElement(Ee.a,{variant:"outlined",label:"Toll (\u0e3f)",InputLabelProps:{shrink:!0,style:{zIndex:0}},className:t.input,inputProps:{"aria-label":"Description",style:{fontSize:10,padding:10}},name:"price_toll",value:n.price_toll,onChange:this.handleChangeName,fullWidth:!0,disabled:!0})),r.a.createElement(L.a,{item:!0,xs:4},r.a.createElement(Ee.a,{variant:"outlined",label:"Other (\u0e3f)",InputLabelProps:{shrink:!0,style:{zIndex:0}},className:t.input,inputProps:{"aria-label":"Description",style:{fontSize:10,padding:10}},name:"price_other",value:n.price_other,onChange:this.handleChangeName,fullWidth:!0,disabled:!0}))),r.a.createElement(L.a,{item:!0,xs:12,container:!0},r.a.createElement(L.a,{item:!0,xs:6,className:t.box},r.a.createElement(L.a,{item:!0,xs:7},"Sender Name/ WH: "),r.a.createElement(L.a,{item:!0,xs:5},"Date / Time: ")),r.a.createElement(L.a,{item:!0,xs:6,className:t.box},r.a.createElement(L.a,{item:!0,xs:7},"Name of Receiver: "),r.a.createElement(L.a,{item:!0,xs:5},"Date / Time:  "))),r.a.createElement(L.a,{item:!0,xs:6,className:t.box},"Report by: "),r.a.createElement(L.a,{item:!0,xs:6,className:t.box},"Date / Time: "),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Driver Name | \u0e04\u0e19\u0e02\u0e31\u0e1a\u0e23\u0e16: ",r.a.createElement("br",null)," ",n.driver_name),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Issuer's name | \u0e1c\u0e39\u0e49\u0e2a\u0e31\u0e48\u0e07\u0e07\u0e32\u0e19: ",r.a.createElement("br",null)," ",n.issuer),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Approved by | \u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34\u0e42\u0e14\u0e22: ",n.checked_by),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Date / Time:"),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Date / Time:"),r.a.createElement(L.a,{item:!0,xs:4,className:t.box},"Date / Time:"))))))}}]),t}(r.a.Component),Yr=Object(M.withStyles)(function(e){return{root:{padding:"0.5cm",width:window.innerWidth<=1024?"95%":"21cm",height:"auto"},divider:{margin:"".concat(2*e.spacing.unit,"px 0")},box:{border:"solid",padding:10,borderWidth:.25,borderColor:"grey",boxSizing:"border-box"},button:{margin:e.spacing.unit},leftIcon:{marginRight:e.spacing.unit},rightIcon:{marginLeft:e.spacing.unit},iconSmall:{fontSize:20}}})(Jr);function Qr(e){var t=e.inputRef,a=Object(d.a)(e,["inputRef"]);return r.a.createElement("div",Object.assign({ref:t},a))}var Kr={Control:function(e){return r.a.createElement(Ee.a,Object.assign({fullWidth:!0,InputProps:{inputComponent:Qr,inputProps:Object(ne.a)({className:e.selectProps.classes.input,inputRef:e.innerRef,children:e.children},e.innerProps)}},e.selectProps.textFieldProps))},Menu:function(e){return r.a.createElement(oe.a,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)},MultiValue:function(e){return r.a.createElement(ke.a,{tabIndex:-1,label:e.children,className:y()(e.selectProps.classes.chip,Object(_.a)({},e.selectProps.classes.chipFocused,e.isFocused)),onDelete:e.removeProps.onClick,deleteIcon:r.a.createElement(we.a,e.removeProps)})},NoOptionsMessage:function(e){return r.a.createElement(U.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return r.a.createElement(Oe.a,Object.assign({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps),e.children)},Placeholder:function(e){return r.a.createElement(U.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return r.a.createElement(U.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return r.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}},Xr=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={single:null,multi:null},a.handleChange=function(e){return function(t){return console.log(a.state.single),a.props.vehicle&&(a.props.onUpdate([t,a.state.single]),a.setState(Object(_.a)({},e,t))),t.value===a.props.origin?alert("origin & destination cannot be same"):a.props.destination.includes(t.value)?alert("destination cannot be same"):void(a.props.vehicle||a.props.plate_no?(a.props.onUpdate([t,a.state.single,a.props.index]),a.setState(Object(_.a)({},e,t))):alert("please select vehicle first"))}},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e),this.setState({single:e.defaultValue})}},{key:"render",value:function(){console.log(this.props),console.log(this.state);var e=this.props,t=e.classes,a=e.theme,n={input:function(e){return Object(ne.a)({},e,{color:a.palette.text.primary,"& input":{font:"inherit"}})}};return r.a.createElement("div",{className:t.root},r.a.createElement(ve.a,null,r.a.createElement(ga.a,{classes:t,styles:n,options:this.props.suggestions,components:Kr,value:this.state.single,onChange:this.handleChange("single"),placeholder:this.state.single,clearable:!1})))}}]),t}(r.a.Component),Zr=Object(M.withStyles)(function(e){return{root:{flexGrow:1,height:"auto"},input:{display:"flex",padding:0},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:"".concat(e.spacing.unit/2,"px ").concat(e.spacing.unit/4,"px")},chipFocused:{backgroundColor:Object(je.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},singleValue:{fontSize:12},placeholder:{position:"absolute",left:2,fontSize:12,paddingLeft:10},paper:{position:"absolute",zIndex:10,marginTop:e.spacing.unit,left:0,right:0},divider:{height:2*e.spacing.unit}}},{withTheme:!0})(Xr),$r=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){console.log(this.props);var e=this.props.classes,t=this.props.origin?[this.props.origin].concat(Object(b.a)(this.props.destination)):[];return r.a.createElement("div",{className:e.root},r.a.createElement(Kt.a,{alternativeLabel:!0},t.map(function(e){return r.a.createElement(Zt.a,{key:e},r.a.createElement(ea.a,null,e))})))}}]),t}(r.a.Component),ei=Object(M.withStyles)(function(e){return{root:{width:"90%"},backButton:{marginRight:e.spacing.unit},instructions:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit}}})($r);function ti(e){return r.a.createElement(Wt.a,Object.assign({direction:"up"},e))}var ai=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){a.setState({open:!1}),a.props.onUpdateState(!1)},a.handleSubmit=function(e){a.setState({open:!1}),a.props.onUpdateState(!1),G.a.put("".concat(H.url,"/orders/").concat(a.props.orderid),e).then(function(t){console.log(t),alert("Updated Data successfully"),G.a.post("".concat(H.url,"/orders/resettime"),{order_id:a.props.orderid,dest_geo_in:e.destination,dest_geo_out:e.destination})}).then(function(){a.props.history.push("invoicelist")})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;console.log(this.props);var t=this.props.classes;return r.a.createElement("div",null,r.a.createElement(It.a,{fullWidth:!0,maxWidth:"md",open:this.props.open,TransitionComponent:ti,keepMounted:!0,onClose:this.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(Bt.a,{id:"alert-dialog-slide-title",style:{margin:"auto"}},"Please verified before confirm order?"),r.a.createElement(Qn.a,null),r.a.createElement(Lt.a,null,r.a.createElement(Ut.a,{className:t.table},r.a.createElement(qt.a,null,r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Date")),r.a.createElement(Ht.a,null,this.props.data.created_date?new ra.a(this.props.data.created_date).toDate().toLocaleString():"")),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Invoice")),r.a.createElement(Ht.a,null,this.props.data.invoice_no)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Transporter")),r.a.createElement(Ht.a,null,this.props.data.supplier)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Vehicle")),r.a.createElement(Ht.a,null,this.props.data.plate_no)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Product")),r.a.createElement(Ht.a,null,0!==Object.keys(this.props.data).length?this.props.data.products_ap.split("\n").map(function(t,a){return r.a.createElement(ke.a,{label:"".concat(t,"[").concat(e.props.data.pro_quantity_ap.split("\n")[a]||" ","]"),key:t,color:"primary"})}):null)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Note")),r.a.createElement(Ht.a,null,this.props.data.note)),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"Return")),r.a.createElement(Ht.a,null,this.props.data.will_return?r.a.createElement(ke.a,{label:"True",color:"primary"}):r.a.createElement(ke.a,{label:"False"}))),r.a.createElement(Yt.a,null,r.a.createElement(Ht.a,{component:"th",scope:"row"},r.a.createElement("b",null,"\u0e04\u0e49\u0e32\u0e07\u0e04\u0e37\u0e19*")),r.a.createElement(Ht.a,null,this.props.data.over_night?r.a.createElement(ke.a,{label:"True",color:"primary"}):r.a.createElement(ke.a,{label:"False"}))))),r.a.createElement(ei,{origin:0!==Object.keys(this.props.data).length?this.props.data.origin:"",destination:0!==Object.keys(this.props.data).length?this.props.data.destination.split("|"):[]})),r.a.createElement(Qn.a,null),r.a.createElement(Tt.a,null,r.a.createElement(C.a,{onClick:this.handleClose,variant:"contained",color:"secondary"},"Cancel"),r.a.createElement(C.a,{onClick:function(){return e.handleSubmit(e.props.data)},variant:"contained",color:"primary"},"Confirm"))))}}]),t}(r.a.Component),ni=Object(M.withStyles)(function(e){return{root:{minWidth:"700px",maxWidth:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},tableHead:{backgroundColor:"green"}}})(ai),ri={success:et.a,warning:st.a,error:at.a,info:rt.a};var ii=Object(M.withStyles)(function(e){return{success:{backgroundColor:ut.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:dt.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,i=e.onClose,o=e.variant,l=Object(d.a)(e,["classes","className","message","onClose","variant"]),s=ri[o];return r.a.createElement(Ze.a,Object.assign({className:y()(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(s,{className:y()(t.icon,t.iconVariant)}),n),action:[r.a.createElement(He.i,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},r.a.createElement(ot.a,{className:t.icon}))]},l))}),oi=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){return function(t){"onOverNight"===e&&a.setState({delivered_date:(new ra.a).add(1,"days").toDate().toISOString().slice(0,10)}),a.setState(Object(_.a)({},e,t.target.checked))}},a.handleChangeTime=function(e){return function(t){console.log(t.target.value),console.log(e),console.log(a.state.inputLinkClicked.length);var n=parseInt(t.target.value);a.setState(function(t){console.log(e);var a=t.times.map(function(t,a){return console.log(a),a===e&&(console.log(a),t=n),t});return console.log(a),{times:a}}),console.log(a.state.times)}},a.handleChangeName=function(e){console.log(e.target.name),a.setState(Object(_.a)({},e.target.name,e.target.value))},a.onUpdateProps=function(e){a.setState({showDialog:e})},a.onUpdate=function(e){console.log(e);var t=Object(re.a)(Object(re.a)(a));if(e[0].product&&(""!==a.state.products_ap?a.setState({products_ap:a.state.products_ap+"\n"+e[0].value}):a.setState({products_ap:e[0].value})),e[0].origin&&a.setState({origin:e[0].value}),e[0].destination&&(console.log(e[0].value),"FAURECIA ARGENTINA S.A."===e[0].value||"Adient South Africa Proprietary Limited"===e[0].value?a.setState({order_type:"abroad"}):a.setState({order_type:"local"}),console.log(e[2]),a.setState(function(t){return{destination:t.destination.map(function(t,a){return a===e[2]&&(t=e[0].value),console.log(t),t})}})),e[0].vehicle){var n=a.state.pois.filter(function(t){return t.appid===e[0].appid});console.log(n),a.setState({vehicle:e[0].value,car_type:e[0].type,pois:n}),G.a.get("".concat(H.url,"/suppliers?appid=").concat(e[0].appid)).then(function(e){console.log(e),t.setState({supplier:e.data[0].name})})}},a.onUpdate_pro_in=function(e){console.log(e),e[0].product&&(""!==a.state.products_in_ap?a.setState({products_in_ap:a.state.products_in_ap+"\n"+e[0].value}):a.setState({products_in_ap:e[0].value}))},a.handleSnackbarClose=function(e,t){"clickaway"!==t&&a.setState({snackbar_open:!1})},a.state={currentOrderId:"",onReturn:!1,onOvertime:!1,onOverNight:!1,pallet:!0,rack:!1,dies:!1,box:!1,product_note:"",seal_no:"",vehicle:"",origin:"",destination:[],issuer_name:"",origin_geo_in:"",origin_geo_out:"",dest_geo_in:"",dest_geo_out:"",car_type:"",price:"",note:"",job_no:"",invoice_no:"",supplier:"",delivered_date:"",submitData:{},num_pallet:"",num_die:"",num_rack:"",num_box:"",department:"PC",delivery_type:"normal",department_note:"",products_ap:"",pro_quantity_ap:"",invoices_out_ap:"",invoices_in_ap:"",orders_no:"",long_pick_up:!1,products_in_ap:"",pro_in_quantity_ap:"",loading:!0,multiline:"",company_logo:"",company_name:"",suppliers:"",pois:[],vehicles:[],products:[],inputLinkClicked:[1],showDialog:!1,times:[1],price_trip:"",price_toll:"",price_other:""},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(){if(console.log("sumit"),this.state.vehicle)if(this.state.origin)if(0===this.state.destination.length||this.state.destination.includes(null))this.setState({alert:"Please specfic destination of delivery",snackbar_open:!0});else if(this.state.destination.includes(this.state.origin))this.setState({alert:"Origin and destination cannot be same",snackbar_open:!0});else{var e=this.state,t=e.job_no,a=e.invoice_no,n=e.supplier,r=e.vehicle,i=e.origin,o=e.destination,l=e.onReturn,s=e.onOverNight,c=e.onOvertime,u=e.seal_no,p=e.car_type,d=e.note,m=e.price,h=e.issuer_name,g=e.delivered_date,f=e.company_logo,b=e.company_name,_=e.trip_no,v=e.process,y=e.products_ap,E=e.pro_quantity_ap,x=e.price_ap,k=e.toll_price_ap,C=e.invoices_in_ap,O=e.invoices_out_ap,S=e.times,w=e.price_trip,j=e.price_toll,N=e.price_other,D=e.order_type,P=e.created_date,I=e.orders_no,A=e.long_pick_up,T=e.products_in_ap,R=e.pro_in_quantity_ap;""===O&&this.setState({alert:"Invoice number is missing",snackbar_open:!0});var L={job_no:t,invoice_no:a,supplier:n,plate_no:r,origin:i,destination:o.join("|"),will_return:l,over_night:s,over_time:c,seal_no:u,car_type:p,note:d,price:m,issuer:h,updated_date:new ra.a(new Date).add(0,"hours").toDate(),created_date:P,delivered_date:g,status:"new",company_id:localStorage.getItem("companyID"),company_logo:f,company_name:b,trip_no:_,process:v,products_ap:y,pro_quantity_ap:E,price_ap:x,toll_price_ap:k,invoices_in_ap:C,invoices_out_ap:O,times:S.join("\n"),price_trip:w,price_toll:j,price_other:N,order_type:D,orders_no:I,long_pick_up:A,products_in_ap:T,pro_in_quantity_ap:R};console.log(L),this.setState({showDialog:!0,submitData:L})}else this.setState({alert:"Please specfic origin of delivery",snackbar_open:!0});else this.setState({alert:"Plate_no is missing",snackbar_open:!0})}},{key:"componentWillMount",value:function(){var e=this,t=this;G.a.get("".concat(H.url,"/orders/").concat(this.props.history.location.state.id)).then(function(e){t.setState({currentOrderId:e.data.id,company_id:e.data.company_id,company_logo:e.data.company_logo,company_name:e.data.company_name,invoice_no:e.data.invoice_no,onReturn:e.data.will_return,onOvertime:e.data.over_time,onOverNight:e.data.over_night,seal_no:e.data.seal_no,vehicle:e.data.plate_no,origin:e.data.origin,destination:e.data.destination.split("|"),issuer_name:e.data.issuer,origin_geo_in:e.data.origin_geo_in,origin_geo_out:e.data.origin_geo_out,dest_geo_in:e.data.dest_geo_in,dest_geo_out:e.data.dest_geo_out,car_type:e.data.car_type,price:e.data.price,note:e.data.note,job_no:e.data.job_no,supplier:e.data.supplier,delivered_date:e.data.delivered_date,created_date:e.data.created_date,inputLinkClicked:new Array(e.data.destination.split("|").length).fill(1),trip_no:e.data.trip_no,products_ap:e.data.products_ap,products_in_ap:e.data.products_in_ap,pro_quantity_ap:e.data.pro_quantity_ap,pro_in_quantity_ap:e.data.pro_in_quantity_ap,invoices_in_ap:e.data.invoices_in_ap,invoices_out_ap:e.data.invoices_out_ap,invoices_in_quantity_ap:e.data.invoices_in_quantity_ap,invoices_out_quantity_ap:e.data.invoices_out_quantity_ap,times:e.data.times.split("\n"),price_trip:e.data.price_trip,price_toll:e.data.price_toll,price_other:e.data.price_other,order_type:e.data.order_type,process:e.data.process,long_pick_up:e.data.long_pick_up,orders_no:e.data.orders_no,driver_name:e.data.driver_name})}).then(function(){var a=G.a.get("".concat(H.url,"/companies/").concat(e.state.company_id));Promise.all([a]).then(function(e){console.log(e[0]),t.setState({loading:!1,suppliers:e[0].data.supplier,company_abbr:e[0].data.abbr})}).catch(function(e){console.log(e.message),t.setState({loading:!1})}).then(Object(f.a)(g.a.mark(function t(){var a,n,r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.suppliers.map(function(e,t){return G.a.get("".concat(H.url,"/vehicles?appid=").concat(e.appid,"&_sort=plate_no:ASC&_limit=1000"),{})}),n=e.state.suppliers.map(function(t,a){return G.a.get("".concat(H.url,"/pois?appid=").concat(t.appid,"&_sort=name:ASC&_limit=1000&company_name=").concat(e.state.company_abbr),{})}),r=G.a.get("".concat(H.url,"/products?_sort=CUSTOMER_ITEM_CODE_SALE:ASC&_limit=10000")),t.next=5,Promise.all([Promise.all([a,n,r]).then(function(e){return e})]).then(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a[0][0].map(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a.then(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({vehicles:[].concat(Object(b.a)(e.state.vehicles),Object(b.a)(a.data))});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 2:return t.next=4,a[0][1].map(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a.then(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({pois:[].concat(Object(b.a)(e.state.pois),Object(b.a)(a.data))});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 4:return t.next=6,e.setState({products:[].concat(Object(b.a)(e.state.products),Object(b.a)(a[0][2].data))});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 5:case"end":return t.stop()}},t)})))})}},{key:"pad",value:function(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}},{key:"handleAddInput",value:function(){this.setState({inputLinkClicked:[].concat(Object(b.a)(this.state.inputLinkClicked),[1]),times:[].concat(Object(b.a)(this.state.times),[1]),destination:[].concat(Object(b.a)(this.state.destination),[null])})}},{key:"handleDeleteInput",value:function(e){console.log(e),this.setState({inputLinkClicked:this.state.inputLinkClicked.filter(function(t,a){return a!==e}),times:this.state.times.filter(function(e,t){return 0!==t}),destination:this.state.destination.filter(function(t,a){return a!==e})})}},{key:"handleDeletePackage",value:function(){var e=this;0!==this.state.products_ap.length&&(this.state.pro_quantity_ap.split("\n").length===this.state.products_ap.split("\n").length?this.setState({products_ap:this.state.products_ap.split("\n").filter(function(t,a){return a!==e.state.products_ap.split("\n").length-1}).join("\n"),pro_quantity_ap:this.state.pro_quantity_ap.split("\n").filter(function(t,a){return a!==e.state.pro_quantity_ap.split("\n").length-1}).join("\n")}):this.setState({products_ap:this.state.products_ap.split("\n").filter(function(t,a){return a!==e.state.products_ap.split("\n").length-1}).join("\n")}))}},{key:"handleDeleteInPackage",value:function(){var e=this;0!==this.state.products_in_ap.length&&(this.state.pro_in_quantity_ap.split("\n").length===this.state.products_in_ap.split("\n").length?this.setState({products_in_ap:this.state.products_in_ap.split("\n").filter(function(t,a){return a!==e.state.products_in_ap.split("\n").length-1}).join("\n"),pro_in_quantity_ap:this.state.pro_in_quantity_ap.split("\n").filter(function(t,a){return a!==e.state.pro_in_quantity_ap.split("\n").length-1}).join("\n")}):this.setState({products_in_ap:this.state.products_in_ap.split("\n").filter(function(t,a){return a!==e.state.products_in_ap.split("\n").length-1}).join("\n")}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.company_logo,n=t.company_name,i=t.issuer_name,o=t.driver_name;console.log(this.state);var l=this.props.classes;if(this.state.loading)return r.a.createElement("div",null,r.a.createElement(He.j,null),r.a.createElement("br",null),r.a.createElement(He.j,{color:"secondary"}));var s=this.state.vehicles.map(function(e){return{value:e.plate_no,label:e.plate_no,type:e.vehicle_type,appid:e.appid,vehicle:!0}}),c=this.state.pois.map(function(e){return{value:e.name,label:e.name,origin:!0}}),u=this.state.pois.map(function(e){return{value:e.name,label:e.name,destination:!0}}),p=function(e){return Object(b.a)(new Set(e.map(function(e){return JSON.stringify(e)}))).map(function(e){return JSON.parse(e)})},d=p(this.state.products.filter(function(e){return"(blank)"!==e.CUSTOMER_ITEM_CODE_SALE?e:null}).map(function(e){return{value:e.CUSTOMER_ITEM_CODE_SALE,label:e.CUSTOMER_ITEM_CODE_SALE,product:!0}})),m=p(c),h=p(u);return r.a.createElement("div",{style:{paddingTop:"20px"}},r.a.createElement(Ke.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.snackbar_open,autoHideDuration:6e3,onClose:this.handleSnackbarClose},r.a.createElement(ii,{onClose:this.handleSnackbarClose,variant:"error",message:this.state.alert})),r.a.createElement(ni,{open:this.state.showDialog,onUpdateState:this.onUpdateProps,data:this.state.submitData,orderid:this.props.history.location.state.id,history:this.props.history}),r.a.createElement(He.k,{className:l.container},r.a.createElement(He.h,{container:!0},r.a.createElement(He.h,{item:!0,xs:8,className:l.box,style:{textAlign:"center"}},r.a.createElement("img",{src:a,alt:"no logo found",width:"75px",style:{float:"left"}}),r.a.createElement("b",null,n)),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},"Job no. | \u0e43\u0e1a\u0e07\u0e32\u0e19\u0e17\u0e35\u0e48: ",this.state.job_no),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},"Transporter | \u0e02\u0e19\u0e2a\u0e48\u0e07: ",this.state.supplier),r.a.createElement(He.h,{item:!0,xs:5,className:l.box},"Date | \u0e27\u0e31\u0e19\u0e17\u0e35\u0e48: ",new ra.a(this.state.created_date).add(-7,"hours").toDate().toLocaleString()),r.a.createElement(He.h,{item:!0,xs:3,className:l.box},"No. of trip | \u0e40\u0e17\u0e35\u0e48\u0e22\u0e27\u0e17\u0e35\u0e48: ",this.state.trip_no),r.a.createElement(He.h,{item:!0,xs:8,className:l.box},r.a.createElement(He.h,{container:!0},r.a.createElement(He.h,{item:!0,xs:2},"Car Plate* | \u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19\u0e23\u0e16:"),r.a.createElement(He.h,{item:!0,xs:4},r.a.createElement(Zr,{suggestions:s,vehicle:!0,defaultValue:this.state.vehicle,onUpdate:this.onUpdate,origin:this.state.origin?this.state.origin:"",destination:this.state.destination?this.state.destination:[]})),r.a.createElement(He.h,{item:!0,xs:1}),r.a.createElement(He.h,{item:!0,xs:3},"Code No. :"))),r.a.createElement(He.h,{item:!0,xs:4,className:l.box,container:!0},r.a.createElement(He.h,{item:!0,xs:12},"Type of car: ",this.state.car_type),r.a.createElement(He.h,{item:!0,xs:12},r.a.createElement(He.f,{control:r.a.createElement(He.d,{checked:this.state.long_pick_up,onChange:this.handleChange("long_pick_up"),value:"long_pick_up"}),label:"5 m long"}))),r.a.createElement(He.h,{item:!0,xs:5,className:l.box},r.a.createElement(He.h,{container:!0},r.a.createElement(He.h,{item:!0,xs:3},"Origin | \u0e08\u0e38\u0e14\u0e40\u0e23\u0e34\u0e48\u0e21\u0e15\u0e49\u0e19*"),r.a.createElement(He.h,{item:!0,xs:9},r.a.createElement(Zr,{suggestions:m,plate_no:this.state.vehicle,onUpdate:this.onUpdate,origin:this.state.origin?this.state.origin:"",defaultValue:this.state.origin,destination:this.state.destination?this.state.destination:[]})),r.a.createElement(He.h,{container:!0,style:{margin:"6px"}},r.a.createElement(He.h,{item:!0,xs:6},"Time in | \u0e40\u0e27\u0e25\u0e32\u0e40\u0e02\u0e49\u0e32: "),r.a.createElement(He.h,{item:!0,xs:6},"Time out | \u0e40\u0e27\u0e25\u0e32\u0e2d\u0e2d\u0e01: ")))),r.a.createElement(He.h,{item:!0,xs:7,className:l.box},this.state.inputLinkClicked.map(function(t,a){return r.a.createElement(He.h,{container:!0,key:a},0===a?r.a.createElement(He.h,{item:!0,xs:2},"Destination | \u0e1b\u0e25\u0e32\u0e22\u0e17\u0e32\u0e07*"):r.a.createElement(He.h,{item:!0,xs:2}),r.a.createElement(He.h,{item:!0,xs:8,container:!0},r.a.createElement(He.h,{item:!0,xs:10},r.a.createElement(Zr,{key:a,suggestions:h,plate_no:e.state.vehicle,onUpdate:e.onUpdate,origin:e.state.origin?e.state.origin:"",defaultValue:{value:e.state.destination[a],label:e.state.destination[a],destination:!0},destination:e.state.destination?e.state.destination:[],index:a})),r.a.createElement(He.h,{item:!0,xs:2},r.a.createElement(He.o,{id:"text",label:"times",type:"number",variant:"outlined",InputLabelProps:{shrink:!0},inputProps:{style:{fontSize:10,padding:10,paddingLeft:5}},value:e.state.times[a],onChange:e.handleChangeTime(a),rowsMax:1}))),r.a.createElement(He.h,{item:!0,xs:2},0===a&&e.state.inputLinkClicked.length<7?r.a.createElement(He.i,{variant:"contained",color:"secondary",className:l.button,style:{float:"right"},onClick:function(){return e.handleAddInput()}},r.a.createElement(yt.a,null)):null,0!==a&&e.state.inputLinkClicked.length>1?r.a.createElement(He.i,{variant:"contained",color:"secondary",className:l.button,style:{float:"right"},onClick:function(){return e.handleDeleteInput(a)}},r.a.createElement(xt.a,null)):null),0===a?r.a.createElement(He.h,{container:!0,style:{margin:"6px"}},r.a.createElement(He.h,{item:!0,xs:6},"Time in | \u0e40\u0e27\u0e25\u0e32\u0e40\u0e02\u0e49\u0e32:   "),r.a.createElement(He.h,{item:!0,xs:6},"Time out | \u0e40\u0e27\u0e25\u0e32\u0e2d\u0e2d\u0e01:   ")):r.a.createElement(He.h,{container:!0,style:{margin:"6px"}},r.a.createElement(He.h,{item:!0,xs:6},"Time in | \u0e40\u0e27\u0e25\u0e32\u0e40\u0e02\u0e49\u0e32:  "),r.a.createElement(He.h,{item:!0,xs:6},"Time out | \u0e40\u0e27\u0e25\u0e32\u0e2d\u0e2d\u0e01:  ")))})),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},r.a.createElement(He.f,{control:r.a.createElement(He.n,{checked:this.state.onReturn,onChange:this.handleChange("onReturn"),value:this.state.onReturn}),label:this.state.onReturn?"Return* | \u0e23\u0e31\u0e1a\u0e01\u0e25\u0e31\u0e1a":"No return | \u0e44\u0e21\u0e48\u0e23\u0e31\u0e1a\u0e01\u0e25\u0e31\u0e1a"})),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},r.a.createElement(He.f,{control:r.a.createElement(He.n,{checked:this.state.onOvertime,onChange:this.handleChange("onOvertime"),value:this.state.onOvertime}),label:this.state.onOvertime?"Overtime* | \u0e25\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32":"No overtime | \u0e44\u0e21\u0e48\u0e25\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32"})),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},r.a.createElement(He.f,{control:r.a.createElement(He.n,{checked:this.state.onOverNight,onChange:this.handleChange("onOverNight"),value:this.state.onOverNight}),label:this.state.onOverNight?"Over Night | \u0e04\u0e49\u0e32\u0e07\u0e04\u0e37\u0e19*":"No over night | \u0e44\u0e21\u0e48\u0e04\u0e49\u0e32\u0e07\u0e04\u0e37\u0e19"}),this.state.onOverNight?r.a.createElement(He.o,{id:"date",label:"Delivered date",type:"date",defaultValue:this.state.delivered_date?new ra.a(this.state.delivered_date).toDate().toISOString().slice(0,10):(new ra.a).add(1,"days").toDate().toISOString().slice(0,10),fullWidth:!0,onChange:this.handleChangeName,className:l.textField,InputProps:{style:{fontSize:12}},InputLabelProps:{shrink:!0,style:{zIndex:0}},name:"delivered_date"}):null),r.a.createElement(He.h,{item:!0,xs:12,container:!0},r.a.createElement(He.h,{item:!0,xs:7,className:l.box},r.a.createElement(He.h,{item:!0,xs:12,style:{textAlign:"center",backgroundColor:"#2ecc71",height:48}},"Description of out-bound:    ",r.a.createElement(He.f,{control:r.a.createElement(He.d,{value:"part"}),label:"Part"}),r.a.createElement(He.f,{control:r.a.createElement(He.d,{value:"document"}),label:"Document"})),r.a.createElement(He.h,{container:!0,item:!0,xs:12,style:{marginTop:10}},r.a.createElement(He.h,{item:!0,xs:4},r.a.createElement(He.o,{id:"text",label:"Item code",type:"text",variant:"outlined",fullWidth:!0,className:l.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},value:this.state.products_ap,name:"products_ap",onChange:this.handleChangeName,multiline:!0,rowsMax:40,disabled:!0}),r.a.createElement(He.h,null,r.a.createElement(Zr,{suggestions:d,product:!0,plate_no:this.state.vehicle,onUpdate:this.onUpdate,origin:this.state.origin?this.state.origin:"",destination:this.state.destination?this.state.destination:[]}))),r.a.createElement(He.h,{item:!0,xs:2},r.a.createElement(He.o,{id:"text",type:"text",label:"Q.",variant:"outlined",fullWidth:!0,className:l.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},name:"pro_quantity_ap",value:this.state.pro_quantity_ap,onChange:this.handleChangeName,multiline:!0,rowsMax:40}),r.a.createElement(He.i,{variant:"contained",color:"secondary",className:l.button,style:{float:"right"},onClick:function(){return e.handleDeletePackage()}},r.a.createElement(xt.a,null))),r.a.createElement(He.h,{item:!0,xs:3},r.a.createElement(He.o,{id:"text",type:"text",label:"Orders",variant:"outlined",fullWidth:!0,className:l.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},name:"orders_no",value:this.state.orders_no,onChange:this.handleChangeName,multiline:!0,rowsMax:40})),r.a.createElement(He.h,{item:!0,xs:3},r.a.createElement(He.o,{id:"text",label:"Invoices",type:"text",variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},name:"invoices_out_ap",value:this.state.invoices_out_ap,onChange:this.handleChangeName,multiline:!0,rowsMax:40})))),r.a.createElement(He.h,{item:!0,xs:5,container:!0,className:l.box},r.a.createElement(He.h,{item:!0,xs:12,style:{textAlign:"center",backgroundColor:"#2ecc71"}},"Description of in-bound:  ",r.a.createElement(He.f,{control:r.a.createElement(He.d,{value:"part"}),label:"Part"}),r.a.createElement(He.f,{control:r.a.createElement(He.d,{value:"document"}),label:"Document"})),r.a.createElement(He.h,{container:!0,item:!0,xs:12,className:l.box},r.a.createElement(He.h,{item:!0,xs:5},r.a.createElement(He.o,{id:"text",label:"Item code",type:"text",variant:"outlined",fullWidth:!0,className:l.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},value:this.state.products_in_ap,name:"products_in_ap",onChange:this.handleChangeName,multiline:!0,rowsMax:20,disabled:!0}),r.a.createElement(He.h,null,r.a.createElement(Zr,{suggestions:d,product:!0,plate_no:this.state.vehicle,onUpdate:this.onUpdate_pro_in,origin:this.state.origin?this.state.origin:"",destination:this.state.destination?this.state.destination:[]}))),r.a.createElement(He.h,{item:!0,xs:2},r.a.createElement(He.o,{id:"text",label:"Q.",type:"text",variant:"outlined",fullWidth:!0,className:l.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},value:this.state.pro_in_quantity_ap,name:"pro_in_quantity_ap",onChange:this.handleChangeName,multiline:!0,rowsMax:20}),r.a.createElement(He.i,{variant:"contained",color:"secondary",className:l.button,style:{float:"right"},onClick:function(){return e.handleDeleteInPackage()}},r.a.createElement(xt.a,null))),r.a.createElement(He.h,{item:!0,xs:5},r.a.createElement(He.o,{id:"text",label:"Invoices",type:"text",variant:"outlined",fullWidth:!0,className:l.textField,InputLabelProps:{shrink:!0,style:{zIndex:0}},InputProps:{style:{fontSize:10,padding:10}},name:"invoices_in_ap",value:this.state.invoices_in_ap,onChange:this.handleChangeName,multiline:!0,rowsMax:20}))),r.a.createElement(He.h,{item:!0,xs:12,container:!0,className:l.box},r.a.createElement(He.h,{item:!0,xs:4},r.a.createElement(He.o,{variant:"outlined",label:" Trip (\u0e3f)",type:"number",InputLabelProps:{shrink:!0,style:{zIndex:0}},className:l.input,inputProps:{"aria-label":"Description",style:{fontSize:10,padding:10}},name:"price_trip",value:this.state.price_trip,onChange:this.handleChangeName,fullWidth:!0})),r.a.createElement(He.h,{item:!0,xs:4},r.a.createElement(He.o,{variant:"outlined",label:"Toll (\u0e3f)",type:"number",InputLabelProps:{shrink:!0,style:{zIndex:0}},className:l.input,inputProps:{"aria-label":"Description",style:{fontSize:10,padding:10}},name:"price_toll",value:this.state.price_toll,onChange:this.handleChangeName,fullWidth:!0})),r.a.createElement(He.h,{item:!0,xs:4},r.a.createElement(He.o,{variant:"outlined",label:"Other (\u0e3f)",type:"number",InputLabelProps:{shrink:!0,style:{zIndex:0}},className:l.input,inputProps:{"aria-label":"Description",style:{fontSize:10,padding:10}},name:"price_other",value:this.state.price_other,onChange:this.handleChangeName,fullWidth:!0}))),r.a.createElement(He.h,{item:!0,xs:12,container:!0},r.a.createElement(He.h,{item:!0,xs:6,className:l.box},r.a.createElement(He.h,{item:!0,xs:7},"Sender Name/ WH: "),r.a.createElement(He.h,{item:!0,xs:5},"Date / Time: ")),r.a.createElement(He.h,{item:!0,xs:6,className:l.box},r.a.createElement(He.h,{item:!0,xs:7},"Name of Receiver: "),r.a.createElement(He.h,{item:!0,xs:5},"Date / Time:  "))),r.a.createElement(He.h,{item:!0,xs:6,className:l.box},"Report by: "),r.a.createElement(He.h,{item:!0,xs:6,className:l.box},"Date / Time: "),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},"Driver Name | \u0e04\u0e19\u0e02\u0e31\u0e1a\u0e23\u0e16: ",r.a.createElement("br",null)," ",o),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},"Issuer's name | \u0e1c\u0e39\u0e49\u0e2a\u0e31\u0e48\u0e07\u0e07\u0e32\u0e19: ",r.a.createElement("br",null)," ",i),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},"Approved by | \u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34\u0e42\u0e14\u0e22:"),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},"Date / Time:"),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},"Date / Time:"),r.a.createElement(He.h,{item:!0,xs:4,className:l.box},"Date / Time:"))))),r.a.createElement(He.h,{container:!0,style:{justifyContent:"center"}},r.a.createElement(He.k,{style:{width:"100%",margin:10,textAlign:"center",display:"contents"}},r.a.createElement(He.a,{variant:"contained",color:"primary",style:{margin:10},onClick:function(){return e.props.history.push("invoicelist")}},"Cancel"),r.a.createElement(He.a,{variant:"contained",color:"primary",style:{margin:10},onClick:function(){return e.handleSubmit()}},"Save"))))}}]),t}(r.a.Component),li=Object(M.withStyles)(function(e){return{container:{textAlign:"flex-start",margin:"auto",marginBottom:20,padding:20,width:window.innerWidth<=1024?"95%":"21cm",height:"100%",fontSize:12},paper:{padding:2*e.spacing.unit,textAlign:"flext-start",alignContent:"center",whiteSpace:"nowrap",height:"100%"},divider:{margin:"".concat(2*e.spacing.unit,"px 0")},box:{border:"solid",padding:10,borderWidth:.25,borderColor:"grey",boxSizing:"border-box"},boxButton:{alignContent:"flex-start",border:"solid",padding:10,borderWidth:.25,borderColor:"grey",boxSizing:"border-box"},button:{padding:5},textField:{fontSize:8},textField_number:{height:"100%",width:150,marginRight:10,marginTop:10},formControl:{margin:2,borderWidth:1,borderStyle:"groove",borderRadius:5,padding:10}}})(oi),si=a(168),ci=a.n(si),ui=a(202),pi=a.n(ui),di=a(321),mi=a.n(di),hi=a(19),gi=a.n(hi),fi=a(478),bi=a.n(fi),_i=function(){function e(){Object(l.a)(this,e),this.domain=H.url,this.fetch=this.fetch.bind(this),this.login=this.login.bind(this),this.getProfile=this.getProfile.bind(this)}return Object(s.a)(e,[{key:"login",value:function(e,t){var a=this;return G.a.post("".concat(this.domain,"/auth/local"),{identifier:e,password:t}).then(function(e){return console.log(e),a.setToken(e.data.jwt),localStorage.setItem("username",e.data.user.username),localStorage.setItem("role",e.data.user.role.name),localStorage.setItem("companyID",e.data.user.company),localStorage.setItem("supplierID",e.data.user.supplier),Promise.resolve(e.data)}).catch(function(e){localStorage.clear(),alert("error")})}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return bi()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"setToken",value:function(e){localStorage.setItem("id_token",e)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"logout",value:function(){return localStorage.clear()}},{key:"getProfile",value:function(){return bi()(this.getToken())}},{key:"fetch",value:function(e){function t(t,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var a={Accept:"application/json","Content-Type":"application/json"};return this.loggedIn()&&(a.Authorization="Bearer "+this.getToken()),fetch(e,Object(ne.a)({headers:a},t)).then(this._checkStatus).then(function(e){return e.json()})})},{key:"_checkStatus",value:function(e){if(e.status>=200&&e.status<400)return e;var t=new Error(e.statusText);throw t.response=e,t}}]),e}(),vi=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).Auth=new _i,a.handleChange=function(e){return function(t){a.setState(Object(_.a)({},e,t.target.value))}},a.handleClick=function(){a.Auth.login(a.state.email,a.state.password).then(function(e){console.log(e),a.props.history.push("/home")}).catch(function(e){console.log(e)})},a.handleKeyPress=function(e){"Enter"===e.key&&a.handleClick()},a.state={email:"",password:""},a.Auth=new _i,a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("main",{className:t.main},r.a.createElement(T.a,null),r.a.createElement(oe.a,{className:t.paper},r.a.createElement(en.a,{className:t.avatar},r.a.createElement(mi.a,null)),r.a.createElement(U.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form},r.a.createElement(Dt.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(pi.a,{htmlFor:"email"},"Email Address"),r.a.createElement(ci.a,{id:"email",name:"email",autoComplete:"email",value:this.state.email,autoFocus:!0,onChange:this.handleChange("email"),onKeyPress:this.handleKeyPress})),r.a.createElement(Dt.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(pi.a,{htmlFor:"password"},"Password"),r.a.createElement(ci.a,{name:"password",type:"password",id:"password",value:this.state.password,autoComplete:"current-password",onChange:this.handleChange("password"),onKeyPress:this.handleKeyPress})),r.a.createElement(C.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(){return e.handleClick()}},"Sign in"))))}}]),t}(n.Component),yi=gi()(function(e){return{main:Object(_.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(vi),Ei=(n.Component,function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).columns=[{Header:"Event deails",columns:[{Header:"Date/Time",accessor:"date",Cell:function(e){return r.a.createElement("span",null," ",new ra.a(e.value).add(-7,"hours").toDate().toLocaleDateString()," ",new ra.a(e.value).add(-7,"hours").toDate().toLocaleTimeString())}},{Header:"Geofencing Status",accessor:"status",Cell:function(e){return r.a.createElement("span",null," ",e.value?"In":"Out")}},{Header:"Site",accessor:"site",filterMethod:function(e,t){return Object(qa.a)(t,e.value,{keys:["site"]})},filterAll:!0},{Header:"Driver",accessor:"driver_name"}]},{Header:"Status",columns:[{Header:"Use as Origin",accessor:"origin_use",Cell:function(e){return r.a.createElement("span",null,e.value?"\u2714\ufe0f":null,console.log(e.row))},width:100,filterable:!1},{Header:"Use as Destination",accessor:"dest_use",Cell:function(e){return r.a.createElement("span",null,e.value?"\u2714\ufe0f":null)},width:100,filterable:!1},{Header:"Use as Return",accessor:"return_use",Cell:function(e){return r.a.createElement("span",null,e.value?"\u2714\ufe0f":null)},width:100,filterable:!1}]}],console.log(e),a.state={data:e.location.state.data,tableData:[]},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t="date_gte=".concat(ra()(this.state.data.created_date).add(0,"hours").startOf("day").add(-1,"hours"));console.log(this.state.data.created_date),console.log(t);var a=this.state.data.delivered_date?"date_lte=".concat(ra()(this.state.data.delivered_date).add(0,"hours").endOf("day").add(1,"hours")):"date_lte=".concat(ra()(this.state.data.created_date).add(0,"hours").endOf("day").add(1,"hours")),n="plate=".concat(this.state.data.plate_no)+"&"+t+"&"+a;G.a.get("".concat(H.url,"/eventins?").concat(n)).then(function(t){console.log(t),e.setState({tableData:t.data})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.history;this.state.data.data;return r.a.createElement(L.a,{container:!0,style:{justifyContent:"center"}},r.a.createElement(oe.a,{className:a.root,elevation:1},r.a.createElement(C.a,{onClick:function(){n.goBack()},color:"primary",autoFocus:!0},"Go Back"),r.a.createElement(Qa.a,{ref:function(t){e.reactTable=t},data:this.state.tableData,filterable:!0,defaultFilterMethod:function(e,t){return String(t[e.id])===e.value},columns:this.columns,defaultSorted:[{id:"date",asc:!0}],defaultPageSize:50,className:"-striped -highlight",getTrProps:function(t,a,n){return console.log(a),a&&a.original.order_id===e.state.data._id?{style:{background:"#BEBEBE"}}:{}}}),r.a.createElement("br",null),r.a.createElement(Ma,null),r.a.createElement(Ua,null)))}}]),t}(r.a.Component)),xi=Object(M.withStyles)(function(e){return{root:Object(ne.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,textAlign:"center",marginBottom:"10px",marginTop:"10px",width:"80%"})}})(Ei),ki=a(86);function Ci(e){var t=e.inputRef,a=Object(d.a)(e,["inputRef"]);return r.a.createElement("div",Object.assign({ref:t},a))}var Oi={Control:function(e){return r.a.createElement(Ee.a,{label:null,fullWidth:!0,InputProps:{inputComponent:Ci,inputProps:Object(ne.a)({className:e.selectProps.classes.input,inputRef:e.innerRef,children:e.children},e.innerProps)}})},Menu:function(e){return r.a.createElement(oe.a,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)},MultiValue:function(e){return r.a.createElement(ke.a,{tabIndex:-1,label:e.children,className:y()(e.selectProps.classes.chip,Object(_.a)({},e.selectProps.classes.chipFocused,e.isFocused)),onDelete:e.removeProps.onClick,deleteIcon:r.a.createElement(we.a,e.removeProps)})},NoOptionsMessage:function(e){return r.a.createElement(U.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return r.a.createElement(Oe.a,Object.assign({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps),e.children)},Placeholder:function(e){return r.a.createElement(U.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return r.a.createElement(U.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return r.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}},Si=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={single:null,multi:null},a.handleChange=function(e){return function(t){console.log(a.props),console.log(t);var n=a.props.inputs;0===t.length?(console.log("send from here"),a.props.onUpdate([{id:n[0].id,value:""}])):a.props.onUpdate(t),a.setState(Object(_.a)({},e,t))}},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e),e.clear&&this.setState({multi:[]})}},{key:"render",value:function(){console.log(this.props);var e=this.props,t=e.classes,a=e.theme,n=this.props.inputs.map(function(e){return{value:e.name,label:e.name,id:e.id}}),i={input:function(e){return Object(ne.a)({},e,{color:a.palette.text.primary,"& input":{font:"inherit"}})}};return r.a.createElement("div",{style:{margin:0},className:t.root},r.a.createElement(ve.a,null,r.a.createElement(be.a,{inputRef:this.props.inputRef,classes:t,styles:i,textFieldProps:{InputLabelProps:{shrink:!0}},name:this.props.name,options:n,components:Oi,value:this.state.multi,onChange:this.handleChange("multi"),placeholder:this.props.placeholder})))}}]),t}(r.a.Component),wi=Object(M.withStyles)(function(e){return{root:{flexGrow:1,height:"auto",margin:5},input:{display:"flex",padding:6},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:"".concat(e.spacing.unit/2,"px ").concat(e.spacing.unit/4,"px")},chipFocused:{backgroundColor:Object(je.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,fontSize:16,padding:10},paper:{position:"absolute",zIndex:1,marginTop:e.spacing.unit,left:0,right:0},divider:{height:2*e.spacing.unit}}},{withTheme:!0})(Si),ji=a(251);function Ni(e){console.log(e);var t=Object(ji.b)(),a=(t.register,t.handleSubmit,t.setValue,t.errors,t.getValues,t.reset,r.a.useState()),n=Object(ki.a)(a,2),i=n[0],o=n[1],l=function(){var e=Object(f.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://delivery-backend-1.powermap.live/orides",{method:"GET"}).then(function(e){return e.json()}).then(function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();r.a.useMemo(Object(f.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().then(function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o(t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)})),[]);return r.a.createElement(r.a.Fragment,null,i&&r.a.createElement(wi,{inputs:i,placeholder:"select Destination",onUpdate:function(t){e.changeDest(e.index,t)},inputRef:e.inputRef,name:e.name}))}var Di=a(770),Pi=a.n(Di),Ii=a(771),Ai=a.n(Ii);function Ti(e){return console.log(e),r.a.createElement("div",{style:"error"==e.severity?{position:"relative",padding:18,backgroundColor:"rgb(253, 236, 234)",width:e.width,borderRadius:"8px"}:"info"==e.severity?{position:"relative",padding:18,backgroundColor:"rgb(232, 244, 253)",width:e.width,borderRadius:"8px"}:null},r.a.createElement("span",{style:{position:"absolute",top:22,left:56}}," ",e.message),"error"==e.severity?r.a.createElement("img",{src:Pi.a,style:{height:24,weight:24}}):"info"==e.severity?r.a.createElement("img",{src:Ai.a,style:{height:24,weight:24}}):null," ")}var Ri=function(){var e=r.a.useState([{}]),t=Object(ki.a)(e,2),a=t[0],n=t[1],i=Object(ji.b)(),o=i.register,l=i.handleSubmit,s=i.setValue,c=i.errors,u=i.getValues,p=(i.reset,i.control),d=Object(ji.a)({control:p,name:"dest"}),m=(d.fields,d.append,d.prepend,d.remove,d.swap,d.move,d.insert,r.a.useState([])),h=Object(ki.a)(m,2),_=h[0],v=(h[1],r.a.useState(!1)),y=Object(ki.a)(v,2),E=y[0],x=y[1],k=function(e,t){_[e]=t.value;var a=_;console.log(a),console.log(e,t.value),s("dest[".concat(e,"]"),t.value),console.log(u("dest"))};console.log(_);var C=function(){var e=Object(f.a)(g.a.mark(function e(t,a){var n,r,i,o,l,s,c,p,d,m,h,b,v,y,E,k;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(console.log(t),"Other"==u("cost")&&(t.cost=u("suppilerOther")),"Other"==u("suppiler")&&(t.suppiler=u("suppilerOther")),delete t.suppilerOther,delete t.costOther,n=[],r=[],i=[],o=!0,l=!1,s=void 0,e.prev=11,c=t.destination[Symbol.iterator]();!(o=(p=c.next()).done);o=!0)d=p.value,console.log(d),i.push(d.contact),r.push(d.tel);e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),l=!0,s=e.t0;case 19:e.prev=19,e.prev=20,o||null==c.return||c.return();case 22:if(e.prev=22,!l){e.next=25;break}throw s;case 25:return e.finish(22);case 26:return e.finish(19);case 27:if(console.log(t.destination.length,_.length),t.destination.length===_.length){e.next=31;break}return x(!0),e.abrupt("return");case 31:for(m=!0,h=!1,b=void 0,e.prev=34,v=_[Symbol.iterator]();!(m=(y=v.next()).done);m=!0)E=y.value,n.push(E);e.next=42;break;case 38:e.prev=38,e.t1=e.catch(34),h=!0,b=e.t1;case 42:e.prev=42,e.prev=43,m||null==v.return||v.return();case 45:if(e.prev=45,!h){e.next=48;break}throw b;case 48:return e.finish(45);case 49:return e.finish(42);case 50:return console.log(n),x(!1),k={from:t.from,date:ra()(t.date,"YYYY-MM-DD").format("YYYYMMDD"),job_no:t.jobNo,cost:t.cost,suppiler:t.suppiler,car_type:t.carType,product:t.product,car_amount:t.amountCar,request_date:ra()(t.requestDate,"YYYY-MM-DD").format("YYYYMMDD"),arrive_time:t.arriveTime,purpose:t.purpose,start_place:t.startPlace,start_contact:t.startContact,start_tel:t.startTel,dest_place:JSON.stringify(n),dest_contact:JSON.stringify(i),dest_tel:JSON.stringify(r),return:t.return,request_by:t.requestBy,approve_by:JSON.stringify(t.approvedBy),arrange_by:t.arrangedBy,arrange_date:ra()(t.dateArranged,"YYYY-MM-DD").format("YYYYMMDD")},console.log(k),e.next=57,fetch("https://delivery-backend-1.powermap.live/specialrequests",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(k)}).then(function(e){return e.json()}).then(function(){var e=Object(f.a)(g.a.mark(function e(n){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t,n.id);case 2:alert("Send Success"),a.target.reset();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 57:case"end":return e.stop()}},e,null,[[11,15,19,27],[20,,22,26],[34,38,42,50],[43,,45,49]])}));return function(t,a){return e.apply(this,arguments)}}(),O=r.a.useState(!0),S=Object(ki.a)(O,2),w=S[0],j=S[1],N=r.a.useState(!0),D=Object(ki.a)(N,2),P=D[0],I=D[1],A=r.a.useState([{company:"AH",email:["isara.s@aapico.com","sirichai.b@aapico.com","tiwa.b@aapico.com"]},{company:"AHP",email:["isara.s@aapico.com","sirichai.b@aapico.com","tiwa.b@aapico.com"]},{company:"AHA",email:["Pornchai.p@aapico.com"]},{company:"AHD",email:["Narin.T@aapico.com"]},{company:"EA",email:["shivanand.a@aapico.com"]},{company:"AL",email:["prasert.i@aapico.com"]},{company:"AS",email:["Narit.g@asico.co.th"]},{company:"Other",email:null}]),T=Object(ki.a)(A,2),R=T[0],L=(T[1],function(){var e=Object(f.a)(g.a.mark(function e(t,a){var n,r,i,o,l,s,c,u,p,d,m;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.approvedBy.split(","),r=!0,i=!1,o=void 0,e.prev=4,l=n[Symbol.iterator]();case 6:if(r=(s=l.next()).done){e.next=25;break}return c=s.value,(u=new Headers).append("Content-Type","application/x-www-form-urlencoded"),p=window.location.origin,(d=new URLSearchParams).append("form","Delivery@aapico.com"),d.append("formdetail","Delivery System"),d.append("to","pokkate.e@aapico.com"),d.append("cc",""),d.append("bcc ",""),d.append("subject","Delivery System  ".concat(c)),d.append("body",'<html>\n          <link\n          href="https://fonts.googleapis.com/css2?family=Bai+Jamjuree:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"\n          rel="stylesheet">   \n        <body >\n        <table align="center" border="1" cellpadding="0" cellspacing="0" width="600" style="style=\'border-collapse: collapse;">\n        <tr>\n            <td style="   \n                       background : #1D366D   ;\n                       padding : 40px;\n                       font-size : 3em ;\n                       text-align :center ;\n                       color : #FFF\n                       ">\n                <p style="font-family : Bai Jamjuree ;margin: 0;">Delivery System </p>\n            </td>\n        </tr>\n        <tr style=\'text-align : center ;  \'>\n            <td style="   \n                       background : #FFF   ;\n                       padding : 20px;\n                       text-align :center ;\n                       color : #121212\n                       ">\n                <p style="font-family: Arial ;margin: 0 0 16 0;font-size : 2em;">\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e01\u0e32\u0e23\u0e2a\u0e48\u0e07\u0e02\u0e2d\u0e07</p>\n              <table align="center" border="1" cellpadding="0" cellspacing="0" width="400" style=\'font-family : Bai Jamjuree ;font-size : 16px ;\'> \n                <tr> \n                  <td style=\'padding : 4px 0px ; text-align :center ;\'>Job No. </td>\n                    <td style=\'padding : 4px 0px ; text-align :center ;\'>'.concat(t.jobNo," </td>\n                </tr>\n                 <tr> \n                  <td style='padding : 4px 0px ; text-align :center ;'>Date to use car </td>\n                    <td style='padding : 4px 0px ; text-align :center ;'>").concat(ra()(t.requestDate,"YYYYMMDD").format("DD-MM-YYYY"),"  </td>\n                </tr>\n                 <tr> \n                  <td style='padding : 4px 0px ; text-align :center ;'> Car </td>\n                    <td style='padding : 4px 0px ;  text-align :center ;'>").concat(t.carType,"  ").concat(t.amountCar,"  \u0e04\u0e31\u0e19\n                    </td>\n                </tr>\n                 <tr> \n                  <td style='padding : 4px 0px ; text-align :center ;'>Request By </td>\n                    <td style='padding : 4px 0px ; text-align :center ;'>").concat(t.requestBy," </td>\n                </tr>\n                 <tr> \n                  <td style='padding : 4px 0px ; text-align :center ;'>Purpose </td>\n                    <td style='padding : 4px 0px ; text-align :center ;'>").concat(t.purpose,' </td>\n                </tr>\n          </table>\n          <br>\n          <table align=\'center\' width="100%" border="0" cellspacing="0" cellpadding="0" >\n          <tr style=\'margin-top : 8px ;\'>\n            <td >\n              <table align=\'center\' border="0" cellspacing="0" cellpadding="0">\n                <tr>\n                  <td span=\'2\' align="center" style="border-radius: 8px;" bgcolor="">\n              \x3c!--[if mso]>\n      <v:roundrect xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" href="').concat(p,"/status/").concat(a,'/reject" style="height:40px;v-text-anchor:middle;width:100px;" arcsize="10%" strokecolor="#E53E3E" fillcolor="#E53E3E">\n        <w:anchorlock/>\n        <center style="color:#ffffff;font-family:sans-serif;font-size:13px;font-weight:bold;">Reject</center>\n      </v:roundrect>\n      <![endif]--\x3e\n      <a href="').concat(p,"/status/").concat(a,'/reject"  target="_blank"\n      style="background-color:#E53E3E;border:1px solid #E53E3E;border-radius:4px;color:#ffffff;display:inline-block;font-family:sans-serif;font-size:13px;font-weight:bold;line-height:40px;text-align:center;text-decoration:none;width:100px;-webkit-text-size-adjust:none;mso-hide:all;">Reject</a>\n         \n               \n          \n        \x3c!--[if mso]>\n      <v:roundrect xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" href="').concat(p,"/status/").concat(a,'/approve" style="height:40px;v-text-anchor:middle;width:100px;" arcsize="10%" strokecolor="#1D366D" fillcolor="#1D366D">\n      <w:anchorlock/>\n      <center style="color:#ffffff;font-family:sans-serif;font-size:13px;font-weight:bold;">Approve</center>\n      </v:roundrect>\n      <![endif]--\x3e<a href="').concat(p,"/status/").concat(a,'/approve" target="_blank"\n      style="background-color:#1D366D;border:1px solid #1D366D;border-radius:4px;color:#ffffff;display:inline-block;font-family:sans-serif;font-size:13px;font-weight:bold;line-height:40px;text-align:center;text-decoration:none;width:100px;-webkit-text-size-adjust:none;mso-hide:all;">Approve</a>\n      \n      \n      \n       </td>\n              </td>\n            </table>\n            </td>\n          </tr>\n        </table>\n          </td>\n          </tr>\n       \n        <tr>\n            <td  style="   \n                       background : #1D366D   ;\n                       padding : 20px;\n                       text-align :center ;\n                       color : #FFF\n                       ">\n                <p style="margin: 0;"> Copyright &copy; AAIPICO HITECH 2021</p>\n            </td>\n        </tr>\n      </table>\n  \n  </body>\n    \n  </html>')),m={method:"POST",headers:u,body:d,redirect:"follow"},e.next=22,fetch("https://ess.aapico.com/email",m).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){return console.log("error",e)});case 22:r=!0,e.next=6;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(4),i=!0,o=e.t0;case 31:e.prev=31,e.prev=32,r||null==l.return||l.return();case 34:if(e.prev=34,!i){e.next=37;break}throw o;case 37:return e.finish(34);case 38:return e.finish(31);case 39:case"end":return e.stop()}},e,null,[[4,27,31,39],[32,,34,38]])}));return function(t,a){return e.apply(this,arguments)}}());return r.a.useEffect(function(){o("cost",{required:"Please select  cost"}),o("suppiler",{required:"Please select suppiler"}),o("carType",{required:"Please select type of car"}),o("return",{required:"Please select return"})},[o]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(He.b,{style:{marginBottom:24,marginTop:24,marginLeft:"8vw",marginRight:"8vw"}},r.a.createElement(He.c,{style:{marginLeft:24,marginRight:24}},r.a.createElement("form",{onSubmit:l(C)},r.a.createElement(He.h,{justify:"space-evenly",container:!0,spacing:16},r.a.createElement(He.h,{justify:"center",item:!0,container:!0},r.a.createElement("h2",null,"TRANSPORTATION REQUISITION FORM")),r.a.createElement(He.h,{xs:12,sm:4,container:!0,justify:"flex-start",item:!0},r.a.createElement(He.o,{inputRef:o({required:!0}),name:"from",fullWidth:!0,id:"standard-required",label:"From ."}),c.from&&r.a.createElement(Ti,{severity:"error",message:"Please fill form",width:"80%"})),r.a.createElement(He.h,{xs:6,sm:4,item:!0},r.a.createElement(He.o,{fullWidth:!0,inputRef:o({required:!0}),name:"date",id:"date",label:"Date .",type:"date",defaultValue:(new ra.a).format("YYYY-MM-DD"),InputLabelProps:{shrink:!0}})),r.a.createElement(He.h,{xs:6,sm:4,item:!0},r.a.createElement(He.o,{inputRef:o({required:!0}),name:"jobNo",fullWidth:!0,label:"Job No."}),c.jobNo&&r.a.createElement(Ti,{severity:"error",message:"Please fill Jobno",width:"80%"})),r.a.createElement(He.h,{item:!0,xs:12,md:8},r.a.createElement(He.h,{container:!0,item:!0,xs:12,md:12,style:{display:"block"}},r.a.createElement("p",null,r.a.createElement("b",null,"Cost : ")),r.a.createElement("div",{style:{marginLeft:"2.5vw"}},r.a.createElement(He.m,{style:{display:"inline"},"aria-label":"Suppiler",name:"cost",onChange:function(e){console.log(e),s("cost",e.target.value),console.log(e.target.value);var t=R.filter(function(t){return t.company==e.target.value});console.log(t),s("approvedBy",t[0].email),"Other"==u("cost")?j(!1):j(!0)}},R.map(function(e){return r.a.createElement(He.f,{key:e.company,value:e.company,control:r.a.createElement(He.l,{color:"primary"}),label:e.company})})),r.a.createElement(He.o,{inputRef:o({required:!w}),inputProps:{disabled:w},InputLabelProps:{shrink:!0},name:"costOther",label:"Other"})),c.cost&&r.a.createElement(Ti,{severity:"error",message:c.cost.message,width:"80%"}),c.costOther&&r.a.createElement(Ti,{severity:"error",message:"Please fill other cost",width:"80%"})),r.a.createElement(He.h,{item:!0,xs:12,md:12},r.a.createElement("p",null," Suppiler :"),r.a.createElement("div",{style:{marginLeft:"2.5vw"}},r.a.createElement(He.m,{style:{display:"inline"},"aria-label":"Suppiler",name:"suppiler",onChange:function(e){console.log(e),s("suppiler",e.target.value),"Other"==u("suppiler")?I(!1):I(!0)}},r.a.createElement(He.f,{value:"Nakburin",control:r.a.createElement(He.l,{color:"primary"}),label:"Nakburin"}),r.a.createElement(He.f,{value:"Siam Nistrans",control:r.a.createElement(He.l,{color:"primary"}),label:"Siam Nistrans"}),r.a.createElement(He.f,{value:"Namo",control:r.a.createElement(He.l,{color:"primary"}),label:"Namo"}),r.a.createElement(He.f,{value:"Other",control:r.a.createElement(He.l,{color:"primary"}),label:"Other"})),r.a.createElement(He.o,{inputRef:o({required:!P}),inputProps:{disabled:P},InputLabelProps:{shrink:!0},name:"suppilerOther",label:"Other"})),c.suppiler&&r.a.createElement(Ti,{severity:"error",message:c.suppiler.message,width:"80%"}),c.suppilerOther&&r.a.createElement(Ti,{severity:"error",message:"Plese fill other suppiler",width:"80%"}))),r.a.createElement(He.h,{item:!0,xs:12,md:4},r.a.createElement("div",{style:{marginTop:8}},"Please arrange the transportation as the following below :"," "),r.a.createElement("div",{style:{marginLeft:"2.5vw",marginTop:"12px"}},r.a.createElement(He.m,{style:{display:"inline-block"},"aria-label":"carType",name:"carType",onChange:function(e){return s("carType",e.target.value)}},r.a.createElement(He.f,{value:"Pick Up",control:r.a.createElement(He.l,{color:"primary"}),label:"Pick Up (Not over 1 ton)"}),r.a.createElement(He.f,{value:"6 Wheels (\u0e15\u0e39\u0e49)",control:r.a.createElement(He.l,{color:"primary"}),label:"6 Wheels"}),r.a.createElement(He.f,{value:"10 Wheels (\u0e15\u0e39\u0e49)",control:r.a.createElement(He.l,{color:"primary"}),label:"10 Wheels (\u0e15\u0e39\u0e49)"}),r.a.createElement(He.f,{value:"10 Wheels (\u0e40\u0e1b\u0e25\u0e37\u0e2d\u0e22)",control:r.a.createElement(He.l,{color:"primary"}),label:"10 Wheels (\u0e40\u0e1b\u0e25\u0e37\u0e2d\u0e22)"}),r.a.createElement(He.f,{value:"18 Wheels (\u0e15\u0e39\u0e49)",control:r.a.createElement(He.l,{color:"primary"}),label:"18 Wheels (\u0e15\u0e39\u0e49)"}),r.a.createElement(He.f,{value:"18 Wheels (\u0e40\u0e1b\u0e25\u0e37\u0e2d\u0e22)",control:r.a.createElement(He.l,{color:"primary"}),label:"18 Wheels (\u0e40\u0e1b\u0e25\u0e37\u0e2d\u0e22)"}))),c.carType&&r.a.createElement(Ti,{severity:"error",message:c.carType.message,width:"80%"})),r.a.createElement(He.h,{xs:12,sm:6,item:!0},r.a.createElement(He.o,{inputRef:o({required:!0}),name:"product",fullWidth:!0,label:"Product"}),c.product&&r.a.createElement(Ti,{severity:"error",message:"Please fill product",width:"80%"})),r.a.createElement(He.h,{xs:12,sm:6,item:!0},r.a.createElement(He.o,{inputRef:o({required:!0}),name:"amountCar",fullWidth:!0,type:"number",label:"Need Quantity Car Truck (\u0e08\u0e33\u0e19\u0e27\u0e19\u0e23\u0e16\u0e17\u0e35\u0e48\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e49)"}),c.amountCar&&r.a.createElement(Ti,{severity:"error",message:"Please fill Quantity Car Truck",width:"80%"})),r.a.createElement(He.h,{xs:12,sm:6,item:!0},r.a.createElement(He.o,{inputRef:o({required:!0}),name:"requestDate",fullWidth:!0,label:"Requirement Date to use (\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e49\u0e23\u0e16)",type:"date",InputLabelProps:{shrink:!0}}),c.requestDate&&r.a.createElement(Ti,{severity:"error",message:"Please fill date",width:"80%"})),r.a.createElement(He.h,{xs:12,sm:6,item:!0},r.a.createElement(He.o,{inputRef:o({required:!0}),type:"time",inputProps:{onKeyDown:function(e){e.preventDefault()}},name:"arriveTime",fullWidth:!0,label:"Need arrival time (\u0e40\u0e27\u0e25\u0e32\u0e02\u0e36\u0e49\u0e19\u0e07\u0e32\u0e19)",InputLabelProps:{shrink:!0}}),c.arriveTime&&r.a.createElement(Ti,{severity:"error",message:"Please fill time",width:"80%"})),r.a.createElement(He.h,{xs:12,sm:12,item:!0},r.a.createElement(He.o,{inputRef:o({required:!0}),name:"purpose",fullWidth:!0,label:"Purpose to Request"}),c.purpose&&r.a.createElement(Ti,{severity:"error",message:"Please fill purpose",width:"80%"})),r.a.createElement(He.h,{xs:12,sm:4,item:!0},r.a.createElement(He.o,{inputRef:o({required:!0}),name:"startPlace",fullWidth:!0,label:"The Place to Start"}),c.startPlace&&r.a.createElement(Ti,{severity:"error",message:"Please fill start place",width:"80%"})),r.a.createElement(He.h,{xs:12,sm:4,item:!0},r.a.createElement(He.o,{inputRef:o({required:!0}),name:"startContact",fullWidth:!0,label:"Contact Name"}),c.startContact&&r.a.createElement(Ti,{severity:"error",message:"Please fill contact"})),r.a.createElement(He.h,{xs:12,sm:4,item:!0,style:{position:"relative"}},r.a.createElement(He.o,{inputRef:o({required:!0}),name:"startTel",label:"Tel",fullWidth:!0}),c.startTel&&r.a.createElement(Ti,{severity:"error",message:"Please fill tel",width:"80%"})),a.map(function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(He.h,{xs:12,sm:4,item:!0},r.a.createElement(Ni,{changeDest:k,index:t,label:"Destination ".concat(t+1),inputRef:o({required:!0}),name:"dest[".concat(t,"].place")})),r.a.createElement(He.h,{xs:12,sm:4,item:!0},r.a.createElement(He.o,{inputRef:o({required:!0}),name:"destination[".concat(t,"].contact"),fullWidth:!0,label:"Contact Name"})),r.a.createElement(He.h,{xs:12,sm:4,item:!0,style:{position:"relative"}},r.a.createElement(He.o,{style:{width:"80%"},inputRef:o({required:!0}),name:"destination[".concat(t,"].tel"),label:"Tel"}),0===t?r.a.createElement(He.a,{style:{position:"absolute",right:4,marginTop:8},color:"primary",variant:"outlined",onClick:function(){return function(e){var t=Object(b.a)(a);t.push({}),n(t)}()}},"\u0e40\u0e1e\u0e34\u0e48\u0e21"):t===a.length-1?r.a.createElement(He.a,{style:{position:"absolute",right:4,marginTop:8},color:"secondary",variant:"outlined",onClick:function(){return function(){var e=Object(b.a)(a);e.pop(),n(e)}()}},"\u0e25\u0e1a"):null))}),c.destination&&r.a.createElement(Ti,{severity:"error",message:"Please fill contact or tel",width:"80%"}),!0===E&&r.a.createElement(Ti,{severity:"error",message:"Please select destination",width:"80%"}),r.a.createElement(He.h,{item:!0,xs:12,md:12,style:{display:"flex"}},r.a.createElement("p",null," Return :"),r.a.createElement("div",{style:{marginLeft:"2.5vw"}},r.a.createElement(He.m,{style:{display:"block",marginTop:"6px"},"aria-label":"Return",name:"return",onChange:function(e){return s("return",e.target.value)}},r.a.createElement(He.f,{value:"Yes",control:r.a.createElement(He.l,{color:"primary"}),label:"Yes"}),r.a.createElement(He.f,{value:"No",control:r.a.createElement(He.l,{color:"primary"}),label:"No"})))),c.return&&r.a.createElement(Ti,{severity:"error",message:c.return.message,width:"80%"}),r.a.createElement(He.h,{xs:12,sm:6,item:!0},r.a.createElement(He.o,{inputRef:o({required:!0}),name:"requestBy",fullWidth:!0,label:"Request By"}),c.requestBy&&r.a.createElement(Ti,{severity:"error",message:"Please fill request by",width:"80%"})),r.a.createElement(He.h,{xs:12,sm:6,item:!0},r.a.createElement(He.o,{inputRef:o({required:!0}),name:"approvedBy",fullWidth:!0,label:"Approved By",InputLabelProps:{shrink:!0},inputProps:{readOnly:w}}),c.approvedBy&&r.a.createElement(Ti,{severity:"error",message:"Please select Approver",width:"80%"})),r.a.createElement(He.h,{xs:12,sm:6,item:!0},r.a.createElement(He.o,{inputRef:o({required:!0}),name:"arrangedBy",fullWidth:!0,label:"Arranged By"}),c.arrangedBy&&r.a.createElement(Ti,{severity:"error",message:"Please fill Arranged By",width:"80%"})),r.a.createElement(He.h,{xs:12,sm:6,item:!0},r.a.createElement(He.o,{inputRef:o({required:!0}),name:"dateArranged",fullWidth:!0,type:"date",label:"Date",InputLabelProps:{shrink:!0}}),c.dateArranged&&r.a.createElement(Ti,{severity:"error",message:"Please fill date",width:"80%"})),r.a.createElement(He.h,{item:!0,sm:12,container:!0,justify:"center"},r.a.createElement(He.a,{color:"primary",type:"submit",variant:"outlined"},"Submit"))))))))},Li=function(){var e=function(){var e=Object(f.a)(g.a.mark(function e(t,a){var n,r,i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Headers).append("Content-Type","application/x-www-form-urlencoded"),window.location.origin,(r=new URLSearchParams).append("form","Delivery@aapico.com"),r.append("formdetail","Delivery System"),r.append("to","pokkate.e@aapico.com"),r.append("cc",""),r.append("bcc ",""),r.append("subject","Delivery System  "),r.append("body",'<html>\n          <link\n          href="https://fonts.googleapis.com/css2?family=Bai+Jamjuree:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"\n          rel="stylesheet">   \n        <body >\n        <table align="center" border="1" cellpadding="0" cellspacing="0" width="600" style="style=\'border-collapse: collapse;">\n        <tr>\n            <td style="   \n                       background : #1D366D   ;\n                       padding : 40px;\n                       font-size : 3em ;\n                       text-align :center ;\n                       color : #FFF\n                       ">\n                <p style="font-family : Bai Jamjuree ;margin: 0;">Delivery System </p>\n            </td>\n        </tr>\n        <tr style=\'text-align : center ;  \'>\n            <td style="   \n                       background : #FFF   ;\n                       padding : 20px;\n                       text-align :center ;\n                       color : #121212\n                       ">\n                <p style="font-family: Arial ;margin: 0 0 16 0;font-size : 2em;">\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e01\u0e32\u0e23\u0e2a\u0e48\u0e07\u0e02\u0e2d\u0e07</p>\n              <table align="center" border="1" cellpadding="0" cellspacing="0" width="400" style=\'font-family : Bai Jamjuree ;font-size : 16px ;\'> \n                <tr> \n                  <td style=\'padding : 4px 0px ; text-align :center ;\'>Job No. </td>\n                    <td style=\'padding : 4px 0px ; text-align :center ;\'>'.concat(t.job_no," </td>\n                </tr>\n                 <tr> \n                  <td style='padding : 4px 0px ; text-align :center ;'>Date to use car </td>\n                    <td style='padding : 4px 0px ; text-align :center ;'>").concat(ra()(t.request_date,"YYYY-MM-DD").format("DD-MM-YYYY"),"  </td>\n                </tr>\n                 <tr> \n                  <td style='padding : 4px 0px ; text-align :center ;'> Car </td>\n                    <td style='padding : 4px 0px ;  text-align :center ;'>").concat(t.car_type,"  ").concat(t.car_amount,"  \u0e04\u0e31\u0e19\n                    </td>\n                </tr>\n                 <tr> \n                  <td style='padding : 4px 0px ; text-align :center ;'>Request By </td>\n                    <td style='padding : 4px 0px ; text-align :center ;'>").concat(t.request_by," </td>\n                </tr>\n                 <tr> \n                  <td style='padding : 4px 0px ; text-align :center ;'>Purpose </td>\n                    <td style='padding : 4px 0px ; text-align :center ;'>").concat(t.purpose,' </td>\n                </tr>\n          </table>\n          <br>\n          <table align=\'center\' width="100%" border="0" cellspacing="0" cellpadding="0" >\n          <tr style=\'margin-top : 8px ;\'>\n            <td >\n              <table align=\'center\' border="0" cellspacing="0" cellpadding="0">\n                <tr>\n                  <td span=\'2\' align="center" style="border-radius: 8px;" bgcolor="">\n \n          \n        \x3c!--[if mso]>\n  \n      \n      \n       </td>\n              </td>\n            </table>\n            </td>\n          </tr>\n        </table>\n          </td>\n          </tr>\n       \n        <tr>\n            <td  style="   \n                       background : #1D366D   ;\n                       padding : 20px;\n                       text-align :center ;\n                       color : #FFF\n                       ">\n                <p style="margin: 0;"> Copyright &copy; AAIPICO HITECH 2021</p>\n            </td>\n        </tr>\n      </table>\n  \n  </body>\n    \n  </html>')),i={method:"POST",headers:n,body:r,redirect:"follow"},e.next=14,fetch("https://ess.aapico.com/email",i).then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(e){return console.log("error",e)});case 14:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),t=Object(m.g)(),a=t.id,n=t.status;console.log(a,n);var i=r.a.useState(),o=Object(ki.a)(i,2),l=o[0],s=o[1],c=function(){var e=Object(f.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://delivery-backend-1.powermap.live/specialrequests?_id=".concat(a),{method:"GET"}).then(function(e){return e.json()}).then(function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(t[0]),e.abrupt("return",t[0]);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();r.a.useEffect(Object(f.a)(g.a.mark(function t(){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c().then(function(){var t=Object(f.a)(g.a.mark(function t(r){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(r),"waiting"!==r.status){t.next=4;break}return t.next=4,u(a,n).then(function(){var t=Object(f.a)(g.a.mark(function t(a){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("approve"!==n){t.next=3;break}return t.next=3,e(r,r.id);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t)})),[]);var u=function(){var e=Object(f.a)(g.a.mark(function e(t,a){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://delivery-backend-1.powermap.live/specialrequests/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({status:"approve"===a?"approved":"reject"===a?"rejected":"waiting"})}).then(function(e){return e.json()}).then(function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}();return l&&"waiting"===l.status?r.a.createElement(r.a.Fragment,null,r.a.createElement(He.b,{style:{marginTop:24,marginLeft:"8vw",marginRight:"8vw"}},r.a.createElement(He.c,null,r.a.createElement(Ti,{severity:"info",message:"".concat(n," success"),width:"95%"})))):r.a.createElement(He.b,{style:{marginTop:24,marginLeft:"8vw",marginRight:"8vw"}},r.a.createElement(He.c,null,r.a.createElement(Ti,{severity:"error",message:"   This request is already ".concat(l&&l.status),width:"95%"})))},zi=a(331),Bi=a.n(zi),Fi=a(90),Wi=function(){var e={Add:Object(n.forwardRef)(function(e,t){return r.a.createElement(Fi.a,Object.assign({},e,{ref:t}))}),Check:Object(n.forwardRef)(function(e,t){return r.a.createElement(Fi.c,Object.assign({},e,{ref:t}))}),Clear:Object(n.forwardRef)(function(e,t){return r.a.createElement(Fi.f,Object.assign({},e,{ref:t}))}),Delete:Object(n.forwardRef)(function(e,t){return r.a.createElement(Fi.g,Object.assign({},e,{ref:t}))}),DetailPanel:Object(n.forwardRef)(function(e,t){return r.a.createElement(Fi.e,Object.assign({},e,{ref:t}))}),Edit:Object(n.forwardRef)(function(e,t){return r.a.createElement(Fi.h,Object.assign({},e,{ref:t}))}),Export:Object(n.forwardRef)(function(e,t){return r.a.createElement(Fi.m,Object.assign({},e,{ref:t}))}),Filter:Object(n.forwardRef)(function(e,t){return r.a.createElement(Fi.i,Object.assign({},e,{ref:t}))}),FirstPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(Fi.j,Object.assign({},e,{ref:t}))}),LastPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(Fi.k,Object.assign({},e,{ref:t}))}),NextPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(Fi.e,Object.assign({},e,{ref:t}))}),PreviousPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(Fi.d,Object.assign({},e,{ref:t}))}),ResetSearch:Object(n.forwardRef)(function(e,t){return r.a.createElement(Fi.f,Object.assign({},e,{ref:t}))}),Search:Object(n.forwardRef)(function(e,t){return r.a.createElement(Fi.n,Object.assign({},e,{ref:t}))}),SortArrow:Object(n.forwardRef)(function(e,t){return r.a.createElement(Fi.b,Object.assign({},e,{ref:t}))}),ThirdStateCheck:Object(n.forwardRef)(function(e,t){return r.a.createElement(Fi.l,Object.assign({},e,{ref:t}))}),ViewColumn:Object(n.forwardRef)(function(e,t){return r.a.createElement(Fi.o,Object.assign({},e,{ref:t}))})},t=En.a.ExcelFile,a=En.a.ExcelFile.ExcelSheet,i=r.a.useState(),o=Object(ki.a)(i,2),l=o[0],s=o[1],c=r.a.useState(!1),u=Object(ki.a)(c,2),p=u[0],d=u[1],m=function(){var e=Object(f.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://delivery-backend-1.powermap.live/specialrequests",{method:"GET"}).then(function(e){return e.json()}).then(function(){var e=Object(f.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();r.a.useState(Object(f.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m().then(function(){var e=Object(f.a)(g.a.mark(function e(t){var a,n,r,i,o,l,c,u,p;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(s(t),n={alignment:{horizontal:"center"},border:a={top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}},fill:{patternType:"solid",fgColor:{rgb:"1D366D"}},font:{color:{rgb:"ffffff"}}},r={alignment:{horizontal:"center"},border:a},l=[],c=0,t.map(function(e){(o=JSON.parse(e.dest_place.split(","))).length>c&&(c=o.length)}),u=[{title:"#",style:n,width:{wpx:80}},{title:"Cost Company",style:n,width:{wpx:80}},{title:"Suppiler",width:{wpx:90},style:n},{title:"Invoice Number",style:n,width:{wch:30}},{title:"Job No",style:n,width:{wch:35}},{title:"Date Submit",style:n,width:{wch:10}},{title:"Origin",style:n,width:{wpx:80}}],p=0;p<c;p++)u.push({title:"Des ".concat(p+1),style:n,width:{wpx:150}});u.push({title:"Product",style:n,width:{wpx:90}},{title:"Note",style:n,width:{wpx:90}},{title:"Return",style:n,width:{wpx:90}},{title:"Overtime",style:n,width:{wpx:90}},{title:"Department",style:n,width:{wpx:90}},{title:"No of trip",style:n,width:{wpx:90}},{title:"Truck Type",style:n,width:{wpx:90}},{title:"Total Price",style:n,width:{wpx:90}},{title:"Name user request",style:n,width:{wpx:90}},{title:"Name Manager",style:n,width:{wpx:90}},{title:"manager Approved",style:n,width:{wpx:90}}),t.map(function(e,t){i=[{value:t,style:r},{value:e.cost,style:r},{value:e.suppiler,style:r},{value:0,style:r},{value:e.job_no,style:r},{value:e.date,style:r},{value:e.start_place,style:r}];for(var a=0;a<c;a++)i.push({style:r,value:JSON.parse(e.dest_place.split(","))[a]||""});var n=null;JSON.parse(e.approve_by).split(",").map(function(e){null!=n?n+=","+e.substr(0,e.indexOf("@")):n=e.substr(0,e.indexOf("@"))}),i.push({value:e.product,style:r},{value:e.purpose,style:r},{value:e.return,style:r},{value:"Yes",style:r},{value:"department",style:r},{value:"No of trip",style:r},{value:e.car_type,style:r},{value:"Total Price",style:r},{value:e.request_by,style:r},{value:n,style:r},{value:e.status,style:r}),l.push(i)}),d({status:!0,data:[{columns:u,data:l}]});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)})),[]);return r.a.useEffect(function(){!0===p.status&&d(Object(ne.a)({},p,{status:!1}))},[p]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginRight:"4vw",marginLeft:"4vw",marginTop:"4vw",marginBottom:"4vw",maxWidth:"100%"}},r.a.createElement(Bi.a,{icons:e,columns:[{title:"from",field:"from"},{title:"Job No",field:"job_no"},{title:"Cost",field:"cost"},{title:"Suppiler",field:"suppiler"},{title:"Type of car",field:"car_type",width:600},{title:"Amount of car",field:"car_amount"},{title:"Product",field:"product"},{title:"Request date",field:"request_date"},{title:"Arrive time",field:"arrive_time"},{title:"Start place",field:"start_place"},{title:"Destination",render:function(e){return JSON.parse(e.dest_place)+" "}},{title:"Purpose",field:"purpose"},{title:"Request by",field:"request_by"},{title:"Approve by",field:"approve_by"},{title:"Arrange by",field:"arrange_by"},{title:"Arrange date",render:function(e){return ra()(e.arrange_date,"YYYYMMDD").format("DD-MM-YYYY")}},{title:"Status request",field:"status"}],data:l,actions:[{icon:function(){return r.a.createElement(t,{element:r.a.createElement(Fi.m,{style:{marginTop:6}}),filename:"Delivery Request"},r.a.createElement(a,{dataSet:p.data,name:"Delivery Request"}))},tooltip:"Export Xlsx ",isFreeAction:!0}],options:{search:!1,cellStyle:{minWidth:200},headerStyle:{fontWeight:"bold",width:"100%"}},title:"Delivery Request"})))},Vi=(a(6600),a(252)),Ui=a.n(Vi),Mi=a(176),qi=a.n(Mi),Gi=new _i,Hi=[{icon:qi.a,href:"/home",label:"Home"},{iconName:"view_list",href:"invoicelistadmin",label:"Order List"},{iconName:"person",href:"#",label:"Logout",onClick:function(){return Gi.logout()}}],Ji=[{icon:qi.a,href:"/home",label:"Home"},{iconName:"add_circle",href:"/addinvoice",label:"Add Order"},{iconName:"map",href:"/map",label:"Real-time Location"},{iconName:"view_list",href:"/invoicelist",label:"Order List"},{iconName:"person",href:"form",label:"Form"},{iconName:"view_list",href:"request",label:"Request Table"},{iconName:"person",href:"#",label:"Logout",onClick:function(){return Gi.logout()}}],Yi=[{icon:qi.a,href:"/home",label:"Home"},{iconName:"view_list",href:"/invoicelist",label:"Order List"},{iconName:"attach_money",href:"/priceDB",label:"Price Database"},{iconName:"person",href:"#",label:"Logout",onClick:function(){return Gi.logout()}}],Qi=[{icon:qi.a,href:"/home",label:"Home"},{iconName:"map",href:"/map",label:"Real-time Location"},{iconName:"view_list",href:"/invoicelist",label:"Order List"},{iconName:"person",href:"#",label:"Logout",onClick:function(){return Gi.logout()}}],Ki=[{icon:qi.a,href:"/home",label:"Home"},{iconName:"add_circle",href:"/addinvoice",label:"Add Order"},{iconName:"map",href:"/map",label:"Real-time Location"},{iconName:"view_list",href:"/invoicelist",label:"Order List"},{iconName:"person",href:"#",label:"Logout",onClick:function(){return Gi.logout()}}];function Xi(){switch(localStorage.getItem("role")){case"Administrator":return Hi;case"admin":return Ki;case"issuer":return Ji;case"purchaser":return Yi;case"supplier":return Qi;default:return null}}var Zi=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.history;return r.a.createElement(Ui.a,{stickyFooter:!0,mainGrow:!1,appBarPosition:"static",appBarContent:r.a.createElement(Vi.BasicAppBar,{title:"Delivery Management System",menuIconAlways:!0}),footerContent:"/map"!==n.location.pathname?r.a.createElement(Vi.BasicFooter,{title:"Powermap",logo:a(6807)}):null,leftDrawerUnder:!0,leftDrawerContent:r.a.createElement(Vi.BasicDrawer,{links:Xi()}),leftDrawerType:"persistent"},t)}}]),t}(r.a.Component),$i=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(He.b,{style:{margin:"30px"}},r.a.createElement(Bi.a,{title:"Pricing Database",columns:[{title:"Company",field:"Company"},{title:"Supplier",field:"Supplier"},{title:"Description",field:"Transportation Description",cellStyle:{width:300},editComponent:function(e){return r.a.createElement(He.o,{value:e.value,fullWidth:!0,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"Item Code",field:"Item code"},{title:"Price",field:"Price"}],options:{search:!0,paging:!0,pageSize:20,pageSizeOptions:[5,10,20,50]},localization:{body:{editRow:{deleteText:"\u0e04\u0e38\u0e13\u0e41\u0e19\u0e48\u0e43\u0e08\u0e44\u0e2b\u0e21 ?"},toolbar:{searchPlaceholder:"Search Description"}}},data:function(e){return new Promise(function(t,a){var n=H.url+"/deliveryfees?";n+="_limit="+e.pageSize,n+="&_start="+e.page*e.pageSize,n+="&company_id="+localStorage.getItem("companyID"),n+=e.search?"&Transportation Description_contains="+e.search:"",fetch(n,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(a){console.log(e);var n=a.headers.get("content-range");a.json().then(function(a){t({data:a,page:e.page,totalCount:n})})})})},editable:{onRowAdd:function(e){return new Promise(function(t,a){setTimeout(function(){console.log(e),G.a.post(H.url+"/deliveryfees",e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){console.log(e)}),t()},1e3)})},onRowUpdate:function(e,t){return new Promise(function(a,n){setTimeout(function(){console.log("row update"),G.a.put(H.url+"/deliveryfees/".concat(t.id),e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){console.log(e)}),a()},1e3)})},onRowDelete:function(e){return new Promise(function(t,a){setTimeout(function(){console.log("row delete"),G.a.delete(H.url+"/deliveryfees/".concat(e.id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("id_token"))}}).then(function(e){console.log(e)}),t()},1e3)})}}}))}}]),t}(r.a.Component),eo=a(6826),to=a(6825),ao=a(777),no=a.n(ao),ro=a(776),io=a.n(ro),oo=Object(M.createGenerateClassName)({dangerouslyUseGlobalCSS:!1,productionPrefix:"c"}),lo=no()(),so=new _i,co=function(e){var t=e.component,a=Object(d.a)(e,["component"]);return r.a.createElement(m.b,Object.assign({},a,{render:function(e){return so.loggedIn()?r.a.createElement(t,e):r.a.createElement(m.a,{to:"/login"})}}))},uo=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return console.log(so.loggedIn()),r.a.createElement(io.a,{generateClassName:oo},r.a.createElement(eo.a,null,r.a.createElement(to.a,null,r.a.createElement(m.c,{history:lo},r.a.createElement(Zi,{history:lo},r.a.createElement("div",{style:{width:"-webkit-fill-available",backgroundColor:"black"}},r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/login",component:yi}),r.a.createElement(m.b,{exact:!0,path:"/status/:id/:status",component:Li}),r.a.createElement(co,{path:"/home",component:ae}),r.a.createElement(co,{path:"/map",component:Ge}),r.a.createElement(co,{path:"/addinvoice",component:ma})," ",r.a.createElement(co,{path:"/invoicelist",component:Dn}),r.a.createElement(co,{path:"/invoicelistadmin",component:Jn}),r.a.createElement(co,{path:"/editinvoice",component:_r}),r.a.createElement(co,{path:"/form",component:Ri}),r.a.createElement(co,{path:"/request",component:Wi}),r.a.createElement(co,{path:"/viewinvoice",component:zr}),r.a.createElement(co,{path:"/viewinvoiceAP",component:Yr}),r.a.createElement(co,{path:"/editinvoiceAP",component:li}),r.a.createElement(co,{path:"/print",component:nr}),r.a.createElement(co,{path:"/report",component:xi}),r.a.createElement(co,{path:"/priceDB",component:$i}),r.a.createElement(m.b,{path:"*",component:function(){return r.a.createElement(m.a,{to:"/home"})}}))))))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(uo,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},761:function(e,t,a){e.exports=a.p+"static/media/truck.da48fb46.png"},762:function(e,t,a){e.exports=a.p+"static/media/driver.fb3209ed.png"},763:function(e,t,a){e.exports=a.p+"static/media/login.cce02511.png"},764:function(e,t,a){e.exports=a.p+"static/media/poi.373758b4.png"},770:function(e,t,a){e.exports=a.p+"static/media/errorIcon.999be554.png"},771:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABmJLR0QA/wD/AP+gvaeTAAALNklEQVR4nO2df3BU1RXHv+fuJsFklxAo4jhKdpdfVugP0XZsVQo2dZwWf7RVsI71j3asZDd2ijP+aMURlLbUaZkWsptktFNrOyOkPwa1UgehInac2qLoKNTUJLuBmY4IaczuC5DkvXf6RwJlxPJ+/0ru5+97zzk757v33XffvfcAEolEIpFIJBKJRCKRSCYLFHQAntDJsTlHymmOxedD54vAPJ8JKQD1INSBUQegAUDdeI8hAAMgDIExBGCQGCUQ/QuC3hE02tXdUF/CCtIC+kWeMSEEMHdT/1QtVvUFFlhGTEsBLARQ7bKbESK8zcy7ifCiGB3d0/3dGWWXffhOZAWQLiifZOAWAq4G+DIAMZ9DUAF6DeBdpNGW3rsSb/ns3xUiJYALHh+cXjUibgJwO4Argo7ndAg4oIOfBItfl3KJ94KOxyyREECmoDTprK8momsAxIOOxwCVmXcIFht7WxK7gg7GiPAKgJnShcpyEP0AwOVBh2OTfQB+XGxO/B5EHHQwH0X4BMBMqYKyggQeAOMTQYfjEm8C+GEYhRAqAaQL5QUAtQJoCjoWj3hZELI9zcm3gw7kJKEQwPkdXDtFVe5lwvfh/utb2FDBKFRPObGm69szK0EHE7gAMm3l5QxqA+OCoGPxmUMEvbk3W/9ckEEEJoClazl+cKayhgkPAhBBxREwDMbm2pmJe/avoJEgAghEAJmO47NZVbeA8Lkg/IcO5r0a6SsPZqf1+u3a939eqlC+kTX1TZn80yC6LIbY3nShfL3frn0VQLpQyRHoDwCm+ek3IjQAtC1TUO7206lvAkgVyvcBaPXTZwQhBv8sU1A2+ObQcw+dHMscUfJMuNNzXxMIInpi9uG6O3avJdVTP14aRyfH0keVpwDc7KmfiQqjszgzcauX+xC8G46ZKd2vtEEm3z6EFemjSsFLF54JIN2mrAfjDq/sTyK+kylU1nll3JNHQCZfyTIh74XtyQozfa+US/zCbbuuCyBVKN84/qonZ/vuooP5xmJu6rNuGnVVAJmO47NZU/cBmO6mXckpBpjUxaXmhpJbBl37l17awVWsqlsgk+8lDcRVWxd2smtfTF0TwICmPCqXd/2AP3vs6NB6t6y58ghI58vXgehpt+xJDGESYnnvqrrtTg05Ttj5HVxbo1UOANTo1JbEEodq+fjF+3PnKk6MOH4E1KiVh2XyA+HCIdQ+4NSIoxFgbmtloSawD0CV00AkthjRGZ/uyyX/adeA/RGAmTSBVsjkB0m1EGgHs+0/su2OqXxlJRG22O0fJPMaBJrScaTrx35+cZDxQlFF94AecGT2IMbXe3PJP9rqa8sjM6XblTejtm8/WU1Yv6QGy+fFz/jhDODZd1Ws2TMMZSRUW/fN8EaxObHYzpkDWwJItZZvIEHb7PQNimQ14XdfPQfzp5/9qdfVr+PmbccjJwIS4it2XgvtzQEE3WurX4CsX1JjmHwAWDBD4OGranyIyF1Y1x+008+yADIFpYmAz9txFhTzGgSWzzN/pvSG+XHMbYjct6zLG/OVZVY7Wf6VOuurrfYJmi+lz3zmnw0C0JQK+yHkMxFEljeUWhJA+jFl1vgR7UiRqrc+1UlPi+KqNl+bfkyZZaWHtRFAxW0I//l8V+BozQFPEucR3GKlgzUBMH/TUvuQUBq0nk07fcIAkbUcmRbAnLbKIgCfshxRCNhRVGElnToDLxQ93Y3tJZdmNium12dMC0BnfMNePMHTPaDj2XfNJ/Tpd1X0fBDNVUEAYMGmd2JbeARQpC9tWLNnGF39xkl9p1/HQy8P+xCRdzDhi2bbmprqZjr+U89aVT/8v4rNVRLVhEeW1OD6j1gK1nnsn//Qy5FcCv4wakwdmWHmHkNTM3pW40tA0U4+ACgjjNU7TyD/mkBTKo7M+KtezweMncVoD/sfIq5XT7kSgOHSsDkBCCwL19VGzuge0NE9EMh9DL7BurYMJgRgag4wfv2qJFKQqWVhYwF0cgzAxU7DkfjOovHcnRVDAcw5Uk4DiN7nMUlN4+HB2UaNDAXAhAXuxCPxGxJxw9yZmAPEpACii3MBMFgKIKqQce7MvAZOiD3/5yUIi2eZW8p4/bCG95Tov/cKcMqojRkB1DsPJXgWz4qh9Zopptq27DiB7UpkPwadgkFTjdqYWQdIuBCLJBiSRg1MCIANjUjCCrkhAGMjkrBi/OeVj4CJjSsCkExgzAjA0flzSaAYFqQwMwkMvKqFxC7khgCMjUjCivGf11gAbDyMSEKLCwIgRL4+7mSFwIa5MzMJ7HMhFkkA6KCSURtDARCoy5VoJP7DxrkzMQJoUgDRxbkARIzfcScWie+IUcPcGQqgu6G+BCDaR2UmJydKM6YdMmpk/AgYK1dywI2IJL6y30ypGZPfAvhFp9FI/Ib+YqaVuYMhBCmAiKGDTOXMlACqqodfAhD9PVKTB3VKzbG/mmloSgBjZc7pNWcxSXzkVbOl6c3vByDeaTscib8wTD3/AQsCiGl4yl40Er8RAp2m25pt2N2S3A/gDVsRSfyDeW9Pc/Jts80tbQkj0G+sRyTxExbWcmRNAMS/hXwbCDMqxWmrlQ6WBNDTnHyfmXdYi0niH/Tn4h2Jw1Z6WN4VLFhstNpH4g9MbDk3lgXQ25LYxcArVvtJPOdvpebkbqudbN37S8wbQPSMnb5Bsb1HRaZt4u5w1yEettPPdsmYTLuylxmLbfWXuI3tkjH2TgYRMTM22OorcR0Gr7OTfMBJ3UBmyrQpuxiwXKVC4iovFZsTy+wKwP7ZQCJWBVoAjNq2IXHKiM5otpt8wOHh0IOrkgcA+rkTGxJH/NRJ1VDAhdPBw7G6tTCx/1ziOgePDQ39yKkRxwL49510jKC1AJZqMkicwcx05+F7zhtyasiV+wF6s/XPga2vQknsQaBHS7nE827Ycu2CiMYjyfvlCqEf0KsNsTpbRSI/0ppbhgBgTv7YhTpp+wDMcNOu5BQD0OOXFFvOce28pqtXxPTkag8B/C0AE6byQojQSIjb3Ew+4MEdQcXs1GcYyLltV4LVdopDG+HJJVGlbLKdAFsfJyRnwsBDxWxysxe2Pa2Pmi5UNgG4y0sfEx1idPTmkqu8su/pNXHFjyVWg83vUJWcwdbemQlPH6fe3hO4grTizMStBLR76mcCwqBfNb6fuM3MAU8n+FYiO1Uo30cg+QnZBAT6SW82cb8/vnwkk69kmbAZ8obS/4fGQEspm/RtxPRVAACQzpevA9ETAKb77Tvk9JMQt3vxqnc2fBcAcGrF8CkAVwThP3zwP3RNX9l317Si354DGYp7crWHGt9PLCXGOkzuVUMGY9P0WPKKIJIPBDQCnE6mfejLrOttAAxr3E0suI9ZrHLrq55dAp+M9a6q2z4cS3x8fDSYDJdRjYKxqZZPLAo6+UAIRoDTybQPzmNdtAK4JuhYPOKlmI7c+EnrUBAqAZwkk698jQlrAFwSdCxuQITXdeZHStmp24KO5cOEUgAnyeTLV+pE6wi4OuhY7MDAK8S8oZhN/snJzl0vCbUATtKYrywTRHcDfC1sHmfzERWg53XmjX25ZOhvV4uEAE5yweOD06tGxE0AbkfI1hAIOKCDn6Qq8YTVI9pBEikBnM7c1spCjbASQBMIn4H/I4PKwN8FsFMV2Dp2RiJ6RFYAp7Pgl0eSo6O1V7GmXQ2ipQAWAahx2c0wmN8CYTeJ2IvnaEN79ufOjfxx4wkhgDPo5Njso4ONguPzQbhIgBcwOMWgqQTUYaye3jT8ryaiAuADjJVYUQCuMKg4ft9+F+tqV19/fR/W0mRetZRIJBKJRCKRSCQSiUQScf4Lkl502YK0PuwAAAAASUVORK5CYII="}},[[5994,2,1]]]);
//# sourceMappingURL=main.14236d94.chunk.js.map